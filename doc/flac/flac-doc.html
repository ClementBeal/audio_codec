<!DOCTYPE html>
<html lang="en" class="Internet-Draft"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta content="Common,Hebrew,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>Free Lossless Audio Codec</title>
<meta content="Martijn van Beurden" name="author">
<meta content="Andrew Weaver" name="author">
<meta content="
       This document defines the Free Lossless Audio Codec (FLAC) format and its streamable subset. FLAC is designed to reduce the amount of computer storage space needed to store digital audio signals without losing information in doing so (i.e., lossless). FLAC is free in the sense that its specification is open and its reference implementation is open-source. Compared to other lossless (audio) coding formats, FLAC is a format with low complexity and can be coded to and from with little computing resources. Decoding of FLAC has seen many independent implementations on many different platforms, and both encoding and decoding can be implemented without needing floating-point arithmetic. 
    " name="description">
<meta content="xml2rfc 3.19.0" name="generator">
<meta content="free,lossless,audio,codec,encoder,decoder,compression,compressor,archival,archive,archiving,backup,music" name="keyword">
<meta content="draft-ietf-cellar-flac-14" name="ietf.draft">
<!-- Generator version information:
  xml2rfc 3.19.0
    Python 3.9.18
    ConfigArgParse 1.7
    google-i18n-address 3.1.0
    intervaltree 3.1.0
    Jinja2 3.1.2
    lxml 4.9.4
    platformdirs 4.1.0
    pycountry 23.12.11
    PyYAML 6.0.1
    requests 2.31.0
    setuptools 58.1.0
    six 1.16.0
    wcwidth 0.2.12
    weasyprint 60.2
-->
<link href="https://www.ietf.org/a/www/www6s/staging/draft-ietf-cellar-flac-14.xml" rel="alternate" type="application/rfc+xml">
<link href="#copyright" rel="license">
<style type="text/css">/*

  NOTE: Changes at the bottom of this file overrides some earlier settings.

  Once the style has stabilized and has been adopted as an official RFC style,
  this can be consolidated so that style settings occur only in one place, but
  for now the contents of this file consists first of the initial CSS work as
  provided to the RFC Formatter (xml2rfc) work, followed by itemized and
  commented changes found necessary during the development of the v3
  formatters.

*/

/* fonts */
@import url('https://fonts.googleapis.com/css?family=Noto+Sans'); /* Sans-serif */
@import url('https://fonts.googleapis.com/css?family=Noto+Serif'); /* Serif (print) */
@import url('https://fonts.googleapis.com/css?family=Roboto+Mono'); /* Monospace */

:root {
  --font-sans: 'Noto Sans', Arial, Helvetica, sans-serif;
  --font-serif: 'Noto Serif', 'Times', 'Times New Roman', serif;
  --font-mono: 'Roboto Mono', Courier, 'Courier New', monospace;
}

@viewport {
  zoom: 1.0;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}
/* general and mobile first */
html {
}
body {
  max-width: 90%;
  margin: 1.5em auto;
  color: #222;
  background-color: #fff;
  font-size: 14px;
  font-family: var(--font-sans);
  line-height: 1.6;
  scroll-behavior: smooth;
  overflow-wrap: break-word;
}
.ears {
  display: none;
}

/* headings */
#title, h1, h2, h3, h4, h5, h6 {
  margin: 1em 0 0.5em;
  font-weight: bold;
  line-height: 1.3;
}
#title {
  clear: both;
  border-bottom: 1px solid #ddd;
  margin: 0 0 0.5em 0;
  padding: 1em 0 0.5em;
}
.author {
  padding-bottom: 4px;
}
h1 {
  font-size: 26px;
  margin: 1em 0;
}
h2 {
  font-size: 22px;
  margin-top: -20px;  /* provide offset for in-page anchors */
  padding-top: 33px;
}
h3 {
  font-size: 18px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h4 {
  font-size: 16px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h5, h6 {
  font-size: 14px;
}
#n-copyright-notice {
  border-bottom: 1px solid #ddd;
  padding-bottom: 1em;
  margin-bottom: 1em;
}
/* general structure */
p {
  padding: 0;
  margin: 0 0 1em 0;
  text-align: left;
}
div, span {
  position: relative;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignRight.art-text pre {
  padding: 0;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
svg[font-family~="serif" i], svg [font-family~="serif" i] {
  font-family: var(--font-serif);
}
svg[font-family~="sans-serif" i], svg [font-family~="sans-serif" i] {
  font-family: var(--font-sans);
}
svg[font-family~="monospace" i], svg [font-family~="monospace" i] {
  font-family: var(--font-mono);
}
.alignCenter.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignCenter.art-text pre {
  padding: 0;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  display: table;
  border: none;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 1em 2em;
}
ol ol, ul ul, ol ul, ul ol {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
ul.ulBare, li.ulBare {
  margin-left: 0em !important;
}
ul.compact, .ulCompact,
ol.compact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
}
dl > dt {
  float: left;
  margin-right: 1em;
}
/* 
dl.nohang > dt {
  float: none;
}
*/
dl > dd {
  margin-bottom: .8em;
  min-height: 1.3em;
}
dl.compact > dd, .dlCompact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}

/* links */
a {
  text-decoration: none;
}
a[href] {
  color: #22e; /* Arlen: WCAG 2019 */
}
a[href]:hover {
  background-color: #f2f2f2;
}
figcaption a[href],
a[href].selfRef {
  color: #222;
}
/* XXX probably not this:
a.selfRef:hover {
  background-color: transparent;
  cursor: default;
} */

/* Figures */
tt, code, pre {
  background-color: #f9f9f9;
  font-family: var(--font-mono);
}
pre {
  border: 1px solid #eee;
  margin: 0;
  padding: 1em;
}
img {
  max-width: 100%;
}
figure {
  margin: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption {
  font-style: italic;
  margin: 0 0 1em 0;
}
@media screen {
  pre {
    overflow-x: auto;
    max-width: 100%;
    max-width: calc(100% - 22px);
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 1.2em 2em;
}
blockquote {
  background-color: #f9f9f9;
  color: #111; /* Arlen: WCAG 2019 */
  border: 1px solid #ddd;
  border-radius: 3px;
  margin: 1em 0;
}
blockquote > *:last-child {
  margin-bottom: 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
  border: 1px solid #eee;
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 0.5em 0.75em;
}
th {
  text-align: left;
  background-color: #e9e9e9;
}
tr:nth-child(2n+1) > td {
  background-color: #f5f5f5;
}
table caption {
  font-style: italic;
  margin: 0;
  padding: 0;
  text-align: left;
}
table p {
  /* XXX to avoid bottom margin on table row signifiers. If paragraphs should
     be allowed within tables more generally, it would be far better to select on a class. */
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  color: #666; /* Arlen: AHDJ 2019 */
  text-decoration: none;
  visibility: hidden;
  user-select: none;
  -ms-user-select: none;
  -o-user-select:none;
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}
@media screen {
  aside:hover > a.pilcrow,
  p:hover > a.pilcrow,
  blockquote:hover > a.pilcrow,
  div:hover > a.pilcrow,
  li:hover > a.pilcrow,
  pre:hover > a.pilcrow {
    visibility: visible;
  }
  a.pilcrow:hover {
    background-color: transparent;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid #eee;
}
.bcp14 {
  font-variant: small-caps;
}

.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: 0.9em;
}
#identifiers dt {
  width: 3em;
  clear: left;
}
#identifiers dd {
  float: left;
  margin-bottom: 0;
}
/* Fix PDF info block run off issue */
@media print {
  #identifiers dd {
    float: none;
  }
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #666; /* Arlen: WCAG 2019 */
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc  {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
nav.toc ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
nav.toc li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dd {
  margin-left: 8em;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
.index ul {
  margin: 0 0 0 1em;
  padding: 0;
  list-style: none;
}
.index ul ul {
  margin: 0;
}
.index li {
  margin: 0;
  text-indent: -2em;
  padding-left: 2em;
  padding-bottom: 5px;
}
.indexIndex {
  margin: 0.5em 0 1em;
}
.index a {
  font-weight: 700;
}
/* make the index two-column on all but the smallest screens */
@media (min-width: 600px) {
  .index ul {
    -moz-column-count: 2;
    -moz-column-gap: 20px;
  }
  .index ul ul {
    -moz-column-count: 1;
    -moz-column-gap: 0;
  }
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}

address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  font-family: var(--font-sans);
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}

/* temporary notes */
.rfcEditorRemove::before {
  position: absolute;
  top: 0.2em;
  right: 0.2em;
  padding: 0.2em;
  content: "The RFC Editor will remove this note";
  color: #9e2a00; /* Arlen: WCAG 2019 */
  background-color: #ffd; /* Arlen: WCAG 2019 */
}
.rfcEditorRemove {
  position: relative;
  padding-top: 1.8em;
  background-color: #ffd; /* Arlen: WCAG 2019 */
  border-radius: 3px;
}
.cref {
  background-color: #ffd; /* Arlen: WCAG 2019 */
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 1023px) {
  body {
    padding-top: 2em;
  }
  #title {
    padding: 1em 0;
  }
  h1 {
    font-size: 24px;
  }
  h2 {
    font-size: 20px;
    margin-top: -18px;  /* provide offset for in-page anchors */
    padding-top: 38px;
  }
  #identifiers dd {
    max-width: 60%;
  }
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    background-color: inherit;
    border-bottom: 1px solid #ccc;
  }
  #toc h2 {
    margin: -1px 0 0 0;
    padding: 4px 0 4px 6px;
    padding-right: 1em;
    min-width: 190px;
    font-size: 1.1em;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 6px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    padding: 0.5em 1em 1em;
    overflow: auto;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 1024px) {
  body {
    max-width: 724px;
    margin: 42px auto;
    padding-left: 1.5em;
    padding-right: 29em;
  }
  #toc {
    position: fixed;
    top: 42px;
    right: 42px;
    width: 25%;
    margin: 0;
    padding: 0 1em;
    z-index: 1;
  }
  #toc h2 {
    border-top: none;
    border-bottom: 1px solid #ddd;
    font-size: 1em;
    font-weight: normal;
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 0;
    overflow: auto;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {
    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  .breakable pre {
    break-inside: auto;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

/* This is commented out here, as the string-set: doesn't
   pass W3C validation currently */
/*
.ears thead .left {
  string-set: ears-top-left content();
}

.ears thead .center {
  string-set: ears-top-center content();
}

.ears thead .right {
  string-set: ears-top-right content();
}

.ears tfoot .left {
  string-set: ears-bottom-left content();
}

.ears tfoot .center {
  string-set: ears-bottom-center content();
}

.ears tfoot .right {
  string-set: ears-bottom-right content();
}
*/

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
  /* The following is commented out here, but set appropriately by in code, as
     the content depends on the document */
  /*
  @top-left {
    content: 'Internet-Draft';
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-left {
    content: string(ears-top-left);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-center {
    content: string(ears-top-center);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-right {
    content: string(ears-top-right);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @bottom-left {
    content: string(ears-bottom-left);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-center {
    content: string(ears-bottom-center);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-right {
      content: '[Page ' counter(page) ']';
      vertical-align: top;
      border-top: solid 1px #ccc;
  }
  */

}

/* Changes introduced to fix issues found during implementation */
/* Make sure links are clickable even if overlapped by following H* */
a {
  z-index: 2;
}
/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}


/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Leave room in document info to show Internet-Draft on one line */
#identifiers dt {
  width: 8em;
}

/* Don't waste quite as much whitespace between label and value in doc info */
#identifiers dd {
  margin-left: 1em;
}

/* Give floating toc a background color (needed when it's a div inside section */
#toc {
  background-color: white;
}

/* Make the collapsed ToC header render white on gray also when it's a link */
@media screen and (max-width: 1023px) {
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
}

/* Give the bottom of the ToC some whitespace */
@media screen and (min-width: 1024px) {
  #toc {
    padding: 0 0 1em 1em;
  }
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* prevent monospace from becoming overly large */
tt, code, pre {
  font-size: 95%;
}

/* Fix the height/width aspect for ascii art*/
.sourcecode pre,
.art-text pre {
  line-height: 1.12;
}


/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin-right: 0.5em;
}

/* Fix the dl styling to match the RFC 7992 attributes */
dl > dt,
dl.dlParallel > dt {
  float: left;
  margin-right: 1em;
}
dl.dlNewline > dt {
  float: none;
}

/* Provide styling for table cell text alignment */
table td.text-left,
table th.text-left {
  text-align: left;
}
table td.text-center,
table th.text-center {
  text-align: center;
}
table td.text-right,
table th.text-right {
  text-align: right;
}

/* Make the alternative author contact information look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 30em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Provide table alignment support.  We can't use the alignX classes above
   since they do unwanted things with caption and other styling. */
table.right {
 margin-left: auto;
 margin-right: 0;
}
table.center {
 margin-left: auto;
 margin-right: auto;
}
table.left {
 margin-left: 0;
 margin-right: auto;
}

/* Give the table caption label the same styling as the figcaption */
caption a[href] {
  color: #222;
}

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  .vcard {
    page-break-inside: avoid;
  }

}
/* Tweak the bcp14 keyword presentation */
.bcp14 {
  font-variant: small-caps;
  font-weight: bold;
  font-size: 0.9em;
}
/* Tweak the invisible space above H* in order not to overlay links in text above */
 h2 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 31px;
 }
 h3 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
 h4 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
/* Float artwork pilcrow to the right */
@media screen {
  .artwork a.pilcrow {
    display: block;
    line-height: 0.7;
    margin-top: 0.15em;
  }
}
/* Make pilcrows on dd visible */
@media screen {
  dd:hover > a.pilcrow {
    visibility: visible;
  }
}
/* Make the placement of figcaption match that of a table's caption
   by removing the figure's added bottom margin */
.alignLeft.art-text,
.alignCenter.art-text,
.alignRight.art-text {
   margin-bottom: 0;
}
.alignLeft,
.alignCenter,
.alignRight {
  margin: 1em 0 0 0;
}
/* In print, the pilcrow won't show on hover, so prevent it from taking up space,
   possibly even requiring a new line */
@media print {
  a.pilcrow {
    display: none;
  }
}
/* Styling for the external metadata */
div#external-metadata {
  background-color: #eee;
  padding: 0.5em;
  margin-bottom: 0.5em;
  display: none;
}
div#internal-metadata {
  padding: 0.5em;                       /* to match the external-metadata padding */
}
/* Styling for title RFC Number */
h1#rfcnum {
  clear: both;
  margin: 0 0 -1em;
  padding: 1em 0 0 0;
}
/* Make .olPercent look the same as <ol><li> */
dl.olPercent > dd {
  margin-bottom: 0.25em;
  min-height: initial;
}
/* Give aside some styling to set it apart */
aside {
  border-left: 1px solid #ddd;
  margin: 1em 0 1em 2em;
  padding: 0.2em 2em;
}
aside > dl,
aside > ol,
aside > ul,
aside > table,
aside > p {
  margin-bottom: 0.5em;
}
/* Additional page break settings */
@media print {
  figcaption, table caption {
    page-break-before: avoid;
  }
}
/* Font size adjustments for print */
@media print {
  body  { font-size: 10pt;      line-height: normal; max-width: 96%; }
  h1    { font-size: 1.72em;    padding-top: 1.5em; } /* 1*1.2*1.2*1.2 */
  h2    { font-size: 1.44em;    padding-top: 1.5em; } /* 1*1.2*1.2 */
  h3    { font-size: 1.2em;     padding-top: 1.5em; } /* 1*1.2 */
  h4    { font-size: 1em;       padding-top: 1.5em; }
  h5, h6 { font-size: 1em;      margin: initial; padding: 0.5em 0 0.3em; }
}
/* Sourcecode margin in print, when there's no pilcrow */
@media print {
  .artwork,
  .artwork > pre,
  .sourcecode {
    margin-bottom: 1em;
  }
}
/* Avoid narrow tables forcing too narrow table captions, which may render badly */
table {
  min-width: 20em;
}
/* ol type a */
ol.type-a { list-style-type: lower-alpha; }
ol.type-A { list-style-type: upper-alpha; }
ol.type-i { list-style-type: lower-roman; }
ol.type-I { list-style-type: lower-roman; }
/* Apply the print table and row borders in general, on request from the RPC,
and increase the contrast between border and odd row background slightly */
table {
  border: 1px solid #ddd;
}
td {
  border-top: 1px solid #ddd;
}
tr {
  break-inside: avoid;
}
tr:nth-child(2n+1) > td {
  background-color: #f8f8f8;
}
/* Use style rules to govern display of the TOC. */
@media screen and (max-width: 1023px) {
  #toc nav { display: none; }
  #toc.active nav { display: block; }
}
/* Add support for keepWithNext */
.keepWithNext {
  break-after: avoid-page;
  break-after: avoid-page;
}
/* Add support for keepWithPrevious */
.keepWithPrevious {
  break-before: avoid-page;
}
/* Change the approach to avoiding breaks inside artwork etc. */
figure, pre, table, .artwork, .sourcecode  {
  break-before: auto;
  break-after: auto;
}
/* Avoid breaks between <dt> and <dd> */
dl {
  break-before: auto;
  break-inside: auto;
}
dt {
  break-before: auto;
  break-after: avoid-page;
}
dd {
  break-before: avoid-page;
  break-after: auto;
  orphans: 3;
  widows: 3
}
span.break, dd.break {
  margin-bottom: 0;
  min-height: 0;
  break-before: auto;
  break-inside: auto;
  break-after: auto;
}
/* Undo break-before ToC */
@media print {
  #toc {
    break-before: auto;
  }
}
/* Text in compact lists should not get extra bottom margin space,
   since that would makes the list not compact */
ul.compact p, .ulCompact p,
ol.compact p, .olCompact p {
 margin: 0;
}
/* But the list as a whole needs the extra space at the end */
section ul.compact,
section .ulCompact,
section ol.compact,
section .olCompact {
  margin-bottom: 1em;                    /* same as p not within ul.compact etc. */
}
/* The tt and code background above interferes with for instance table cell
   backgrounds.  Changed to something a bit more selective. */
tt, code {
  background-color: transparent;
}
p tt, p code, li tt, li code {
  background-color: #f8f8f8;
}
/* Tweak the pre margin -- 0px doesn't come out well */
pre {
   margin-top: 0.5px;
}
/* Tweak the compact list text */
ul.compact, .ulCompact,
ol.compact, .olCompact,
dl.compact, .dlCompact {
  line-height: normal;
}
/* Don't add top margin for nested lists */
li > ul, li > ol, li > dl,
dd > ul, dd > ol, dd > dl,
dl > dd > dl {
  margin-top: initial;
}
/* Elements that should not be rendered on the same line as a <dt> */
/* This should match the element list in writer.text.TextWriter.render_dl() */
dd > div.artwork:first-child,
dd > aside:first-child,
dd > figure:first-child,
dd > ol:first-child,
dd > div.sourcecode:first-child,
dd > table:first-child,
dd > ul:first-child {
  clear: left;
}
/* fix for weird browser behaviour when <dd/> is empty */
dt+dd:empty::before{
  content: "\00a0";
}
/* Make paragraph spacing inside <li> smaller than in body text, to fit better within the list */
li > p {
  margin-bottom: 0.5em
}
/* Don't let p margin spill out from inside list items */
li > p:last-of-type:only-child {
  margin-bottom: 0;
}
</style>
<link href="flac-doc_files/rfc-local.css" rel="stylesheet" type="text/css">
<script type="application/javascript">async function addMetadata(){try{const e=document.styleSheets[0].cssRules;for(let t=0;t<e.length;t++)if(/#identifiers/.exec(e[t].selectorText)){const a=e[t].cssText.replace("#identifiers","#external-updates");document.styleSheets[0].insertRule(a,document.styleSheets[0].cssRules.length)}}catch(e){console.log(e)}const e=document.getElementById("external-metadata");if(e)try{var t,a="",o=function(e){const t=document.getElementsByTagName("meta");for(let a=0;a<t.length;a++)if(t[a].getAttribute("name")===e)return t[a].getAttribute("content");return""}("rfc.number");if(o){t="https://www.rfc-editor.org/rfc/rfc"+o+".json";try{const e=await fetch(t);a=await e.json()}catch(e){t=document.URL.indexOf("html")>=0?document.URL.replace(/html$/,"json"):document.URL+".json";const o=await fetch(t);a=await o.json()}}if(!a)return;e.style.display="block";const s="",d="https://datatracker.ietf.org/doc",n="https://datatracker.ietf.org/ipr/search",c="https://www.rfc-editor.org/info",l=a.doc_id.toLowerCase(),i=a.doc_id.slice(0,3).toLowerCase(),f=a.doc_id.slice(3).replace(/^0+/,""),u={status:"Status",obsoletes:"Obsoletes",obsoleted_by:"Obsoleted By",updates:"Updates",updated_by:"Updated By",see_also:"See Also",errata_url:"Errata"};let h="<dl style='overflow:hidden' id='external-updates'>";["status","obsoletes","obsoleted_by","updates","updated_by","see_also","errata_url"].forEach(e=>{if("status"==e){a[e]=a[e].toLowerCase();var t=a[e].split(" "),o=t.length,w="",p=1;for(let e=0;e<o;e++)p<o?w=w+r(t[e])+" ":w+=r(t[e]),p++;a[e]=w}else if("obsoletes"==e||"obsoleted_by"==e||"updates"==e||"updated_by"==e){var g,m="",b=1;g=a[e].length;for(let t=0;t<g;t++)a[e][t]&&(a[e][t]=String(a[e][t]).toLowerCase(),m=b<g?m+"<a href='"+s+"/rfc/".concat(a[e][t])+"'>"+a[e][t].slice(3)+"</a>, ":m+"<a href='"+s+"/rfc/".concat(a[e][t])+"'>"+a[e][t].slice(3)+"</a>",b++);a[e]=m}else if("see_also"==e){var y,L="",C=1;y=a[e].length;for(let t=0;t<y;t++)if(a[e][t]){a[e][t]=String(a[e][t]);var _=a[e][t].slice(0,3),v=a[e][t].slice(3).replace(/^0+/,"");L=C<y?"RFC"!=_?L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+_+" "+v+"</a>, ":L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+v+"</a>, ":"RFC"!=_?L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+_+" "+v+"</a>":L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+v+"</a>",C++}a[e]=L}else if("errata_url"==e){var R="";R=a[e]?R+"<a href='"+a[e]+"'>Errata exist</a> | <a href='"+d+"/"+l+"'>Datatracker</a>| <a href='"+n+"/?"+i+"="+f+"&submit="+i+"'>IPR</a> | <a href='"+c+"/"+l+"'>Info page</a>":"<a href='"+d+"/"+l+"'>Datatracker</a> | <a href='"+n+"/?"+i+"="+f+"&submit="+i+"'>IPR</a> | <a href='"+c+"/"+l+"'>Info page</a>",a[e]=R}""!=a[e]?"Errata"==u[e]?h+=`<dt>More info:</dt><dd>${a[e]}</dd>`:h+=`<dt>${u[e]}:</dt><dd>${a[e]}</dd>`:"Errata"==u[e]&&(h+=`<dt>More info:</dt><dd>${a[e]}</dd>`)}),h+="</dl>",e.innerHTML=h}catch(e){console.log(e)}else console.log("Could not locate metadata <div> element");function r(e){return e.charAt(0).toUpperCase()+e.slice(1)}}window.removeEventListener("load",addMetadata),window.addEventListener("load",addMetadata);</script>
</head>
<body class="xml2rfc">
<script src="flac-doc_files/metadata.min.js"></script>
<table class="ears">
<thead><tr>
<td class="left">Internet-Draft</td>
<td class="center">FLAC</td>
<td class="right">January 2024</td>
</tr></thead>
<tfoot><tr>
<td class="left">van Beurden &amp; Weaver</td>
<td class="center">Expires 17 July 2024</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-workgroup">Workgroup:</dt>
<dd class="workgroup">cellar</dd>
<dt class="label-internet-draft">Internet-Draft:</dt>
<dd class="internet-draft">draft-ietf-cellar-flac-14</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2024-01-14" class="published">14 January 2024</time>
    </dd>
<dt class="label-intended-status">Intended Status:</dt>
<dd class="intended-status">Standards Track</dd>
<dt class="label-expires">Expires:</dt>
<dd class="expires"><time datetime="2024-07-17">17 July 2024</time></dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">M.Q.C. van Beurden</div>
</div>
<div class="author">
      <div class="author-name">A. Weaver</div>
</div>
</dd>
</dl>
</div>
<h1 id="title">Free Lossless Audio Codec</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">This document defines the Free Lossless Audio
 Codec (FLAC) format and its streamable subset. FLAC is designed to 
reduce the amount of computer storage space needed to store digital 
audio signals without losing information in doing so (i.e., lossless). 
FLAC is free in the sense that its specification is open and its 
reference implementation is open-source. Compared to other lossless 
(audio) coding formats, FLAC is a format with low complexity and can be 
coded to and from with little computing resources. Decoding of FLAC has 
seen many independent implementations on many different platforms, and 
both encoding and decoding can be implemented without needing 
floating-point arithmetic.<a href="#section-abstract-1" class="pilcrow">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a href="#name-status-of-this-memo" class="section-name selfRef">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
        This Internet-Draft is submitted in full conformance with the
        provisions of BCP 78 and BCP 79.<a href="#section-boilerplate.1-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-2">
        Internet-Drafts are working documents of the Internet Engineering Task
        Force (IETF). Note that other groups may also distribute working
        documents as Internet-Drafts. The list of current Internet-Drafts is
        at <span><a href="https://datatracker.ietf.org/drafts/current/">https://datatracker.ietf.org/drafts/current/</a></span>.<a href="#section-boilerplate.1-2" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-3">
        Internet-Drafts are draft documents valid for a maximum of six months
        and may be updated, replaced, or obsoleted by other documents at any
        time. It is inappropriate to use Internet-Drafts as reference
        material or to cite them other than as "work in progress."<a href="#section-boilerplate.1-3" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-4">
        This Internet-Draft will expire on 17 July 2024.<a href="#section-boilerplate.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a href="#name-copyright-notice" class="section-name selfRef">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2024 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Revised BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Revised BSD License.<a href="#section-boilerplate.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents">
<a href="#name-table-of-contents" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1" class="keepWithNext"><a href="#section-1" class="auto internal xref">1</a>.&nbsp;&nbsp;<a href="#name-introduction" class="internal xref">Introduction</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1" class="keepWithNext"><a href="#section-2" class="auto internal xref">2</a>.&nbsp;&nbsp;<a href="#name-notation-and-conventions" class="internal xref">Notation and Conventions</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1" class="keepWithNext"><a href="#section-3" class="auto internal xref">3</a>.&nbsp;&nbsp;<a href="#name-definitions" class="internal xref">Definitions</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="auto internal xref">4</a>.&nbsp;&nbsp;<a href="#name-conceptual-overview" class="internal xref">Conceptual overview</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.1">
                <p id="section-toc.1-1.4.2.1.1"><a href="#section-4.1" class="auto internal xref">4.1</a>.&nbsp;&nbsp;<a href="#name-blocking" class="internal xref">Blocking</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2">
                <p id="section-toc.1-1.4.2.2.1"><a href="#section-4.2" class="auto internal xref">4.2</a>.&nbsp;&nbsp;<a href="#name-interchannel-decorrelation" class="internal xref">Interchannel Decorrelation</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.3">
                <p id="section-toc.1-1.4.2.3.1"><a href="#section-4.3" class="auto internal xref">4.3</a>.&nbsp;&nbsp;<a href="#name-prediction" class="internal xref">Prediction</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.4">
                <p id="section-toc.1-1.4.2.4.1"><a href="#section-4.4" class="auto internal xref">4.4</a>.&nbsp;&nbsp;<a href="#name-residual-coding" class="internal xref">Residual Coding</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="auto internal xref">5</a>.&nbsp;&nbsp;<a href="#name-format-principles" class="internal xref">Format principles</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-6" class="auto internal xref">6</a>.&nbsp;&nbsp;<a href="#name-format-layout-overview" class="internal xref">Format layout overview</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#section-7" class="auto internal xref">7</a>.&nbsp;&nbsp;<a href="#name-streamable-subset" class="internal xref">Streamable subset</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a href="#section-8" class="auto internal xref">8</a>.&nbsp;&nbsp;<a href="#name-file-level-metadata" class="internal xref">File-level metadata</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.1">
                <p id="section-toc.1-1.8.2.1.1"><a href="#section-8.1" class="auto internal xref">8.1</a>.&nbsp;&nbsp;<a href="#name-metadata-block-header" class="internal xref">Metadata block header</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.2">
                <p id="section-toc.1-1.8.2.2.1"><a href="#section-8.2" class="auto internal xref">8.2</a>.&nbsp;&nbsp;<a href="#name-streaminfo" class="internal xref">Streaminfo</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.3">
                <p id="section-toc.1-1.8.2.3.1"><a href="#section-8.3" class="auto internal xref">8.3</a>.&nbsp;&nbsp;<a href="#name-padding" class="internal xref">Padding</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.4">
                <p id="section-toc.1-1.8.2.4.1"><a href="#section-8.4" class="auto internal xref">8.4</a>.&nbsp;&nbsp;<a href="#name-application" class="internal xref">Application</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.5">
                <p id="section-toc.1-1.8.2.5.1"><a href="#section-8.5" class="auto internal xref">8.5</a>.&nbsp;&nbsp;<a href="#name-seektable" class="internal xref">Seektable</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.5.2.1">
                    <p id="section-toc.1-1.8.2.5.2.1.1"><a href="#section-8.5.1" class="auto internal xref">8.5.1</a>.&nbsp;&nbsp;<a href="#name-seekpoint" class="internal xref">Seekpoint</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.6">
                <p id="section-toc.1-1.8.2.6.1"><a href="#section-8.6" class="auto internal xref">8.6</a>.&nbsp;&nbsp;<a href="#name-vorbis-comment" class="internal xref">Vorbis comment</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.6.2.1">
                    <p id="section-toc.1-1.8.2.6.2.1.1"><a href="#section-8.6.1" class="auto internal xref">8.6.1</a>.&nbsp;&nbsp;<a href="#name-standard-field-names" class="internal xref">Standard field names</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.6.2.2">
                    <p id="section-toc.1-1.8.2.6.2.2.1"><a href="#section-8.6.2" class="auto internal xref">8.6.2</a>.&nbsp;&nbsp;<a href="#name-channel-mask" class="internal xref">Channel mask</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.7">
                <p id="section-toc.1-1.8.2.7.1"><a href="#section-8.7" class="auto internal xref">8.7</a>.&nbsp;&nbsp;<a href="#name-cuesheet" class="internal xref">Cuesheet</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.7.2.1">
                    <p id="section-toc.1-1.8.2.7.2.1.1"><a href="#section-8.7.1" class="auto internal xref">8.7.1</a>.&nbsp;&nbsp;<a href="#name-cuesheet-track" class="internal xref">Cuesheet track</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.8">
                <p id="section-toc.1-1.8.2.8.1"><a href="#section-8.8" class="auto internal xref">8.8</a>.&nbsp;&nbsp;<a href="#name-picture" class="internal xref">Picture</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a href="#section-9" class="auto internal xref">9</a>.&nbsp;&nbsp;<a href="#name-frame-structure" class="internal xref">Frame structure</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.1">
                <p id="section-toc.1-1.9.2.1.1"><a href="#section-9.1" class="auto internal xref">9.1</a>.&nbsp;&nbsp;<a href="#name-frame-header" class="internal xref">Frame header</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.1.2.1">
                    <p id="section-toc.1-1.9.2.1.2.1.1"><a href="#section-9.1.1" class="auto internal xref">9.1.1</a>.&nbsp;&nbsp;<a href="#name-block-size-bits" class="internal xref">Block size bits</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.1.2.2">
                    <p id="section-toc.1-1.9.2.1.2.2.1"><a href="#section-9.1.2" class="auto internal xref">9.1.2</a>.&nbsp;&nbsp;<a href="#name-sample-rate-bits" class="internal xref">Sample rate bits</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.1.2.3">
                    <p id="section-toc.1-1.9.2.1.2.3.1"><a href="#section-9.1.3" class="auto internal xref">9.1.3</a>.&nbsp;&nbsp;<a href="#name-channels-bits" class="internal xref">Channels bits</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.1.2.4">
                    <p id="section-toc.1-1.9.2.1.2.4.1"><a href="#section-9.1.4" class="auto internal xref">9.1.4</a>.&nbsp;&nbsp;<a href="#name-bit-depth-bits" class="internal xref">Bit depth bits</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.1.2.5">
                    <p id="section-toc.1-1.9.2.1.2.5.1"><a href="#section-9.1.5" class="auto internal xref">9.1.5</a>.&nbsp;&nbsp;<a href="#name-coded-number" class="internal xref">Coded number</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.1.2.6">
                    <p id="section-toc.1-1.9.2.1.2.6.1"><a href="#section-9.1.6" class="auto internal xref">9.1.6</a>.&nbsp;&nbsp;<a href="#name-uncommon-block-size" class="internal xref">Uncommon block size</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.1.2.7">
                    <p id="section-toc.1-1.9.2.1.2.7.1"><a href="#section-9.1.7" class="auto internal xref">9.1.7</a>.&nbsp;&nbsp;<a href="#name-uncommon-sample-rate" class="internal xref">Uncommon sample rate</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.1.2.8">
                    <p id="section-toc.1-1.9.2.1.2.8.1"><a href="#section-9.1.8" class="auto internal xref">9.1.8</a>.&nbsp;&nbsp;<a href="#name-frame-header-crc" class="internal xref">Frame header CRC</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.2">
                <p id="section-toc.1-1.9.2.2.1"><a href="#section-9.2" class="auto internal xref">9.2</a>.&nbsp;&nbsp;<a href="#name-subframes" class="internal xref">Subframes</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.2.2.1">
                    <p id="section-toc.1-1.9.2.2.2.1.1"><a href="#section-9.2.1" class="auto internal xref">9.2.1</a>.&nbsp;&nbsp;<a href="#name-subframe-header" class="internal xref">Subframe header</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.2.2.2">
                    <p id="section-toc.1-1.9.2.2.2.2.1"><a href="#section-9.2.2" class="auto internal xref">9.2.2</a>.&nbsp;&nbsp;<a href="#name-wasted-bits-per-sample" class="internal xref">Wasted bits per sample</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.2.2.3">
                    <p id="section-toc.1-1.9.2.2.2.3.1"><a href="#section-9.2.3" class="auto internal xref">9.2.3</a>.&nbsp;&nbsp;<a href="#name-constant-subframe" class="internal xref">Constant subframe</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.2.2.4">
                    <p id="section-toc.1-1.9.2.2.2.4.1"><a href="#section-9.2.4" class="auto internal xref">9.2.4</a>.&nbsp;&nbsp;<a href="#name-verbatim-subframe" class="internal xref">Verbatim subframe</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.2.2.5">
                    <p id="section-toc.1-1.9.2.2.2.5.1"><a href="#section-9.2.5" class="auto internal xref">9.2.5</a>.&nbsp;&nbsp;<a href="#name-fixed-predictor-subframe" class="internal xref">Fixed predictor subframe</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.2.2.6">
                    <p id="section-toc.1-1.9.2.2.2.6.1"><a href="#section-9.2.6" class="auto internal xref">9.2.6</a>.&nbsp;&nbsp;<a href="#name-linear-predictor-subframe" class="internal xref">Linear predictor subframe</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.2.2.7">
                    <p id="section-toc.1-1.9.2.2.2.7.1"><a href="#section-9.2.7" class="auto internal xref">9.2.7</a>.&nbsp;&nbsp;<a href="#name-coded-residual" class="internal xref">Coded residual</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.3">
                <p id="section-toc.1-1.9.2.3.1"><a href="#section-9.3" class="auto internal xref">9.3</a>.&nbsp;&nbsp;<a href="#name-frame-footer" class="internal xref">Frame footer</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a href="#section-10" class="auto internal xref">10</a>.&nbsp;<a href="#name-container-mappings" class="internal xref">Container mappings</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.1">
                <p id="section-toc.1-1.10.2.1.1"><a href="#section-10.1" class="auto internal xref">10.1</a>.&nbsp;&nbsp;<a href="#name-ogg-mapping" class="internal xref">Ogg mapping</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.2">
                <p id="section-toc.1-1.10.2.2.1"><a href="#section-10.2" class="auto internal xref">10.2</a>.&nbsp;&nbsp;<a href="#name-matroska-mapping" class="internal xref">Matroska mapping</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.3">
                <p id="section-toc.1-1.10.2.3.1"><a href="#section-10.3" class="auto internal xref">10.3</a>.&nbsp;&nbsp;<a href="#name-iso-base-media-file-format-" class="internal xref">ISO Base Media File Format (MP4) mapping</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11">
            <p id="section-toc.1-1.11.1"><a href="#section-11" class="auto internal xref">11</a>.&nbsp;<a href="#name-implementation-status" class="internal xref">Implementation status</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12">
            <p id="section-toc.1-1.12.1"><a href="#section-12" class="auto internal xref">12</a>.&nbsp;<a href="#name-security-considerations" class="internal xref">Security Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13">
            <p id="section-toc.1-1.13.1"><a href="#section-13" class="auto internal xref">13</a>.&nbsp;<a href="#name-iana-considerations" class="internal xref">IANA Considerations</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13.2.1">
                <p id="section-toc.1-1.13.2.1.1"><a href="#section-13.1" class="auto internal xref">13.1</a>.&nbsp;&nbsp;<a href="#name-media-type-registration" class="internal xref">Media type registration</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13.2.2">
                <p id="section-toc.1-1.13.2.2.1"><a href="#section-13.2" class="auto internal xref">13.2</a>.&nbsp;&nbsp;<a href="#name-application-id-registry" class="internal xref">Application ID Registry</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.14">
            <p id="section-toc.1-1.14.1"><a href="#section-14" class="auto internal xref">14</a>.&nbsp;<a href="#name-acknowledgments" class="internal xref">Acknowledgments</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.15">
            <p id="section-toc.1-1.15.1"><a href="#section-15" class="auto internal xref">15</a>.&nbsp;<a href="#name-references" class="internal xref">References</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.15.2.1">
                <p id="section-toc.1-1.15.2.1.1"><a href="#section-15.1" class="auto internal xref">15.1</a>.&nbsp;&nbsp;<a href="#name-normative-references" class="internal xref">Normative References</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.15.2.2">
                <p id="section-toc.1-1.15.2.2.1"><a href="#section-15.2" class="auto internal xref">15.2</a>.&nbsp;&nbsp;<a href="#name-informative-references" class="internal xref">Informative References</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.16">
            <p id="section-toc.1-1.16.1"><a href="#appendix-A" class="auto internal xref">Appendix A</a>.&nbsp;&nbsp;<a href="#name-numerical-considerations" class="internal xref">Numerical considerations</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.16.2.1">
                <p id="section-toc.1-1.16.2.1.1"><a href="#appendix-A.1" class="auto internal xref">A.1</a>.&nbsp;&nbsp;<a href="#name-determining-the-necessary-d" class="internal xref">Determining the necessary data type size</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.16.2.2">
                <p id="section-toc.1-1.16.2.2.1"><a href="#appendix-A.2" class="auto internal xref">A.2</a>.&nbsp;&nbsp;<a href="#name-stereo-decorrelation" class="internal xref">Stereo decorrelation</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.16.2.3">
                <p id="section-toc.1-1.16.2.3.1"><a href="#appendix-A.3" class="auto internal xref">A.3</a>.&nbsp;&nbsp;<a href="#name-prediction-2" class="internal xref">Prediction</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.16.2.4">
                <p id="section-toc.1-1.16.2.4.1"><a href="#appendix-A.4" class="auto internal xref">A.4</a>.&nbsp;&nbsp;<a href="#name-residual" class="internal xref">Residual</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.16.2.5">
                <p id="section-toc.1-1.16.2.5.1"><a href="#appendix-A.5" class="auto internal xref">A.5</a>.&nbsp;&nbsp;<a href="#name-rice-coding" class="internal xref">Rice coding</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.17">
            <p id="section-toc.1-1.17.1"><a href="#appendix-B" class="auto internal xref">Appendix B</a>.&nbsp;&nbsp;<a href="#name-past-format-changes" class="internal xref">Past format changes</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.17.2.1">
                <p id="section-toc.1-1.17.2.1.1"><a href="#appendix-B.1" class="auto internal xref">B.1</a>.&nbsp;&nbsp;<a href="#name-addition-of-blocking-strate" class="internal xref">Addition of blocking strategy bit</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.17.2.2">
                <p id="section-toc.1-1.17.2.2.1"><a href="#appendix-B.2" class="auto internal xref">B.2</a>.&nbsp;&nbsp;<a href="#name-restriction-of-encoded-resi" class="internal xref">Restriction of encoded residual samples</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.17.2.3">
                <p id="section-toc.1-1.17.2.3.1"><a href="#appendix-B.3" class="auto internal xref">B.3</a>.&nbsp;&nbsp;<a href="#name-addition-of-5-bit-rice-para" class="internal xref">Addition of 5-bit Rice parameters</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.17.2.4">
                <p id="section-toc.1-1.17.2.4.1"><a href="#appendix-B.4" class="auto internal xref">B.4</a>.&nbsp;&nbsp;<a href="#name-restriction-of-lpc-shift-to" class="internal xref">Restriction of LPC shift to non-negative values</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.18">
            <p id="section-toc.1-1.18.1"><a href="#appendix-C" class="auto internal xref">Appendix C</a>.&nbsp;&nbsp;<a href="#name-interoperability-considerat" class="internal xref">Interoperability considerations</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.18.2.1">
                <p id="section-toc.1-1.18.2.1.1"><a href="#appendix-C.1" class="auto internal xref">C.1</a>.&nbsp;&nbsp;<a href="#name-features-outside-of-the-str" class="internal xref">Features outside of the streamable subset</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.18.2.2">
                <p id="section-toc.1-1.18.2.2.1"><a href="#appendix-C.2" class="auto internal xref">C.2</a>.&nbsp;&nbsp;<a href="#name-variable-block-size" class="internal xref">Variable block size</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.18.2.3">
                <p id="section-toc.1-1.18.2.3.1"><a href="#appendix-C.3" class="auto internal xref">C.3</a>.&nbsp;&nbsp;<a href="#name-5-bit-rice-parameter" class="internal xref">5-bit Rice parameter</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.18.2.4">
                <p id="section-toc.1-1.18.2.4.1"><a href="#appendix-C.4" class="auto internal xref">C.4</a>.&nbsp;&nbsp;<a href="#name-rice-escape-code" class="internal xref">Rice escape code</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.18.2.5">
                <p id="section-toc.1-1.18.2.5.1"><a href="#appendix-C.5" class="auto internal xref">C.5</a>.&nbsp;&nbsp;<a href="#name-uncommon-block-size-2" class="internal xref">Uncommon block size</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.18.2.6">
                <p id="section-toc.1-1.18.2.6.1"><a href="#appendix-C.6" class="auto internal xref">C.6</a>.&nbsp;&nbsp;<a href="#name-uncommon-bit-depth" class="internal xref">Uncommon bit depth</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.18.2.7">
                <p id="section-toc.1-1.18.2.7.1"><a href="#appendix-C.7" class="auto internal xref">C.7</a>.&nbsp;&nbsp;<a href="#name-multi-channel-audio-and-unc" class="internal xref">Multi-channel audio and uncommon sample rates</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.18.2.8">
                <p id="section-toc.1-1.18.2.8.1"><a href="#appendix-C.8" class="auto internal xref">C.8</a>.&nbsp;&nbsp;<a href="#name-changing-audio-properties-m" class="internal xref">Changing audio properties mid-stream</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.19">
            <p id="section-toc.1-1.19.1"><a href="#appendix-D" class="auto internal xref">Appendix D</a>.&nbsp;&nbsp;<a href="#name-examples" class="internal xref">Examples</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.19.2.1">
                <p id="section-toc.1-1.19.2.1.1"><a href="#appendix-D.1" class="auto internal xref">D.1</a>.&nbsp;&nbsp;<a href="#name-decoding-example-1" class="internal xref">Decoding example 1</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.19.2.1.2.1">
                    <p id="section-toc.1-1.19.2.1.2.1.1"><a href="#appendix-D.1.1" class="auto internal xref">D.1.1</a>.&nbsp;&nbsp;<a href="#name-example-file-1-in-hexadecim" class="internal xref">Example file 1 in hexadecimal representation</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.19.2.1.2.2">
                    <p id="section-toc.1-1.19.2.1.2.2.1"><a href="#appendix-D.1.2" class="auto internal xref">D.1.2</a>.&nbsp;&nbsp;<a href="#name-example-file-1-in-binary-re" class="internal xref">Example file 1 in binary representation</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.19.2.1.2.3">
                    <p id="section-toc.1-1.19.2.1.2.3.1"><a href="#appendix-D.1.3" class="auto internal xref">D.1.3</a>.&nbsp;&nbsp;<a href="#name-signature-and-streaminfo" class="internal xref">Signature and streaminfo</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.19.2.1.2.4">
                    <p id="section-toc.1-1.19.2.1.2.4.1"><a href="#appendix-D.1.4" class="auto internal xref">D.1.4</a>.&nbsp;&nbsp;<a href="#name-audio-frames" class="internal xref">Audio frames</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.19.2.2">
                <p id="section-toc.1-1.19.2.2.1"><a href="#appendix-D.2" class="auto internal xref">D.2</a>.&nbsp;&nbsp;<a href="#name-decoding-example-2" class="internal xref">Decoding example 2</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.19.2.2.2.1">
                    <p id="section-toc.1-1.19.2.2.2.1.1"><a href="#appendix-D.2.1" class="auto internal xref">D.2.1</a>.&nbsp;&nbsp;<a href="#name-example-file-2-in-hexadecim" class="internal xref">Example file 2 in hexadecimal representation</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.19.2.2.2.2">
                    <p id="section-toc.1-1.19.2.2.2.2.1"><a href="#appendix-D.2.2" class="auto internal xref">D.2.2</a>.&nbsp;&nbsp;<a href="#name-example-file-2-in-binary-re" class="internal xref">Example file 2 in binary representation (only audio frames)</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.19.2.2.2.3">
                    <p id="section-toc.1-1.19.2.2.2.3.1"><a href="#appendix-D.2.3" class="auto internal xref">D.2.3</a>.&nbsp;&nbsp;<a href="#name-streaminfo-metadata-block" class="internal xref">Streaminfo metadata block</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.19.2.2.2.4">
                    <p id="section-toc.1-1.19.2.2.2.4.1"><a href="#appendix-D.2.4" class="auto internal xref">D.2.4</a>.&nbsp;&nbsp;<a href="#name-seektable-2" class="internal xref">Seektable</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.19.2.2.2.5">
                    <p id="section-toc.1-1.19.2.2.2.5.1"><a href="#appendix-D.2.5" class="auto internal xref">D.2.5</a>.&nbsp;&nbsp;<a href="#name-vorbis-comment-2" class="internal xref">Vorbis comment</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.19.2.2.2.6">
                    <p id="section-toc.1-1.19.2.2.2.6.1"><a href="#appendix-D.2.6" class="auto internal xref">D.2.6</a>.&nbsp;&nbsp;<a href="#name-padding-2" class="internal xref">Padding</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.19.2.2.2.7">
                    <p id="section-toc.1-1.19.2.2.2.7.1"><a href="#appendix-D.2.7" class="auto internal xref">D.2.7</a>.&nbsp;&nbsp;<a href="#name-first-audio-frame" class="internal xref">First audio frame</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.19.2.2.2.8">
                    <p id="section-toc.1-1.19.2.2.2.8.1"><a href="#appendix-D.2.8" class="auto internal xref">D.2.8</a>.&nbsp;&nbsp;<a href="#name-second-audio-frame" class="internal xref">Second audio frame</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.19.2.2.2.9">
                    <p id="section-toc.1-1.19.2.2.2.9.1"><a href="#appendix-D.2.9" class="auto internal xref">D.2.9</a>.&nbsp;&nbsp;<a href="#name-md5-checksum-verification" class="internal xref">MD5 checksum verification</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.19.2.3">
                <p id="section-toc.1-1.19.2.3.1"><a href="#appendix-D.3" class="auto internal xref">D.3</a>.&nbsp;&nbsp;<a href="#name-decoding-example-3" class="internal xref">Decoding example 3</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.19.2.3.2.1">
                    <p id="section-toc.1-1.19.2.3.2.1.1"><a href="#appendix-D.3.1" class="auto internal xref">D.3.1</a>.&nbsp;&nbsp;<a href="#name-example-file-3-in-hexadecim" class="internal xref">Example file 3 in hexadecimal representation</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.19.2.3.2.2">
                    <p id="section-toc.1-1.19.2.3.2.2.1"><a href="#appendix-D.3.2" class="auto internal xref">D.3.2</a>.&nbsp;&nbsp;<a href="#name-example-file-3-in-binary-re" class="internal xref">Example file 3 in binary representation (only audio frame)</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.19.2.3.2.3">
                    <p id="section-toc.1-1.19.2.3.2.3.1"><a href="#appendix-D.3.3" class="auto internal xref">D.3.3</a>.&nbsp;&nbsp;<a href="#name-streaminfo-metadata-block-2" class="internal xref">Streaminfo metadata block</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.19.2.3.2.4">
                    <p id="section-toc.1-1.19.2.3.2.4.1"><a href="#appendix-D.3.4" class="auto internal xref">D.3.4</a>.&nbsp;&nbsp;<a href="#name-audio-frame" class="internal xref">Audio frame</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.20">
            <p id="section-toc.1-1.20.1"><a href="#appendix-E" class="auto internal xref"></a><a href="#name-authors-addresses" class="internal xref">Authors' Addresses</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<div id="introduction">
<section id="section-1">
      <h2 id="name-introduction">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction" class="section-name selfRef">Introduction</a>
      </h2>
<p id="section-1-1">This document defines the FLAC format and its 
streamable subset. FLAC files and streams can code for pulse-code 
modulated (PCM) audio with 1 to 8 channels, sample rates from 1 up to 
1048575 hertz and bit depths from 4 up to 32 bits. Most tools for coding
 to and decoding from the FLAC format have been optimized for CD-audio, 
which is PCM audio with 2 channels, a sample rate of 44.1 kHz, and a bit
 depth of 16 bits.<a href="#section-1-1" class="pilcrow">¶</a></p>
<p id="section-1-2">FLAC is able to achieve lossless compression because
 samples in audio signals tend to be highly correlated with their close 
neighbors. In contrast with general-purpose compressors, which often use
 dictionaries, do run-length coding, or exploit long-term repetition, 
FLAC removes redundancy solely in the very short term, looking back at 
at most 32 samples.<a href="#section-1-2" class="pilcrow">¶</a></p>
<p id="section-1-3">The coding methods provided by the FLAC format work 
best on PCM audio signals, of which the samples have a signed 
representation and are centered around zero. Audio signals in which 
samples have an unsigned representation must be transformed to a signed 
representation as described in this document in order to achieve 
reasonable compression. The FLAC format is not suited for compressing 
audio that is not PCM.<a href="#section-1-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="notation-and-conventions">
<section id="section-2">
      <h2 id="name-notation-and-conventions">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-notation-and-conventions" class="section-name selfRef">Notation and Conventions</a>
      </h2>
<p id="section-2-1">The key words "MUST", "MUST NOT", "REQUIRED", 
"SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT 
RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be 
interpreted as described in BCP 14 <span>[<a href="#RFC2119" class="cite xref">RFC2119</a>]</span> <span>[<a href="#RFC8174" class="cite xref">RFC8174</a>]</span> when, and only when, they appear in all capitals, as shown here.<a href="#section-2-1" class="pilcrow">¶</a></p>
<p id="section-2-2">Values expressed as <code>u(n)</code> represent unsigned big-endian integer using <code>n</code> bits. Values expressed as <code>s(n)</code> represent signed big-endian integer using <code>n</code> bits, signed two's complement. Where necessary <code>n</code> is expressed as an equation using <code>*</code> (multiplication), <code>/</code> (division), <code>+</code> (addition), or <code>-</code> (subtraction). An inclusive range of the number of bits expressed is represented with an ellipsis, such as <code>u(m...n)</code>.<a href="#section-2-2" class="pilcrow">¶</a></p>
<p id="section-2-3">While the FLAC format can store digital audio as 
well as other digital signals, this document uses terminology specific 
to digital audio. The use of more generic terminology was deemed less 
clear, so a reader interested in non-audio use of the FLAC format is 
expected to make the translation from audio-specific terms to more 
generic terminology.<a href="#section-2-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="definitions">
<section id="section-3">
      <h2 id="name-definitions">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-definitions" class="section-name selfRef">Definitions</a>
      </h2>
<ul class="normal">
<li class="normal" id="section-3-1.1">
          <p id="section-3-1.1.1"><strong>Lossless compression</strong>:
 reducing the amount of computer storage space needed to store data 
without needing to remove or irreversibly alter any of this data in 
doing so. In other words, decompressing losslessly compressed 
information returns exactly the original data.<a href="#section-3-1.1.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-3-1.2">
          <p id="section-3-1.2.1"><strong>Lossy compression</strong>: 
like lossless compression, but instead removing, irreversibly altering, 
or only approximating information for the purpose of further reducing 
the amount of computer storage space needed. In other words, 
decompressing lossy compressed information returns an approximation of 
the original data.<a href="#section-3-1.2.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-3-1.3">
          <p id="section-3-1.3.1"><strong>Block</strong>: A (short) section of linear pulse-code modulated audio with one or more channels.<a href="#section-3-1.3.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-3-1.4">
          <p id="section-3-1.4.1"><strong>Subblock</strong>: All samples
 within a corresponding block for one channel. One or more subblocks 
form a block, and all subblocks in a certain block contain the same 
number of samples.<a href="#section-3-1.4.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-3-1.5">
          <p id="section-3-1.5.1"><strong>Frame</strong>: A frame header, one or more subframes, and a frame footer. It encodes the contents of a corresponding block.<a href="#section-3-1.5.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-3-1.6">
          <p id="section-3-1.6.1"><strong>Subframe</strong>: An encoded 
subblock. All subframes within a frame code for the same number of 
samples. When interchannel decorrelation is used, a subframe can 
correspond to either the (per-sample) average of two subblocks or the 
(per-sample) difference between two subblocks, instead of to a subblock 
directly, see <a href="#interchannel-decorrelation" class="auto internal xref">Section 4.2</a>.<a href="#section-3-1.6.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-3-1.7">
          <p id="section-3-1.7.1"><strong>Interchannel samples</strong>:
 A sample count that applies to all channels. For example, one second of
 44.1 kHz audio has 44100 interchannel samples, meaning each channel has
 that number of samples.<a href="#section-3-1.7.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-3-1.8">
          <p id="section-3-1.8.1"><strong>Block size</strong>: The number of interchannel samples contained in a block or coded in a frame.<a href="#section-3-1.8.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-3-1.9">
          <p id="section-3-1.9.1"><strong>Bit depth</strong> or <strong>bits per sample</strong>:
 the number of bits used to contain each sample. This MUST be the same 
for all subblocks in a block but MAY be different for different 
subframes in a frame because of interchannel decorrelation. (See <a href="#interchannel-decorrelation" class="auto internal xref">Section 4.2</a> for details on interchannel decorrelation)<a href="#section-3-1.9.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-3-1.10">
          <p id="section-3-1.10.1"><strong>Predictor</strong>: a model 
used to predict samples in an audio signal based on past samples. FLAC 
uses such predictors to remove redundancy in a signal in order to be 
able to compress it.<a href="#section-3-1.10.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-3-1.11">
          <p id="section-3-1.11.1"><strong>Linear predictor</strong>: a predictor using linear prediction (see <span>[<a href="#LinearPrediction" class="cite xref">LinearPrediction</a>]</span>). This is also called <strong>linear predictive coding (LPC)</strong>.
 With a linear predictor, each prediction is a linear combination of 
past samples, hence the name. A linear predictor has a causal 
discrete-time finite impulse response (see <span>[<a href="#FIR" class="cite xref">FIR</a>]</span>).<a href="#section-3-1.11.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-3-1.12">
          <p id="section-3-1.12.1"><strong>Muxing</strong>: short for 
multiplexing, combining several streams or files into a single stream or
 file. In the context of this document, muxing more specifically refers 
to embedding a FLAC stream in a container as described in <a href="#container-mappings" class="auto internal xref">Section 10</a>.<a href="#section-3-1.12.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-3-1.13">
          <p id="section-3-1.13.1"><strong>Fixed predictor</strong>: a linear predictor in which the model parameters are the same across all FLAC files, and thus do not need to be stored.<a href="#section-3-1.13.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-3-1.14">
          <p id="section-3-1.14.1"><strong>Predictor order</strong>: the
 number of past samples that a predictor uses. For example, a 4th order 
predictor uses the 4 samples directly preceding a certain sample to 
predict it. In FLAC, samples used in a predictor are always consecutive,
 and are always the samples directly before the sample that is being 
predicted.<a href="#section-3-1.14.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-3-1.15">
          <p id="section-3-1.15.1"><strong>Residual</strong>: The audio 
signal that remains after a predictor has been subtracted from a 
subblock. If the predictor has been able to remove redundancy from the 
signal, the samples of the remaining signal (the <strong>residual samples</strong>) will have, on average, a smaller numerical value than the original signal.<a href="#section-3-1.15.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-3-1.16">
          <p id="section-3-1.16.1"><strong>Rice code</strong>: A variable-length code (see <span>[<a href="#VarLengthCode" class="cite xref">VarLengthCode</a>]</span>)
 that compresses data by making use of the observation that, after using
 an effective predictor, most residual samples are closer to zero than 
the original samples, while still allowing for a small part of the 
samples to be much larger.<a href="#section-3-1.16.1" class="pilcrow">¶</a></p>
</li>
      </ul>
</section>
</div>
<div id="conceptual-overview">
<section id="section-4">
      <h2 id="name-conceptual-overview">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-conceptual-overview" class="section-name selfRef">Conceptual overview</a>
      </h2>
<p id="section-4-1">Similar to many other audio coders, a FLAC file is 
encoded following the steps below. On decoding a FLAC file, these steps 
are undone in reverse order, i.e., from bottom to top.<a href="#section-4-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4-2.1">
          <p id="section-4-2.1.1"><strong>Blocking</strong> (see <a href="#blocking" class="auto internal xref">Section 4.1</a>). The input is split up into many contiguous blocks.<a href="#section-4-2.1.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-4-2.2">
          <p id="section-4-2.2.1"><strong>Interchannel Decorrelation</strong> (see <a href="#interchannel-decorrelation" class="auto internal xref">Section 4.2</a>).
 In the case of stereo streams, the FLAC format allows for transforming 
the left-right signal into a mid-side signal, a left-side signal or a 
side-right signal to remove redundancy between channels. Choosing 
between any of these transformations is done independently for each 
block.<a href="#section-4-2.2.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-4-2.3">
          <p id="section-4-2.3.1"><strong>Prediction</strong> (see <a href="#prediction" class="auto internal xref">Section 4.3</a>).
 To remove redundancy in a signal, a predictor is stored for each 
subblock or its transformation as formed in the previous step. A 
predictor consists of a simple mathematical description that can be 
used, as the name implies, to predict a certain sample from the samples 
that preceded it. As this prediction is rarely exact, the error of this 
prediction is passed on to the next stage. The predictor of each 
subblock is completely independent from other subblocks. Since the 
methods of prediction are known to both the encoder and decoder, only 
the parameters of the predictor need to be included in the compressed 
stream. If no usable predictor can be found for a certain subblock, the 
signal is stored uncompressed and the next stage is skipped.<a href="#section-4-2.3.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-4-2.4">
          <p id="section-4-2.4.1"><strong>Residual Coding</strong> (see <a href="#residual-coding" class="auto internal xref">Section 4.4</a>).
 As the predictor does not describe the signal exactly, the difference 
between the original signal and the predicted signal (called the error 
or residual signal) is coded losslessly. If the predictor is effective, 
the residual signal will require fewer bits per sample than the original
 signal. FLAC uses Rice coding, a subset of Golomb coding, with either 
4-bit or 5-bit parameters to code the residual signal.<a href="#section-4-2.4.1" class="pilcrow">¶</a></p>
</li>
      </ul>
<p id="section-4-3">In addition, FLAC specifies a metadata system (see <a href="#file-level-metadata" class="auto internal xref">Section 8</a>), which allows arbitrary information about the stream to be included at the beginning of the stream.<a href="#section-4-3" class="pilcrow">¶</a></p>
<div id="blocking">
<section id="section-4.1">
        <h3 id="name-blocking">
<a href="#section-4.1" class="section-number selfRef">4.1. </a><a href="#name-blocking" class="section-name selfRef">Blocking</a>
        </h3>
<p id="section-4.1-1">The block size used for audio data has a direct 
effect on the compression ratio. If the block size is too small, the 
resulting large number of frames means that a disproportionate amount of
 bytes will be spent on frame headers. If the block size is too large, 
the characteristics of the signal may vary so much that the encoder will
 be unable to find a good predictor. In order to simplify 
encoder/decoder design, FLAC imposes a minimum block size of 16 samples,
 except for the last block, and a maximum block size of 65535 samples. 
The last block is allowed to be smaller than 16 samples to be able to 
match the length of the encoded audio without using padding.<a href="#section-4.1-1" class="pilcrow">¶</a></p>
<p id="section-4.1-2">While the block size does not have to be constant 
in a FLAC file, it is often difficult to find the optimal arrangement of
 block sizes for maximum compression. Because of this, the FLAC format 
explicitly stores whether a file has a constant or a variable block size
 throughout the stream, and stores a block number instead of a sample 
number to slightly improve compression if a stream has a constant block 
size.<a href="#section-4.1-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="interchannel-decorrelation">
<section id="section-4.2">
        <h3 id="name-interchannel-decorrelation">
<a href="#section-4.2" class="section-number selfRef">4.2. </a><a href="#name-interchannel-decorrelation" class="section-name selfRef">Interchannel Decorrelation</a>
        </h3>
<p id="section-4.2-1">In many audio files, channels are correlated. The 
FLAC format can exploit this correlation in stereo files by not directly
 coding subblocks into subframes, but instead coding an average of all 
samples in both subblocks (a mid channel) or the difference between all 
samples in both subblocks (a side channel). The following combinations 
are possible:<a href="#section-4.2-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.2-2.1">
            <p id="section-4.2-2.1.1"><strong>Independent</strong>. All channels are coded independently. All non-stereo files MUST be encoded this way.<a href="#section-4.2-2.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-4.2-2.2">
            <p id="section-4.2-2.2.1"><strong>Mid-side</strong>. A left 
and right subblock are converted to mid and side subframes. To calculate
 a sample for a mid subframe, the corresponding left and right samples 
are summed and the result is shifted right by 1 bit. To calculate a 
sample for a side subframe, the corresponding right sample is subtracted
 from the corresponding left sample. On decoding, all mid channel 
samples have to be shifted left by 1 bit. Also, if a side channel sample
 is odd, 1 has to be added to the corresponding mid channel sample after
 it has been shifted left by one bit. To reconstruct the left channel, 
the corresponding samples in the mid and side subframes are added and 
the result shifted right by 1 bit, while for the right channel the side 
channel has to be subtracted from the mid channel and the result shifted
 right by 1 bit.<a href="#section-4.2-2.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-4.2-2.3">
            <p id="section-4.2-2.3.1"><strong>Left-side</strong>. The 
left subblock is coded and the left and right subblocks are used to code
 a side subframe. The side subframe is constructed in the same way as 
for mid-side. To decode, the right subblock is restored by subtracting 
the samples in the side subframe from the corresponding samples in the 
the left subframe.<a href="#section-4.2-2.3.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-4.2-2.4">
            <p id="section-4.2-2.4.1"><strong>Side-right</strong>. The 
left and right subblocks are used to code a side subframe and the right 
subblock is coded. The side subframe is constructed in the same way as 
for mid-side. To decode, the left subblock is restored by adding the 
samples in the side subframe to the corresponding samples in the right 
subframe.<a href="#section-4.2-2.4.1" class="pilcrow">¶</a></p>
</li>
        </ul>
<p id="section-4.2-3">The side channel needs one extra bit of bit depth 
as the subtraction can produce sample values twice as large as the 
maximum possible in any given bit depth. The mid channel in mid-side 
stereo does not need one extra bit, as it is shifted right one bit. The 
right shift of the mid channel does not lead to lossy behavior, because 
an odd sample in the mid subframe must always be accompanied by a 
corresponding odd sample in the side subframe, which means the lost 
least-significant bit can be restored by taking it from the sample in 
the side subframe.<a href="#section-4.2-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="prediction">
<section id="section-4.3">
        <h3 id="name-prediction">
<a href="#section-4.3" class="section-number selfRef">4.3. </a><a href="#name-prediction" class="section-name selfRef">Prediction</a>
        </h3>
<p id="section-4.3-1">The FLAC format has four methods for modeling the input signal:<a href="#section-4.3-1" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-4.3-2">
<li id="section-4.3-2.1">
            <p id="section-4.3-2.1.1"><strong>Verbatim</strong>. Samples
 are stored directly, without any modeling. This method is used for 
inputs with little correlation, like white noise. Since the raw signal 
is not actually passed through the residual coding stage (it is added to
 the stream 'verbatim'), this method is different from using a 
zero-order fixed predictor.<a href="#section-4.3-2.1.1" class="pilcrow">¶</a></p>
</li>
          <li id="section-4.3-2.2">
            <p id="section-4.3-2.2.1"><strong>Constant</strong>. A 
single sample value is stored. This method is used whenever a signal is 
pure DC ("digital silence"), i.e., a constant value throughout.<a href="#section-4.3-2.2.1" class="pilcrow">¶</a></p>
</li>
          <li id="section-4.3-2.3">
            <p id="section-4.3-2.3.1"><strong>Fixed predictor</strong>. 
Samples are predicted with one of five fixed (i.e., predefined) 
predictors, and the error of this prediction is processed by the 
residual coder. These fixed predictors are well suited for predicting 
simple waveforms. Since the predictors are fixed, no predictor 
coefficients are stored. From a mathematical point of view, the 
predictors work by extrapolating the signal from the previous samples. 
The number of previous samples used is equal to the predictor order. For
 more information, see <a href="#fixed-predictor-subframe" class="auto internal xref">Section 9.2.5</a>.<a href="#section-4.3-2.3.1" class="pilcrow">¶</a></p>
</li>
          <li id="section-4.3-2.4">
            <p id="section-4.3-2.4.1"><strong>Linear predictor</strong>.
 Samples are predicted using past samples and a set of predictor 
coefficients, and the error of this prediction is processed by the 
residual coder. Compared to a fixed predictor, using a generic linear 
predictor adds overhead as predictor coefficients need to be stored. 
Therefore, this method of prediction is best suited for predicting more 
complex waveforms, where the added overhead is offset by space savings 
in the residual coding stage resulting from more accurate prediction. A 
linear predictor in FLAC has two parameters besides the predictor 
coefficients and the predictor order: the number of bits with which each
 coefficient is stored (the coefficient precision) and a prediction 
right shift. A prediction is formed by taking the sum of multiplying 
each predictor coefficient with the corresponding past sample, and 
dividing that sum by applying the specified right shift. For more 
information, see <a href="#linear-predictor-subframe" class="auto internal xref">Section 9.2.6</a>.<a href="#section-4.3-2.4.1" class="pilcrow">¶</a></p>
</li>
        </ol>
<p id="section-4.3-3">A FLAC encoder is free to select any of the above 
methods to model the input. However, to ensure lossless coding, the 
following exceptions apply:<a href="#section-4.3-3" class="pilcrow">¶</a></p>
<ul class="compact">
<li class="compact" id="section-4.3-4.1">When the samples that need to 
be stored do not all have the same value (i.e., the signal is not 
constant), a constant subframe cannot be used.<a href="#section-4.3-4.1" class="pilcrow">¶</a>
</li>
          <li class="compact" id="section-4.3-4.2">When an encoder is 
unable to find a fixed or linear predictor for which all residual 
samples are representable in 32-bit signed integers as stated in <a href="#coded-residual" class="auto internal xref">Section 9.2.7</a>, a verbatim subframe is used.<a href="#section-4.3-4.2" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-4.3-5">For more information on fixed and linear predictors, see <span>[<a href="#HPL-1999-144" class="cite xref">HPL-1999-144</a>]</span> and <span>[<a href="#robinson-tr156" class="cite xref">robinson-tr156</a>]</span>.<a href="#section-4.3-5" class="pilcrow">¶</a></p>
</section>
</div>
<div id="residual-coding">
<section id="section-4.4">
        <h3 id="name-residual-coding">
<a href="#section-4.4" class="section-number selfRef">4.4. </a><a href="#name-residual-coding" class="section-name selfRef">Residual Coding</a>
        </h3>
<p id="section-4.4-1">If a subframe uses a predictor to approximate the 
audio signal, a residual is stored to 'correct' the approximation to the
 exact value. When an effective predictor is used, the average numerical
 value of the residual samples is smaller than that of the samples 
before prediction. While having smaller values on average, it is 
possible that a few 'outlier' residual samples are much larger than any 
of the original samples. Sometimes these outliers even exceed the range 
the bit depth of the original audio offers.<a href="#section-4.4-1" class="pilcrow">¶</a></p>
<p id="section-4.4-2">To be able to efficiently code such a stream of 
relatively small numbers with an occasional outlier, Rice coding (a 
subset of Golomb coding) is used. Depending on how small the numbers are
 that have to be coded, a Rice parameter is chosen. The numerical value 
of each residual sample is split into two parts by dividing it by <code>2^(Rice parameter)</code>,
 creating a quotient and a remainder. The quotient is stored in unary 
form, the remainder in binary form. If indeed most residual samples are 
close to zero and a suitable Rice parameter is chosen, this form of 
coding, with a so-called variable-length code, uses fewer bits than the 
residual in unencoded form.<a href="#section-4.4-2" class="pilcrow">¶</a></p>
<p id="section-4.4-3">As Rice codes can only handle unsigned numbers, signed numbers are zigzag encoded to a so-called folded residual. See <a href="#coded-residual" class="auto internal xref">Section 9.2.7</a> for a more thorough explanation.<a href="#section-4.4-3" class="pilcrow">¶</a></p>
<p id="section-4.4-4">Quite often, the optimal Rice parameter varies 
over the course of a subframe. To accommodate this, the residual can be 
split up into partitions, where each partition has its own Rice 
parameter. To keep overhead and complexity low, the number of partitions
 used in a subframe is limited to powers of two.<a href="#section-4.4-4" class="pilcrow">¶</a></p>
<p id="section-4.4-5">The FLAC format uses two forms of Rice coding, 
which only differ in the number of bits used for encoding the Rice 
parameter, either 4 or 5 bits.<a href="#section-4.4-5" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="format-principles">
<section id="section-5">
      <h2 id="name-format-principles">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-format-principles" class="section-name selfRef">Format principles</a>
      </h2>
<p id="section-5-1">FLAC has no format version information, but it does 
contain reserved space in several places. Future versions of the format 
MAY use this reserved space safely without breaking the format of older 
streams. Older decoders MAY choose to abort decoding when encountering 
data encoded using methods they do not recognize. Apart from reserved 
patterns, the format specifies forbidden patterns in certain places, 
meaning that the patterns MUST NOT appear in any bitstream. They are 
listed in the following table.<a href="#section-5-1" class="pilcrow">¶</a></p>
<div id="tableforbiddenpatterns">
<table class="center" id="table-1">
        <caption><a href="#table-1" class="selfRef">Table 1</a></caption>
<thead>
          <tr>
            <th class="text-left" rowspan="1" colspan="1">Description</th>
            <th class="text-left" rowspan="1" colspan="1">Reference</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Metadata block type 127</td>
            <td class="text-left" rowspan="1" colspan="1">
              <a href="#metadata-block-header" class="auto internal xref">Section 8.1</a>
</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Minimum and maximum block sizes smaller than 16 in streaminfo metadata block</td>
            <td class="text-left" rowspan="1" colspan="1">
              <a href="#streaminfo" class="auto internal xref">Section 8.2</a>
</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Sample rate bits 0b1111</td>
            <td class="text-left" rowspan="1" colspan="1">
              <a href="#sample-rate-bits" class="auto internal xref">Section 9.1.2</a>
</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Uncommon blocksize 65536</td>
            <td class="text-left" rowspan="1" colspan="1">
              <a href="#uncommon-block-size" class="auto internal xref">Section 9.1.6</a>
</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Predictor coefficient precision bits 0b1111</td>
            <td class="text-left" rowspan="1" colspan="1">
              <a href="#linear-predictor-subframe" class="auto internal xref">Section 9.2.6</a>
</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Negative predictor right shift</td>
            <td class="text-left" rowspan="1" colspan="1">
              <a href="#linear-predictor-subframe" class="auto internal xref">Section 9.2.6</a>
</td>
          </tr>
        </tbody>
      </table>
</div>
<p id="section-5-3">All numbers used in a FLAC bitstream are integers, 
there are no floating-point representations. All numbers are big-endian 
coded, except the field lengths used in Vorbis comments (see <a href="#vorbis-comment" class="auto internal xref">Section 8.6</a>),
 which are little-endian coded. This exception for Vorbis comments is to
 keep as much commonality as possible with Vorbis comments as used by 
the Vorbis codec (see <span>[<a href="#Vorbis" class="cite xref">Vorbis</a>]</span>). All numbers are unsigned except linear predictor coefficients, the linear prediction shift (see <a href="#linear-predictor-subframe" class="auto internal xref">Section 9.2.6</a>),
 and numbers that directly represent samples, which are signed. None of 
these restrictions apply to application metadata blocks or to Vorbis 
comment field contents.<a href="#section-5-3" class="pilcrow">¶</a></p>
<p id="section-5-4">All samples encoded to and decoded from the FLAC format MUST be in a signed representation.<a href="#section-5-4" class="pilcrow">¶</a></p>
<p id="section-5-5">There are several ways to convert unsigned sample 
representations to signed sample representations, but the coding methods
 provided by the FLAC format work best on audio signals of which the 
numerical values of the samples are centered around zero, i.e., have no 
DC offset. In most unsigned audio formats, signals are centered around 
halfway the range of the unsigned integer type used. If that is the 
case, converting sample representations by first copying the number to a
 signed integer with sufficient range and then subtracting half of the 
range of the unsigned integer type, results in a signal with samples 
centered around 0.<a href="#section-5-5" class="pilcrow">¶</a></p>
<p id="section-5-6">Unary coding in a FLAC bitstream is done with zero 
bits terminated with a one bit, e.g., the number 5 is coded unary as 
0b000001. This prevents the frame sync code from appearing in unary 
coded numbers.<a href="#section-5-6" class="pilcrow">¶</a></p>
<p id="section-5-7">When a FLAC file contains data that is forbidden or 
otherwise not valid, decoder behavior is left unspecified. A decoder MAY
 choose to stop decoding upon encountering such data. Examples of such 
data are<a href="#section-5-7" class="pilcrow">¶</a></p>
<ul class="compact">
<li class="compact" id="section-5-8.1">One or more decoded sample values
 exceed the range offered by the bit depth as coded for that frame. 
E.g., in a frame with a bit depth of 8 bits, any samples not in the 
inclusive range from -128 to 127 are not valid.<a href="#section-5-8.1" class="pilcrow">¶</a>
</li>
        <li class="compact" id="section-5-8.2">The number of wasted bits (see <a href="#wasted-bits-per-sample" class="auto internal xref">Section 9.2.2</a>) used by a subframe is such that the bit depth of that subframe (see <a href="#constant-subframe" class="auto internal xref">Section 9.2.3</a> for a description of subframe bit depth) equals zero or is negative.<a href="#section-5-8.2" class="pilcrow">¶</a>
</li>
        <li class="compact" id="section-5-8.3">A frame header CRC (see <a href="#frame-header-crc" class="auto internal xref">Section 9.1.8</a>) or frame footer CRC (see <a href="#frame-footer" class="auto internal xref">Section 9.3</a>) does not validate.<a href="#section-5-8.3" class="pilcrow">¶</a>
</li>
        <li class="compact" id="section-5-8.4">One of the forbidden bit patterns described in <a href="#tableforbiddenpatterns" class="auto internal xref">Table 1</a> above is used.<a href="#section-5-8.4" class="pilcrow">¶</a>
</li>
      </ul>
</section>
</div>
<div id="format-layout-overview">
<section id="section-6">
      <h2 id="name-format-layout-overview">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-format-layout-overview" class="section-name selfRef">Format layout overview</a>
      </h2>
<p id="section-6-1">A FLAC bitstream consists of the <code>fLaC</code> 
(i.e., 0x664C6143) marker at the beginning of the stream, followed by a 
mandatory metadata block (called the STREAMINFO block), any number of 
other metadata blocks, and then the audio frames.<a href="#section-6-1" class="pilcrow">¶</a></p>
<p id="section-6-2">FLAC supports 127 kinds of metadata blocks; currently, 7 kinds are defined in <a href="#file-level-metadata" class="auto internal xref">Section 8</a>.<a href="#section-6-2" class="pilcrow">¶</a></p>
<p id="section-6-3">The audio data is composed of one or more audio 
frames. Each frame consists of a frame header, which contains a sync 
code, information about the frame (like the block size, sample rate and 
number of channels), and an 8-bit CRC. The frame header also contains 
either the sample number of the first sample in the frame (for variable 
block size streams), or the frame number (for fixed block size streams).
 This allows for fast, sample-accurate seeking to be performed. 
Following the frame header are encoded subframes, one for each channel. 
The frame is then zero-padded to a byte boundary and finished with a 
frame footer containing a checksum for the frame. Each subframe has its 
own header that specifies how the subframe is encoded.<a href="#section-6-3" class="pilcrow">¶</a></p>
<p id="section-6-4">In order to allow a decoder to start decoding at any
 place in the stream, each frame starts with a byte-aligned 15-bit sync 
code. However, since it is not guaranteed that the sync code does not 
appear elsewhere in the frame, the decoder can check that it synced 
correctly by parsing the rest of the frame header and validating the 
frame header CRC.<a href="#section-6-4" class="pilcrow">¶</a></p>
<p id="section-6-5">Furthermore, to allow a decoder to start decoding at
 any place in the stream even without having received a streaminfo 
metadata block, each frame header contains some basic information about 
the stream. This information includes sample rate, bits per sample, 
number of channels, etc. Since the frame header is overhead, it has a 
direct effect on the compression ratio. To keep the frame header as 
small as possible, FLAC uses lookup tables for the most commonly used 
values for frame properties. When a certain property has a value that is
 not covered by the lookup table, the decoder is directed to find the 
value of that property (for example, the sample rate) at the end of the 
frame header or in the streaminfo metadata block. If a frame header 
refers to the streaminfo metadata block, the file is not 'streamable', 
see <a href="#streamable-subset" class="auto internal xref">Section 7</a>
 for details. By using lookup tables, the file is streamable and the 
frame header size small for the most common forms of audio data.<a href="#section-6-5" class="pilcrow">¶</a></p>
<p id="section-6-6">Individual subframes (one for each channel) are 
coded separately within a frame, and appear serially in the stream. In 
other words, the encoded audio data is NOT channel-interleaved. This 
reduces decoder complexity at the cost of requiring larger decode 
buffers. Each subframe has its own header specifying the attributes of 
the subframe, like prediction method and order, residual coding 
parameters, etc. Each subframe header is followed by the encoded audio 
data for that channel.<a href="#section-6-6" class="pilcrow">¶</a></p>
</section>
</div>
<div id="streamable-subset">
<section id="section-7">
      <h2 id="name-streamable-subset">
<a href="#section-7" class="section-number selfRef">7. </a><a href="#name-streamable-subset" class="section-name selfRef">Streamable subset</a>
      </h2>
<p id="section-7-1">The FLAC format specifies a subset of itself as the 
FLAC streamable subset. The purpose of this is to ensure that any 
streams encoded according to this subset are truly "streamable", meaning
 that a decoder that cannot seek within the stream can still pick up in 
the middle of the stream and start decoding. It also makes hardware 
decoder implementations more practical by limiting the encoding 
parameters in such a way that decoder buffer sizes and other resource 
requirements can be easily determined. The streamable subset makes the 
following limitations on what MAY be used in the stream:<a href="#section-7-1" class="pilcrow">¶</a></p>
<ul class="compact">
<li class="compact" id="section-7-2.1">The sample rate bits (see <a href="#sample-rate-bits" class="auto internal xref">Section 9.1.2</a>)
 in the frame header MUST be 0b0001-0b1110, i.e., the frame header MUST 
NOT refer to the streaminfo metadata block to describe the sample rate.<a href="#section-7-2.1" class="pilcrow">¶</a>
</li>
        <li class="compact" id="section-7-2.2">The bit depth bits (see <a href="#bit-depth-bits" class="auto internal xref">Section 9.1.4</a>)
 in the frame header MUST be 0b001-0b111, i.e., the frame header MUST 
NOT refer to the streaminfo metadata block to describe the bit depth.<a href="#section-7-2.2" class="pilcrow">¶</a>
</li>
        <li class="compact" id="section-7-2.3">The stream MUST NOT 
contain blocks with more than 16384 interchannel samples, i.e., the 
maximum block size must not be larger than 16384.<a href="#section-7-2.3" class="pilcrow">¶</a>
</li>
        <li class="compact" id="section-7-2.4">Audio with a sample rate 
less than or equal to 48000 Hz MUST NOT be contained in blocks with more
 than 4608 interchannel samples, i.e., the maximum block size used for 
this audio must not be larger than 4608.<a href="#section-7-2.4" class="pilcrow">¶</a>
</li>
        <li class="compact" id="section-7-2.5">Linear prediction subframes (see <a href="#linear-predictor-subframe" class="auto internal xref">Section 9.2.6</a>)
 containing audio with a sample rate less than or equal to 48000 Hz MUST
 have a predictor order less than or equal to 12, i.e., the subframe 
type bits in the subframe header (see <a href="#subframe-header" class="auto internal xref">Section 9.2.1</a>) MUST NOT be 0b101100-0b111111.<a href="#section-7-2.5" class="pilcrow">¶</a>
</li>
        <li class="compact" id="section-7-2.6">The Rice partition order (see <a href="#coded-residual" class="auto internal xref">Section 9.2.7</a>) MUST be less than or equal to 8.<a href="#section-7-2.6" class="pilcrow">¶</a>
</li>
        <li class="compact" id="section-7-2.7">The channel ordering MUST be equal to one defined in <a href="#channels-bits" class="auto internal xref">Section 9.1.3</a>, i.e., the FLAC file MUST NOT need a WAVEFORMATEXTENSIBLE_CHANNEL_MASK tag to describe the channel ordering. See <a href="#channel-mask" class="auto internal xref">Section 8.6.2</a> for details.<a href="#section-7-2.7" class="pilcrow">¶</a>
</li>
      </ul>
</section>
</div>
<div id="file-level-metadata">
<section id="section-8">
      <h2 id="name-file-level-metadata">
<a href="#section-8" class="section-number selfRef">8. </a><a href="#name-file-level-metadata" class="section-name selfRef">File-level metadata</a>
      </h2>
<p id="section-8-1">At the start of a FLAC file or stream, following the <code>fLaC</code>
 ASCII file signature, one or more metadata blocks MUST be present 
before any audio frames appear. The first metadata block MUST be a 
streaminfo block.<a href="#section-8-1" class="pilcrow">¶</a></p>
<div id="metadata-block-header">
<section id="section-8.1">
        <h3 id="name-metadata-block-header">
<a href="#section-8.1" class="section-number selfRef">8.1. </a><a href="#name-metadata-block-header" class="section-name selfRef">Metadata block header</a>
        </h3>
<p id="section-8.1-1">Each metadata block starts with a 4 byte header. 
The first bit in this header flags whether a metadata block is the last 
one: it is a 0 when other metadata blocks follow, otherwise it is a 1. 
The 7 remaining bits of the first header byte contain the type of the 
metadata block as an unsigned number between 0 and 126 according to the 
following table. A value of 127 (i.e., 0b1111111) is forbidden. The 
three bytes that follow code for the size of the metadata block in 
bytes, excluding the 4 header bytes, as an unsigned number coded 
big-endian.<a href="#section-8.1-1" class="pilcrow">¶</a></p>
<table class="center" id="table-2">
          <caption><a href="#table-2" class="selfRef">Table 2</a></caption>
<thead>
            <tr>
              <th class="text-left" rowspan="1" colspan="1">Value</th>
              <th class="text-left" rowspan="1" colspan="1">Metadata block type</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">0</td>
              <td class="text-left" rowspan="1" colspan="1">Streaminfo</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">1</td>
              <td class="text-left" rowspan="1" colspan="1">Padding</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">2</td>
              <td class="text-left" rowspan="1" colspan="1">Application</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">3</td>
              <td class="text-left" rowspan="1" colspan="1">Seektable</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">4</td>
              <td class="text-left" rowspan="1" colspan="1">Vorbis comment</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">5</td>
              <td class="text-left" rowspan="1" colspan="1">Cuesheet</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">6</td>
              <td class="text-left" rowspan="1" colspan="1">Picture</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">7 - 126</td>
              <td class="text-left" rowspan="1" colspan="1">reserved</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">127</td>
              <td class="text-left" rowspan="1" colspan="1">forbidden, to avoid confusion with a frame sync code</td>
            </tr>
          </tbody>
        </table>
</section>
</div>
<div id="streaminfo">
<section id="section-8.2">
        <h3 id="name-streaminfo">
<a href="#section-8.2" class="section-number selfRef">8.2. </a><a href="#name-streaminfo" class="section-name selfRef">Streaminfo</a>
        </h3>
<p id="section-8.2-1">The streaminfo metadata block has information 
about the whole stream, like sample rate, number of channels, total 
number of samples, etc. It MUST be present as the first metadata block 
in the stream. Other metadata blocks MAY follow. There MUST be no more 
than one streaminfo metadata block per FLAC stream.<a href="#section-8.2-1" class="pilcrow">¶</a></p>
<p id="section-8.2-2">If the streaminfo metadata block contains 
incorrect or incomplete information, decoder behavior is left 
unspecified (i.e., up to the decoder implementation). A decoder MAY 
choose to stop further decoding when the information supplied by the 
streaminfo metadata block turns out to be incorrect or contains 
forbidden values. A decoder accepting information from the streaminfo 
block (most-significantly the maximum frame size, maximum block size, 
number of audio channels, number of bits per sample, and total number of
 samples) without doing further checks during decoding of audio frames 
could be vulnerable to buffer overflows. See also <a href="#security-considerations" class="auto internal xref">Section 12</a>.<a href="#section-8.2-2" class="pilcrow">¶</a></p>
<p id="section-8.2-3">The following table describes the streaminfo metadata block, excluding the metadata block header.<a href="#section-8.2-3" class="pilcrow">¶</a></p>
<table class="center" id="table-3">
          <caption><a href="#table-3" class="selfRef">Table 3</a></caption>
<thead>
            <tr>
              <th class="text-left" rowspan="1" colspan="1">Data</th>
              <th class="text-left" rowspan="1" colspan="1">Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(16)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">The minimum block size (in samples) used in the stream, excluding the last block.</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(16)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">The maximum block size (in samples) used in the stream.</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(24)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">The minimum frame size (in bytes) used in the stream. A value of <code>0</code> signifies that the value is not known.</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(24)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">The maximum frame size (in bytes) used in the stream. A value of <code>0</code> signifies that the value is not known.</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(20)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">Sample rate in Hz.</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(3)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">(number of channels)-1. FLAC supports from 1 to 8 channels.</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(5)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">(bits per sample)-1. FLAC supports from 4 to 32 bits per sample.</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(36)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">Total number of interchannel samples in the stream. A value of zero here means the number of total samples is unknown.</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(128)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">MD5 checksum
 of the unencoded audio data. This allows the decoder to determine if an
 error exists in the audio data even when, despite the error, the 
bitstream itself is valid. A value of <code>0</code> signifies that the value is not known.</td>
            </tr>
          </tbody>
        </table>
<p id="section-8.2-5">The minimum block size and the maximum block size 
MUST be in the 16-65535 range. The minimum block size MUST be equal to 
or less than the maximum block size.<a href="#section-8.2-5" class="pilcrow">¶</a></p>
<p id="section-8.2-6">Any frame but the last one MUST have a block size 
equal to or greater than the minimum block size and MUST have a block 
size equal to or lesser than the maximum block size. The last frame MUST
 have a block size equal to or lesser than the maximum block size, it 
does not have to comply to the minimum block size because the block size
 of that frame must be able to accommodate the length of the audio data 
the stream contains.<a href="#section-8.2-6" class="pilcrow">¶</a></p>
<p id="section-8.2-7">If the minimum block size is equal to the maximum 
block size, the file contains a fixed block size stream, as the minimum 
block size excludes the last block. Note that in the case of a stream 
with a variable block size, the actual maximum block size MAY be smaller
 than the maximum block size listed in the streaminfo block, and the 
actual smallest block size excluding the last block MAY be larger than 
the minimum block size listed in the streaminfo block. This is because 
the encoder has to write these fields before receiving any input audio 
data, and cannot know beforehand what block sizes it will use, only 
between what bounds these will be chosen.<a href="#section-8.2-7" class="pilcrow">¶</a></p>
<p id="section-8.2-8">The sample rate MUST NOT be 0 when the FLAC file 
contains audio. A sample rate of 0 MAY be used when non-audio is 
represented. This is useful if data is encoded that is not along a time 
axis, or when the sample rate of the data lies outside the range that 
FLAC can represent in the streaminfo metadata block. If a sample rate of
 0 is used it is recommended to store the meaning of the encoded content
 in a Vorbis comment field (see <a href="#vorbis-comment" class="auto internal xref">Section 8.6</a>) or an application metadata block (see <a href="#application" class="auto internal xref">Section 8.4</a>). This document does not define such metadata.<a href="#section-8.2-8" class="pilcrow">¶</a></p>
<p id="section-8.2-9">The MD5 checksum is computed by applying the MD5 message-digest algorithm in <span>[<a href="#RFC1321" class="cite xref">RFC1321</a>]</span>.
 The message to this algorithm consists of all the samples of all 
channels interleaved, represented in signed, little-endian form. This 
interleaving is on a per-sample basis, so for a stereo file this means 
first the first sample of the first channel, then the first sample of 
the second channel, then the second sample of the first channel etc. 
Before computing the checksum, all samples must be byte-aligned. If the 
bit depth is not a whole number of bytes, the value of each sample is 
sign extended to the next whole number of bytes.<a href="#section-8.2-9" class="pilcrow">¶</a></p>
<p id="section-8.2-10">So, in the case of a 2-channel stream with 6-bit samples, bits will be lined up as follows.<a href="#section-8.2-10" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-8.2-11">
<pre>SSAAAAAASSBBBBBBSSCCCCCC
^   ^   ^   ^   ^   ^
|   |   |   |   |  Bits of 2nd sample of 1st channel
|   |   |   |  Sign extension bits of 2nd sample of 2nd channel
|   |   |  Bits of 1st sample of 2nd channel
|   |  Sign extension bits of 1st sample of 2nd channel
|  Bits of 1st sample of 1st channel
Sign extention bits of 1st sample of 1st channel


</pre><a href="#section-8.2-11" class="pilcrow">¶</a>
</div>
<p id="section-8.2-12">As another example, in the case of a 1-channel 
with 12-bit samples, bits are lined up as follows, showing the 
little-endian byte order<a href="#section-8.2-12" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-8.2-13">
<pre>AAAAAAAASSSSAAAABBBBBBBBSSSSBBBB
   ^     ^   ^   ^       ^   ^
   |     |   |   |       |  Most-significant 4 bits of 2nd sample
   |     |   |   | Sign extension bits of 2nd sample
   |     |   |  Least-significant 8 bits of 2nd sample
   |     |  Most-significant 4 bits of 1st sample
   |    Sign extension bits of 1st sample
  Least-significant 8 bits of 1st sample


</pre><a href="#section-8.2-13" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="padding">
<section id="section-8.3">
        <h3 id="name-padding">
<a href="#section-8.3" class="section-number selfRef">8.3. </a><a href="#name-padding" class="section-name selfRef">Padding</a>
        </h3>
<p id="section-8.3-1">The padding metadata block allows for an arbitrary
 amount of padding. This block is useful when it is known that metadata 
will be edited after encoding; the user can instruct the encoder to 
reserve a padding block of sufficient size so that when metadata is 
added, it will simply overwrite the padding (which is relatively quick) 
instead of having to insert it into the existing file (which would 
normally require rewriting the entire file). There MAY be one or more 
padding metadata blocks per FLAC stream.<a href="#section-8.3-1" class="pilcrow">¶</a></p>
<table class="center" id="table-4">
          <caption><a href="#table-4" class="selfRef">Table 4</a></caption>
<thead>
            <tr>
              <th class="text-left" rowspan="1" colspan="1">Data</th>
              <th class="text-left" rowspan="1" colspan="1">Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(n)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">n '0' bits 
(n MUST be a multiple of 8, i.e., a whole number of bytes, and MAY be 
zero). n is 8 times the size described in the metadata block header.</td>
            </tr>
          </tbody>
        </table>
</section>
</div>
<div id="application">
<section id="section-8.4">
        <h3 id="name-application">
<a href="#section-8.4" class="section-number selfRef">8.4. </a><a href="#name-application" class="section-name selfRef">Application</a>
        </h3>
<p id="section-8.4-1">The application metadata block is for use by 
third-party applications. The only mandatory field is a 32-bit 
identifier. An ID registry is being maintained at <a href="https://xiph.org/flac/id.html">https://xiph.org/flac/id.html</a>.<a href="#section-8.4-1" class="pilcrow">¶</a></p>
<table class="center" id="table-5">
          <caption><a href="#table-5" class="selfRef">Table 5</a></caption>
<thead>
            <tr>
              <th class="text-left" rowspan="1" colspan="1">Data</th>
              <th class="text-left" rowspan="1" colspan="1">Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(32)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">Registered application ID.</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(n)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">Application 
data (n MUST be a multiple of 8, i.e., a whole number of bytes) n is 8 
times the size described in the metadata block header, minus the 32 bits
 already used for the application ID.</td>
            </tr>
          </tbody>
        </table>
<p id="section-8.4-3">Application IDs are registered with the IANA, see <a href="#application-id-registry" class="auto internal xref">Section 13.2</a>.<a href="#section-8.4-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="seektable">
<section id="section-8.5">
        <h3 id="name-seektable">
<a href="#section-8.5" class="section-number selfRef">8.5. </a><a href="#name-seektable" class="section-name selfRef">Seektable</a>
        </h3>
<p id="section-8.5-1">The seektable metadata block can be used to store 
seek points. It is possible to seek to any given sample in a FLAC stream
 without a seek table, but the delay can be unpredictable since the 
bitrate may vary widely within a stream. By adding seek points to a 
stream, this delay can be significantly reduced. There MUST NOT be more 
than one seektable metadata block in a stream, but the table can have 
any number of seek points.<a href="#section-8.5-1" class="pilcrow">¶</a></p>
<p id="section-8.5-2">Each seek point takes 18 bytes, so a seek table 
with 1% resolution within a stream adds less than 2 kilobyte of data. 
The number of seek points is implied by the size described in the 
metadata block header, i.e., equal to size / 18. There is also a special
 'placeholder' seekpoint that will be ignored by decoders but can be 
used to reserve space for future seek point insertion.<a href="#section-8.5-2" class="pilcrow">¶</a></p>
<table class="center" id="table-6">
          <caption><a href="#table-6" class="selfRef">Table 6</a></caption>
<thead>
            <tr>
              <th class="text-left" rowspan="1" colspan="1">Data</th>
              <th class="text-left" rowspan="1" colspan="1">Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">Seekpoints</td>
              <td class="text-left" rowspan="1" colspan="1">Zero or more seek points as defined in <a href="#seekpoint" class="auto internal xref">Section 8.5.1</a>.</td>
            </tr>
          </tbody>
        </table>
<p id="section-8.5-4">A seektable is generally not usable for seeking in a FLAC file embedded in a container (see <a href="#container-mappings" class="auto internal xref">Section 10</a>),
 as such containers usually interleave FLAC data with other data and the
 offsets used in seekpoints are those of an unmuxed FLAC stream. Also, 
containers often provide their own seeking methods. It is, however, 
possible to store the seektable in the container along with other 
metadata when muxing a FLAC file, so this stored seektable can be 
restored when demuxing the FLAC stream into a standalone FLAC file.<a href="#section-8.5-4" class="pilcrow">¶</a></p>
<div id="seekpoint">
<section id="section-8.5.1">
          <h4 id="name-seekpoint">
<a href="#section-8.5.1" class="section-number selfRef">8.5.1. </a><a href="#name-seekpoint" class="section-name selfRef">Seekpoint</a>
          </h4>
<table class="center" id="table-7">
            <caption><a href="#table-7" class="selfRef">Table 7</a></caption>
<thead>
              <tr>
                <th class="text-left" rowspan="1" colspan="1">Data</th>
                <th class="text-left" rowspan="1" colspan="1">Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>u(64)</code>
</td>
                <td class="text-left" rowspan="1" colspan="1">Sample number of the first sample in the target frame, or <code>0xFFFFFFFFFFFFFFFF</code> for a placeholder point.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>u(64)</code>
</td>
                <td class="text-left" rowspan="1" colspan="1">Offset (in bytes) from the first byte of the first frame header to the first byte of the target frame's header.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>u(16)</code>
</td>
                <td class="text-left" rowspan="1" colspan="1">Number of samples in the target frame.</td>
              </tr>
            </tbody>
          </table>
<p id="section-8.5.1-2">NOTES<a href="#section-8.5.1-2" class="pilcrow">¶</a></p>
<ul class="compact">
<li class="compact" id="section-8.5.1-3.1">For placeholder points, the second and third field values are undefined.<a href="#section-8.5.1-3.1" class="pilcrow">¶</a>
</li>
            <li class="compact" id="section-8.5.1-3.2">Seek points within a table MUST be sorted in ascending order by sample number.<a href="#section-8.5.1-3.2" class="pilcrow">¶</a>
</li>
            <li class="compact" id="section-8.5.1-3.3">Seek points within a table MUST be unique by sample number, with the exception of placeholder points.<a href="#section-8.5.1-3.3" class="pilcrow">¶</a>
</li>
            <li class="compact" id="section-8.5.1-3.4">The previous two 
notes imply that there MAY be any number of placeholder points, but they
 MUST all occur at the end of the table.<a href="#section-8.5.1-3.4" class="pilcrow">¶</a>
</li>
            <li class="compact" id="section-8.5.1-3.5">The sample 
offsets are those of an unmuxed FLAC stream. The offsets MUST NOT be 
updated on muxing to reflect the new offsets of FLAC frames in a 
container.<a href="#section-8.5.1-3.5" class="pilcrow">¶</a>
</li>
          </ul>
</section>
</div>
</section>
</div>
<div id="vorbis-comment">
<section id="section-8.6">
        <h3 id="name-vorbis-comment">
<a href="#section-8.6" class="section-number selfRef">8.6. </a><a href="#name-vorbis-comment" class="section-name selfRef">Vorbis comment</a>
        </h3>
<p id="section-8.6-1">A Vorbis comment metadata block contains 
human-readable information coded in UTF-8. The name Vorbis comment 
points to the fact that the Vorbis codec stores such metadata in almost 
the same way, see <span>[<a href="#Vorbis" class="cite xref">Vorbis</a>]</span>.
 A Vorbis comment metadata block consists of a vendor string optionally 
followed by a number of fields, which are pairs of field names and field
 contents. Many users refer to these fields as FLAC tags or simply as 
tags. A FLAC file MUST NOT contain more than one Vorbis comment metadata
 block.<a href="#section-8.6-1" class="pilcrow">¶</a></p>
<p id="section-8.6-2">In a Vorbis comment metadata block, the metadata 
block header is directly followed by 4 bytes containing the length in 
bytes of the vendor string as an unsigned number coded little-endian. 
The vendor string follows UTF-8 coded, and is not terminated in any way.<a href="#section-8.6-2" class="pilcrow">¶</a></p>
<p id="section-8.6-3">Following the vendor string are 4 bytes containing
 the number of fields that are in the Vorbis comment block, stored as an
 unsigned number, coded little-endian. If this number is non-zero, it is
 followed by the fields themselves, each of which is stored with a 4 
byte length. First, the 4 byte field length in bytes is stored as an 
unsigned number, coded little-endian. The field itself is, like the 
vendor string, UTF-8 coded, not terminated in any way.<a href="#section-8.6-3" class="pilcrow">¶</a></p>
<p id="section-8.6-4">Each field consists of a field name and a field 
content, separated by an = character. The field name MUST only consist 
of UTF-8 code points U+0020 through U+007E, excluding U+003D, which is 
the = character. In other words, the field name can contain all 
printable ASCII characters except the equals sign. The evaluation of the
 field names MUST be case insensitive, so U+0041 through 0+005A (A-Z) 
MUST be considered equivalent to U+0061 through U+007A (a-z) 
respectively. The field contents can contain any UTF-8 character.<a href="#section-8.6-4" class="pilcrow">¶</a></p>
<p id="section-8.6-5">Note that the Vorbis comment as used in Vorbis 
allows for on the order of 2^64 bytes of data whereas the FLAC metadata 
block is limited to 2^24 bytes. Given the stated purpose of Vorbis 
comments, i.e., human-readable textual information, the FLAC metadata 
block limit is unlikely to be restrictive. Also note that the 32-bit 
field lengths are coded little-endian, as opposed to the usual 
big-endian coding of fixed-length integers in the rest of the FLAC 
format.<a href="#section-8.6-5" class="pilcrow">¶</a></p>
<div id="standard-field-names">
<section id="section-8.6.1">
          <h4 id="name-standard-field-names">
<a href="#section-8.6.1" class="section-number selfRef">8.6.1. </a><a href="#name-standard-field-names" class="section-name selfRef">Standard field names</a>
          </h4>
<p id="section-8.6.1-1">Only one standard field name is defined: the channel mask field, in <a href="#channel-mask" class="auto internal xref">Section 8.6.2</a>.
 No other field names are defined because the applicability of any field
 name is strongly tied to the content it is associated with. For 
example, field names useful for describing files that contain a single 
work of music would be unusable when labeling archived broadcasts, 
recordings of any kind, or a collection of music works. Even when 
describing a single work of music, different conventions exist depending
 on the kind of music: orchestral music differs from music by solo 
artists or bands.<a href="#section-8.6.1-1" class="pilcrow">¶</a></p>
<p id="section-8.6.1-2">Despite the fact that no field names are 
formally defined, there is a general trend among devices and software 
capable of FLAC playback that are meant to play music. Most of those 
recognize at least the following field names:<a href="#section-8.6.1-2" class="pilcrow">¶</a></p>
<ul class="compact">
<li class="compact" id="section-8.6.1-3.1">Title: name of the current work.<a href="#section-8.6.1-3.1" class="pilcrow">¶</a>
</li>
            <li class="compact" id="section-8.6.1-3.2">Artist: name of 
the artist generally responsible for the current work. For orchestral 
works, this is usually the composer; otherwise, it is often the 
performer.<a href="#section-8.6.1-3.2" class="pilcrow">¶</a>
</li>
            <li class="compact" id="section-8.6.1-3.3">Album: name of the collection the current work belongs to.<a href="#section-8.6.1-3.3" class="pilcrow">¶</a>
</li>
          </ul>
<p id="section-8.6.1-4">For a more comprehensive list of possible field 
names suited for describing a single work of music in various genres, 
the list of tags used in the MusicBrainz project, see <span>[<a href="#MusicBrainz" class="cite xref">MusicBrainz</a>]</span>, is suggested.<a href="#section-8.6.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="channel-mask">
<section id="section-8.6.2">
          <h4 id="name-channel-mask">
<a href="#section-8.6.2" class="section-number selfRef">8.6.2. </a><a href="#name-channel-mask" class="section-name selfRef">Channel mask</a>
          </h4>
<p id="section-8.6.2-1">Besides fields containing information about the 
work itself, one field is defined for technical reasons, of which the 
field name is WAVEFORMATEXTENSIBLE_CHANNEL_MASK. This field is used to 
communicate that the channels in a file differ from the default channels
 defined in <a href="#channels-bits" class="auto internal xref">Section 9.1.3</a>.
 For example, by default, a FLAC file containing two channels is 
interpreted to contain a left and right channel, but with this field, it
 is possible to describe different channel contents.<a href="#section-8.6.2-1" class="pilcrow">¶</a></p>
<p id="section-8.6.2-2">The channel mask consists of flag bits 
indicating which channels are present. The flags only signal which 
channels are present, not in which order, so if a file has to be encoded
 in which channels are ordered differently, they have to be reordered. 
This mask is stored with a hexadecimal representation, preceded by 0x, 
see the examples below. Please note that a file in which the channel 
order is defined through the WAVEFORMATEXTENSIBLE_CHANNEL_MASK is not 
streamable (see <a href="#streamable-subset" class="auto internal xref">Section 7</a>), as the field is not found in each frame header. The mask bits can be found in the following table.<a href="#section-8.6.2-2" class="pilcrow">¶</a></p>
<table class="center" id="table-8">
            <caption><a href="#table-8" class="selfRef">Table 8</a></caption>
<thead>
              <tr>
                <th class="text-left" rowspan="1" colspan="1">Bit number</th>
                <th class="text-left" rowspan="1" colspan="1">Channel description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0</td>
                <td class="text-left" rowspan="1" colspan="1">Front left</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">1</td>
                <td class="text-left" rowspan="1" colspan="1">Front right</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">2</td>
                <td class="text-left" rowspan="1" colspan="1">Front center</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">3</td>
                <td class="text-left" rowspan="1" colspan="1">Low-frequency effects (LFE)</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">4</td>
                <td class="text-left" rowspan="1" colspan="1">Back left</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">5</td>
                <td class="text-left" rowspan="1" colspan="1">Back right</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">6</td>
                <td class="text-left" rowspan="1" colspan="1">Front left of center</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">7</td>
                <td class="text-left" rowspan="1" colspan="1">Front right of center</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">8</td>
                <td class="text-left" rowspan="1" colspan="1">Back center</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">9</td>
                <td class="text-left" rowspan="1" colspan="1">Side left</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">10</td>
                <td class="text-left" rowspan="1" colspan="1">Side right</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">11</td>
                <td class="text-left" rowspan="1" colspan="1">Top center</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">12</td>
                <td class="text-left" rowspan="1" colspan="1">Top front left</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">13</td>
                <td class="text-left" rowspan="1" colspan="1">Top front center</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">14</td>
                <td class="text-left" rowspan="1" colspan="1">Top front right</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">15</td>
                <td class="text-left" rowspan="1" colspan="1">Top rear left</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">16</td>
                <td class="text-left" rowspan="1" colspan="1">Top rear center</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">17</td>
                <td class="text-left" rowspan="1" colspan="1">Top rear right</td>
              </tr>
            </tbody>
          </table>
<p id="section-8.6.2-4">Following are three examples:<a href="#section-8.6.2-4" class="pilcrow">¶</a></p>
<ul class="compact">
<li class="compact" id="section-8.6.2-5.1">If a file has a single channel, being a LFE channel, the Vorbis comment field is WAVEFORMATEXTENSIBLE_CHANNEL_MASK=0x8.<a href="#section-8.6.2-5.1" class="pilcrow">¶</a>
</li>
            <li class="compact" id="section-8.6.2-5.2">If a file has 
four channels, being front left, front right, top front left, and top 
front right, the Vorbis comment field is 
WAVEFORMATEXTENSIBLE_CHANNEL_MASK=0x5003.<a href="#section-8.6.2-5.2" class="pilcrow">¶</a>
</li>
            <li class="compact" id="section-8.6.2-5.3">If an input has 
four channels, being back center, top front center, front center, and 
top rear center in that order, they have to be reordered to front 
center, back center, top front center and top rear center. The Vorbis 
comment field added is WAVEFORMATEXTENSIBLE_CHANNEL_MASK=0x12104.<a href="#section-8.6.2-5.3" class="pilcrow">¶</a>
</li>
          </ul>
<p id="section-8.6.2-6">WAVEFORMATEXTENSIBLE_CHANNEL_MASK fields MAY be 
padded with zeros, for example, 0x0008 for a single LFE channel. Parsing
 of WAVEFORMATEXTENSIBLE_CHANNEL_MASK fields MUST be case-insensitive 
for both the field name and the field contents.<a href="#section-8.6.2-6" class="pilcrow">¶</a></p>
<p id="section-8.6.2-7">A WAVEFORMATEXTENSIBLE_CHANNEL_MASK field of 0x0
 can be used to indicate that none of the audio channels of a file 
correlate with speaker positions. This is the case when audio needs to 
be decoded into speaker positions (e.g., Ambisonics B-format audio) or 
when a multitrack recording is contained.<a href="#section-8.6.2-7" class="pilcrow">¶</a></p>
<p id="section-8.6.2-8">It is possible for a 
WAVEFORMATEXTENSIBLE_CHANNEL_MASK field to code for fewer channels than 
are present in the audio. If that is the case, the remaining channels 
SHOULD NOT be rendered by a playback application unfamiliar with their 
purpose. For example, the Ambisonics UHJ format is compatible with 
stereo playback: its first two channels can be played back on stereo 
equipment, but all four channels together can be decoded into surround 
sound. For that example, the Vorbis comment field 
WAVEFORMATEXTENSIBLE_CHANNEL_MASK=0x3 would be set, indicating the first
 two channels are front left and front right, and other channels do not 
correlate with speaker positions directly.<a href="#section-8.6.2-8" class="pilcrow">¶</a></p>
<p id="section-8.6.2-9">If audio channels not assigned to any speaker 
are contained and decoding to speaker positions is possible, it is 
recommended to provide metadata on how this decoding should take place 
in another Vorbis comment field or an application metadata block. This 
document does not define such metadata.<a href="#section-8.6.2-9" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="cuesheet">
<section id="section-8.7">
        <h3 id="name-cuesheet">
<a href="#section-8.7" class="section-number selfRef">8.7. </a><a href="#name-cuesheet" class="section-name selfRef">Cuesheet</a>
        </h3>
<p id="section-8.7-1">To either store the track and index point 
structure of a Compact Disc Digital Audio (CD-DA) along with its audio 
or to provide a mechanism to store locations of interest within a FLAC 
file, a cuesheet metadata block can be used. Certain aspects of this 
metadata block follow directly from the CD-DA specification, called Red 
Book, which is standardized as <span>[<a href="#IEC.60908.1999" class="cite xref">IEC.60908.1999</a>]</span>.  The description below is complete and further reference to [IEC.60908.1999] is not needed to implement this metadata block.<a href="#section-8.7-1" class="pilcrow">¶</a></p>
<p id="section-8.7-2">The structure of a cuesheet metadata block is enumerated in the following table.<a href="#section-8.7-2" class="pilcrow">¶</a></p>
<table class="center" id="table-9">
          <caption><a href="#table-9" class="selfRef">Table 9</a></caption>
<thead>
            <tr>
              <th class="text-left" rowspan="1" colspan="1">Data</th>
              <th class="text-left" rowspan="1" colspan="1">Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(128*8)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">Media catalog number, in ASCII printable characters 0x20-0x7E.</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(64)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">Number of lead-in samples.</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(1)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>1</code> if the cuesheet corresponds to a CD-DA, else <code>0</code>.</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(7+258*8)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">Reserved. All bits MUST be set to zero.</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(8)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">Number of tracks in this cuesheet.</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">Cuesheet tracks</td>
              <td class="text-left" rowspan="1" colspan="1">A number of structures as specified in <a href="#cuesheet-track" class="auto internal xref">Section 8.7.1</a> equal to the number of tracks specified previously.</td>
            </tr>
          </tbody>
        </table>
<p id="section-8.7-4">If the media catalog number is less than 128 bytes
 long, it is right-padded with 0x00 bytes. For CD-DA, this is a thirteen
 digit number, followed by 115 0x00 bytes.<a href="#section-8.7-4" class="pilcrow">¶</a></p>
<p id="section-8.7-5">The number of lead-in samples has meaning only for
 CD-DA cuesheets; for other uses, it should be 0. For CD-DA, the lead-in
 is the TRACK 00 area where the table of contents is stored; more 
precisely, it is the number of samples from the first sample of the 
media to the first sample of the first index point of the first track. 
According to <span>[<a href="#IEC.60908.1999" class="cite xref">IEC.60908.1999</a>]</span>,
 the lead-in MUST be silence and CD grabbing software does not usually 
store it; additionally, the lead-in MUST be at least two seconds but MAY
 be longer. For these reasons, the lead-in length is stored here so that
 the absolute position of the first track can be computed. Note that the
 lead-in stored here is the number of samples up to the first index 
point of the first track, not necessarily to INDEX 01 of the first 
track; even the first track MAY have INDEX 00 data.<a href="#section-8.7-5" class="pilcrow">¶</a></p>
<p id="section-8.7-6">The number of tracks MUST be at least 1, as a 
cuesheet block MUST have a lead-out track. For CD-DA, this number MUST 
be no more than 100 (99 regular tracks and one lead-out track). The 
lead-out track is always the last track in the cuesheet. For CD-DA, the 
lead-out track number MUST be 170 as specified by <span>[<a href="#IEC.60908.1999" class="cite xref">IEC.60908.1999</a>]</span>, otherwise it MUST be 255.<a href="#section-8.7-6" class="pilcrow">¶</a></p>
<div id="cuesheet-track">
<section id="section-8.7.1">
          <h4 id="name-cuesheet-track">
<a href="#section-8.7.1" class="section-number selfRef">8.7.1. </a><a href="#name-cuesheet-track" class="section-name selfRef">Cuesheet track</a>
          </h4>
<table class="center" id="table-10">
            <caption><a href="#table-10" class="selfRef">Table 10</a></caption>
<thead>
              <tr>
                <th class="text-left" rowspan="1" colspan="1">Data</th>
                <th class="text-left" rowspan="1" colspan="1">Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>u(64)</code>
</td>
                <td class="text-left" rowspan="1" colspan="1">Track offset of the first index point in samples, relative to the beginning of the FLAC audio stream.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>u(8)</code>
</td>
                <td class="text-left" rowspan="1" colspan="1">Track number.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>u(12*8)</code>
</td>
                <td class="text-left" rowspan="1" colspan="1">Track ISRC.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>u(1)</code>
</td>
                <td class="text-left" rowspan="1" colspan="1">The track type: 0 for audio, 1 for non-audio. This corresponds to the CD-DA Q-channel control bit 3.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>u(1)</code>
</td>
                <td class="text-left" rowspan="1" colspan="1">The pre-emphasis flag: 0 for no pre-emphasis, 1 for pre-emphasis. This corresponds to the CD-DA Q-channel control bit 5.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>u(6+13*8)</code>
</td>
                <td class="text-left" rowspan="1" colspan="1">Reserved. All bits MUST be set to zero.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>u(8)</code>
</td>
                <td class="text-left" rowspan="1" colspan="1">The number of track index points.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Cuesheet track index points</td>
                <td class="text-left" rowspan="1" colspan="1">For all tracks except the lead-out track, a number of structures as specified in <a href="#cuesheet-track-index-point" class="auto internal xref">Section 8.7.1.1</a> equal to the number of index points specified previously.</td>
              </tr>
            </tbody>
          </table>
<p id="section-8.7.1-2">Note that the track offset differs from the one 
in CD-DA, where the track's offset in the TOC is that of the track's 
INDEX 01 even if there is an INDEX 00. For CD-DA, the track offset MUST 
be evenly divisible by 588 samples (588 samples = 44100 samples/s * 1/75
 s).<a href="#section-8.7.1-2" class="pilcrow">¶</a></p>
<p id="section-8.7.1-3">A track number of 0 is not allowed, because the 
CD-DA specification reserves this for the lead-in. For CD-DA the number 
MUST be 1-99, or 170 for the lead-out; for non-CD-DA, the track number 
MUST be 255 for the lead-out. It is recommended to start with track 1 
and increase sequentially. Track numbers MUST be unique within a 
cuesheet.<a href="#section-8.7.1-3" class="pilcrow">¶</a></p>
<p id="section-8.7.1-4">The track ISRC (International Standard Recording Code) is a 12-digit alphanumeric code; see <span>[<a href="#ISRC-handbook" class="cite xref">ISRC-handbook</a>]</span>. A value of 12 ASCII 0x00 characters MAY be used to denote the absence of an ISRC.<a href="#section-8.7.1-4" class="pilcrow">¶</a></p>
<p id="section-8.7.1-5">There MUST be at least one index point in every 
track in a cuesheet except for the lead-out track, which MUST have zero.
 For CD-DA, the number of index points MUST NOT be more than 100.<a href="#section-8.7.1-5" class="pilcrow">¶</a></p>
<div id="cuesheet-track-index-point">
<section id="section-8.7.1.1">
            <h5 id="name-cuesheet-track-index-point">
<a href="#section-8.7.1.1" class="section-number selfRef">8.7.1.1. </a><a href="#name-cuesheet-track-index-point" class="section-name selfRef">Cuesheet track index point</a>
            </h5>
<table class="center" id="table-11">
              <caption><a href="#table-11" class="selfRef">Table 11</a></caption>
<thead>
                <tr>
                  <th class="text-left" rowspan="1" colspan="1">Data</th>
                  <th class="text-left" rowspan="1" colspan="1">Description</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td class="text-left" rowspan="1" colspan="1">
                    <code>u(64)</code>
</td>
                  <td class="text-left" rowspan="1" colspan="1">Offset in samples, relative to the track offset, of the index point.</td>
                </tr>
                <tr>
                  <td class="text-left" rowspan="1" colspan="1">
                    <code>u(8)</code>
</td>
                  <td class="text-left" rowspan="1" colspan="1">The track index point number.</td>
                </tr>
                <tr>
                  <td class="text-left" rowspan="1" colspan="1">
                    <code>u(3*8)</code>
</td>
                  <td class="text-left" rowspan="1" colspan="1">Reserved. All bits MUST be set to zero.</td>
                </tr>
              </tbody>
            </table>
<p id="section-8.7.1.1-2">For CD-DA, the track index point offset MUST 
be evenly divisible by 588 samples (588 samples = 44100 samples/s * 1/75
 s). Note that the offset is from the beginning of the track, not the 
beginning of the audio data.<a href="#section-8.7.1.1-2" class="pilcrow">¶</a></p>
<p id="section-8.7.1.1-3">For CD-DA, a track index point number of 0 
corresponds to the track pre-gap. The first index point in a track MUST 
have a number of 0 or 1, and subsequently, index point numbers MUST 
increase by 1. Index point numbers MUST be unique within a track.<a href="#section-8.7.1.1-3" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="picture">
<section id="section-8.8">
        <h3 id="name-picture">
<a href="#section-8.8" class="section-number selfRef">8.8. </a><a href="#name-picture" class="section-name selfRef">Picture</a>
        </h3>
<p id="section-8.8-1">The picture metadata block contains image data of a
 picture in some way belonging to the audio contained in the FLAC file. 
Its format is derived from the APIC frame in the ID3v2 specification, 
see <span>[<a href="#ID3v2" class="cite xref">ID3v2</a>]</span>. 
However, contrary to the APIC frame in ID3v2, the media type and 
description are prepended with a 4-byte length field instead of being 
0x00 delimited strings. A FLAC file MAY contain one or more picture 
metadata blocks.<a href="#section-8.8-1" class="pilcrow">¶</a></p>
<p id="section-8.8-2">Note that while the length fields for media type, 
description, and picture data are 4 bytes in length and could in theory 
code for a size up to 4 GiB, the total metadata block size cannot exceed
 what can be described by the metadata block header, i.e., 16 MiB.<a href="#section-8.8-2" class="pilcrow">¶</a></p>
<p id="section-8.8-3">Instead of picture data, the picture metadata block can also contain an URI as described in <span>[<a href="#RFC3986" class="cite xref">RFC3986</a>]</span>.<a href="#section-8.8-3" class="pilcrow">¶</a></p>
<p id="section-8.8-4">The structure of a picture metadata block is enumerated in the following table.<a href="#section-8.8-4" class="pilcrow">¶</a></p>
<table class="center" id="table-12">
          <caption><a href="#table-12" class="selfRef">Table 12</a></caption>
<thead>
            <tr>
              <th class="text-left" rowspan="1" colspan="1">Data</th>
              <th class="text-left" rowspan="1" colspan="1">Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(32)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">The picture type according to next table</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(32)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">The length of the media type string in bytes.</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(n*8)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">The media type string as specified by <span>[<a href="#RFC2046" class="cite xref">RFC2046</a>]</span>, or the text string <code>--&gt;</code>
 to signify that the data part is a URI of the picture instead of the 
picture data itself. This field must be in printable ASCII characters 
0x20-0x7E.</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(32)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">The length of the description string in bytes.</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(n*8)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">The description of the picture, in UTF-8.</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(32)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">The width of the picture in pixels.</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(32)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">The height of the picture in pixels.</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(32)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">The color depth of the picture in bits per pixel.</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(32)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">For indexed-color pictures (e.g., GIF), the number of colors used, or <code>0</code> for non-indexed pictures.</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(32)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">The length of the picture data in bytes.</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>u(n*8)</code>
</td>
              <td class="text-left" rowspan="1" colspan="1">The binary picture data.</td>
            </tr>
          </tbody>
        </table>
<p id="section-8.8-6">The height, width, color depth, and 'number of 
colors' fields are for informational purposes only. Applications MUST 
NOT use them in decoding the picture or deciding how to display it, but 
MAY use them to decide whether to process a block or not (e.g., when 
selecting between different picture blocks) and MAY show them to the 
user. If a picture has no concept for any of these fields (e.g., vector 
images may not have a height or width in pixels) or the content of any 
field is unknown, the affected fields MUST be set to zero.<a href="#section-8.8-6" class="pilcrow">¶</a></p>
<p id="section-8.8-7">The following table contains all the defined 
picture types. Values other than those listed in the table are reserved.
 There MAY only be one each of picture types 1 and 2 in a file. In 
general practice, many FLAC playback devices and software display the 
contents of a picture metadata block with picture type 3 (front cover) 
during playback, if present.<a href="#section-8.8-7" class="pilcrow">¶</a></p>
<table class="center" id="table-13">
          <caption><a href="#table-13" class="selfRef">Table 13</a></caption>
<thead>
            <tr>
              <th class="text-left" rowspan="1" colspan="1">Value</th>
              <th class="text-left" rowspan="1" colspan="1">Picture type</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">0</td>
              <td class="text-left" rowspan="1" colspan="1">Other</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">1</td>
              <td class="text-left" rowspan="1" colspan="1">PNG file icon of 32x32 pixels, see <span>[<a href="#RFC2083" class="cite xref">RFC2083</a>]</span>
</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">2</td>
              <td class="text-left" rowspan="1" colspan="1">General file icon</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">3</td>
              <td class="text-left" rowspan="1" colspan="1">Front cover</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">4</td>
              <td class="text-left" rowspan="1" colspan="1">Back cover</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">5</td>
              <td class="text-left" rowspan="1" colspan="1">Liner notes page</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">6</td>
              <td class="text-left" rowspan="1" colspan="1">Media label (e.g., CD, Vinyl or Cassette label)</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">7</td>
              <td class="text-left" rowspan="1" colspan="1">Lead artist, lead performer, or soloist</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">8</td>
              <td class="text-left" rowspan="1" colspan="1">Artist or performer</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">9</td>
              <td class="text-left" rowspan="1" colspan="1">Conductor</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">10</td>
              <td class="text-left" rowspan="1" colspan="1">Band or orchestra</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">11</td>
              <td class="text-left" rowspan="1" colspan="1">Composer</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">12</td>
              <td class="text-left" rowspan="1" colspan="1">Lyricist or text writer</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">13</td>
              <td class="text-left" rowspan="1" colspan="1">Recording location</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">14</td>
              <td class="text-left" rowspan="1" colspan="1">During recording</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">15</td>
              <td class="text-left" rowspan="1" colspan="1">During performance</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">16</td>
              <td class="text-left" rowspan="1" colspan="1">Movie or video screen capture</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">17</td>
              <td class="text-left" rowspan="1" colspan="1">A bright colored fish</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">18</td>
              <td class="text-left" rowspan="1" colspan="1">Illustration</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">19</td>
              <td class="text-left" rowspan="1" colspan="1">Band or artist logotype</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">20</td>
              <td class="text-left" rowspan="1" colspan="1">Publisher or studio logotype</td>
            </tr>
          </tbody>
        </table>
<p id="section-8.8-9">The origin and use of value 17, "A bright colored 
fish", is unclear. This was copied to maintain compatibility with ID3v2.
 Applications are discouraged from offering this value to users when 
embedding a picture.<a href="#section-8.8-9" class="pilcrow">¶</a></p>
<p id="section-8.8-10">If not a picture but a URI is contained in this block, the following points apply:<a href="#section-8.8-10" class="pilcrow">¶</a></p>
<ul class="compact">
<li class="compact" id="section-8.8-11.1">The URI can be either in 
absolute or relative form. If an URI is in relative form, it is related 
to the URI of the FLAC content processed.<a href="#section-8.8-11.1" class="pilcrow">¶</a>
</li>
          <li class="compact" id="section-8.8-11.2">Applications MUST 
obtain explicit user approval to retrieve images via remote protocols 
and to retrieve local images not located in the same directory as the 
FLAC file being processed.<a href="#section-8.8-11.2" class="pilcrow">¶</a>
</li>
          <li class="compact" id="section-8.8-11.3">Applications supporting linked images MUST handle unavailability of URIs gracefully. They MAY report unavailability to the user.<a href="#section-8.8-11.3" class="pilcrow">¶</a>
</li>
          <li class="compact" id="section-8.8-11.4">Applications MAY reject processing URIs for any reason, in particular for security or privacy reasons.<a href="#section-8.8-11.4" class="pilcrow">¶</a>
</li>
        </ul>
</section>
</div>
</section>
</div>
<div id="frame-structure">
<section id="section-9">
      <h2 id="name-frame-structure">
<a href="#section-9" class="section-number selfRef">9. </a><a href="#name-frame-structure" class="section-name selfRef">Frame structure</a>
      </h2>
<p id="section-9-1">Directly after the last metadata block, one or more 
frames follow. Each frame consists of a frame header, one or more 
subframes, padding zero bits to achieve byte-alignment, and a frame 
footer. The number of subframes in each frame is equal to the number of 
audio channels.<a href="#section-9-1" class="pilcrow">¶</a></p>
<p id="section-9-2">Each frame header stores the audio sample rate, 
number of bits per sample, and number of channels independently of the 
streaminfo metadata block and other frame headers. This was done to 
permit multicasting of FLAC files, but it also allows these properties 
to change mid-stream. Because not all environments in which FLAC 
decoders are used are able to cope with changes to these properties 
during playback, a decoder MAY choose to stop decoding on such a change.
 A decoder that does not check for such a change could be vulnerable to 
buffer overflows. See also <a href="#security-considerations" class="auto internal xref">Section 12</a>.<a href="#section-9-2" class="pilcrow">¶</a></p>
<p id="section-9-3">Note that storing audio with changing audio 
properties in FLAC results in various practical problems. For example, 
these changes of audio properties must happen on a frame boundary, or 
the process will not be lossless. When a variable block size is chosen 
to accommodate this, note that blocks smaller than 16 samples are not 
allowed and it is therefore not possible to store an audio stream in 
which these properties change within 16 samples of the last change or 
the start of the file. Also, since the streaminfo metadata block can 
only accommodate a single set of properties, it is only valid for part 
of such an audio stream. Instead, it is RECOMMENDED to store an audio 
stream with changing properties in FLAC encapsulated in a container 
capable of handling such changes, as these do not suffer from the 
mentioned limitations. See <a href="#container-mappings" class="auto internal xref">Section 10</a> for details.<a href="#section-9-3" class="pilcrow">¶</a></p>
<div id="frame-header">
<section id="section-9.1">
        <h3 id="name-frame-header">
<a href="#section-9.1" class="section-number selfRef">9.1. </a><a href="#name-frame-header" class="section-name selfRef">Frame header</a>
        </h3>
<p id="section-9.1-1">Each frame MUST start on a byte boundary and 
starts with the 15-bit frame sync code 0b111111111111100. Following the 
sync code is the blocking strategy bit, which MUST NOT change during the
 audio stream. The blocking strategy bit is 0 for a fixed block size 
stream or 1 for a variable block size stream. If the blocking strategy 
is known, a decoder can include this bit when searching for the start of
 a frame to reduce the possibility of encountering a false positive, as 
the first two bytes of a frame are either 0xFFF8 for a fixed block size 
stream or 0xFFF9 for a variable block size stream.<a href="#section-9.1-1" class="pilcrow">¶</a></p>
<div id="block-size-bits">
<section id="section-9.1.1">
          <h4 id="name-block-size-bits">
<a href="#section-9.1.1" class="section-number selfRef">9.1.1. </a><a href="#name-block-size-bits" class="section-name selfRef">Block size bits</a>
          </h4>
<p id="section-9.1.1-1">Following the frame sync code and blocking 
strategy bit are 4 bits (the first 4 bits of the third byte of each 
frame) referred to as the block size bits. Their value relates to the 
block size according to the following table, where v is the value of the
 4 bits as an unsigned number. If the block size bits code for an 
uncommon block size, this is stored after the coded number, see <a href="#uncommon-block-size" class="auto internal xref">Section 9.1.6</a>.<a href="#section-9.1.1-1" class="pilcrow">¶</a></p>
<table class="center" id="table-14">
            <caption><a href="#table-14" class="selfRef">Table 14</a></caption>
<thead>
              <tr>
                <th class="text-left" rowspan="1" colspan="1">Value</th>
                <th class="text-left" rowspan="1" colspan="1">Block size</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0b0000</td>
                <td class="text-left" rowspan="1" colspan="1">reserved</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0b0001</td>
                <td class="text-left" rowspan="1" colspan="1">192</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0b0010 - 0b0101</td>
                <td class="text-left" rowspan="1" colspan="1">144 * (2^v), i.e., 576, 1152, 2304, or 4608</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0b0110</td>
                <td class="text-left" rowspan="1" colspan="1">uncommon block size minus 1 stored as an 8-bit number</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0b0111</td>
                <td class="text-left" rowspan="1" colspan="1">uncommon block size minus 1 stored as a 16-bit number</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0b1000 - 0b1111</td>
                <td class="text-left" rowspan="1" colspan="1">2^v, i.e., 256, 512, 1024, 2048, 4096, 8192, 16384, or 32768</td>
              </tr>
            </tbody>
          </table>
</section>
</div>
<div id="sample-rate-bits">
<section id="section-9.1.2">
          <h4 id="name-sample-rate-bits">
<a href="#section-9.1.2" class="section-number selfRef">9.1.2. </a><a href="#name-sample-rate-bits" class="section-name selfRef">Sample rate bits</a>
          </h4>
<p id="section-9.1.2-1">The next 4 bits (the last 4 bits of the third 
byte of each frame), referred to as the sample rate bits, contain the 
sample rate of the audio according to the following table. If the sample
 rate bits code for an uncommon sample rate, this is stored after the 
uncommon block size or after the coded number if no uncommon block size 
was used. See <a href="#uncommon-sample-rate" class="auto internal xref">Section 9.1.7</a>.<a href="#section-9.1.2-1" class="pilcrow">¶</a></p>
<table class="center" id="table-15">
            <caption><a href="#table-15" class="selfRef">Table 15</a></caption>
<thead>
              <tr>
                <th class="text-left" rowspan="1" colspan="1">Value</th>
                <th class="text-left" rowspan="1" colspan="1">Sample rate</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0b0000</td>
                <td class="text-left" rowspan="1" colspan="1">sample rate only stored in the streaminfo metadata block</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0b0001</td>
                <td class="text-left" rowspan="1" colspan="1">88.2 kHz</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0b0010</td>
                <td class="text-left" rowspan="1" colspan="1">176.4 kHz</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0b0011</td>
                <td class="text-left" rowspan="1" colspan="1">192 kHz</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0b0100</td>
                <td class="text-left" rowspan="1" colspan="1">8 kHz</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0b0101</td>
                <td class="text-left" rowspan="1" colspan="1">16 kHz</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0b0110</td>
                <td class="text-left" rowspan="1" colspan="1">22.05 kHz</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0b0111</td>
                <td class="text-left" rowspan="1" colspan="1">24 kHz</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0b1000</td>
                <td class="text-left" rowspan="1" colspan="1">32 kHz</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0b1001</td>
                <td class="text-left" rowspan="1" colspan="1">44.1 kHz</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0b1010</td>
                <td class="text-left" rowspan="1" colspan="1">48 kHz</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0b1011</td>
                <td class="text-left" rowspan="1" colspan="1">96 kHz</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0b1100</td>
                <td class="text-left" rowspan="1" colspan="1">uncommon sample rate in kHz stored as an 8-bit number</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0b1101</td>
                <td class="text-left" rowspan="1" colspan="1">uncommon sample rate in Hz stored as a 16-bit number</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0b1110</td>
                <td class="text-left" rowspan="1" colspan="1">uncommon sample rate in Hz divided by 10, stored as a 16-bit number</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0b1111</td>
                <td class="text-left" rowspan="1" colspan="1">forbidden</td>
              </tr>
            </tbody>
          </table>
</section>
</div>
<div id="channels-bits">
<section id="section-9.1.3">
          <h4 id="name-channels-bits">
<a href="#section-9.1.3" class="section-number selfRef">9.1.3. </a><a href="#name-channels-bits" class="section-name selfRef">Channels bits</a>
          </h4>
<p id="section-9.1.3-1">The next 4 bits (the first 4 bits of the fourth 
byte of each frame), referred to as the channels bits, contain both the 
number of channels of the audio as well as any stereo decorrelation used
 according to the following table.<a href="#section-9.1.3-1" class="pilcrow">¶</a></p>
<p id="section-9.1.3-2">If a channel layout different than the ones 
listed in the following table is used, this can be signaled with a 
WAVEFORMATEXTENSIBLE_CHANNEL_MASK tag in a Vorbis comment metadata 
block, see <a href="#channel-mask" class="auto internal xref">Section 8.6.2</a>
 for details. Note that even when such a different channel layout is 
specified with a WAVEFORMATEXTENSIBLE_CHANNEL_MASK and the channel 
ordering in the following table is overridden, the channels bits still 
contain the actual number of channels coded in the frame. For details on
 the way left/side, right/side, and mid/side stereo are coded, see <a href="#interchannel-decorrelation" class="auto internal xref">Section 4.2</a>.<a href="#section-9.1.3-2" class="pilcrow">¶</a></p>
<table class="center" id="table-16">
            <caption><a href="#table-16" class="selfRef">Table 16</a></caption>
<thead>
              <tr>
                <th class="text-left" rowspan="1" colspan="1">Value</th>
                <th class="text-left" rowspan="1" colspan="1">Channels</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0b0000</td>
                <td class="text-left" rowspan="1" colspan="1">1 channel: mono</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0b0001</td>
                <td class="text-left" rowspan="1" colspan="1">2 channels: left, right</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0b0010</td>
                <td class="text-left" rowspan="1" colspan="1">3 channels: left, right, center</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0b0011</td>
                <td class="text-left" rowspan="1" colspan="1">4 channels: front left, front right, back left, back right</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0b0100</td>
                <td class="text-left" rowspan="1" colspan="1">5 channels: front left, front right, front center, back/surround left, back/surround right</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0b0101</td>
                <td class="text-left" rowspan="1" colspan="1">6 channels: front left, front right, front center, LFE, back/surround left, back/surround right</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0b0110</td>
                <td class="text-left" rowspan="1" colspan="1">7 channels: front left, front right, front center, LFE, back center, side left, side right</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0b0111</td>
                <td class="text-left" rowspan="1" colspan="1">8 channels: front left, front right, front center, LFE, back left, back right, side left, side right</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0b1000</td>
                <td class="text-left" rowspan="1" colspan="1">2 channels, left, right, stored as left/side stereo</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0b1001</td>
                <td class="text-left" rowspan="1" colspan="1">2 channels, left, right, stored as right/side stereo</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0b1010</td>
                <td class="text-left" rowspan="1" colspan="1">2 channels, left, right, stored as mid/side stereo</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0b1011 - 0b1111</td>
                <td class="text-left" rowspan="1" colspan="1">reserved</td>
              </tr>
            </tbody>
          </table>
</section>
</div>
<div id="bit-depth-bits">
<section id="section-9.1.4">
          <h4 id="name-bit-depth-bits">
<a href="#section-9.1.4" class="section-number selfRef">9.1.4. </a><a href="#name-bit-depth-bits" class="section-name selfRef">Bit depth bits</a>
          </h4>
<p id="section-9.1.4-1">The next 3 bits (bits 5, 6 and 7 of each fourth 
byte of each frame) contain the bit depth of the audio according to the 
following table.<a href="#section-9.1.4-1" class="pilcrow">¶</a></p>
<table class="center" id="table-17">
            <caption><a href="#table-17" class="selfRef">Table 17</a></caption>
<thead>
              <tr>
                <th class="text-left" rowspan="1" colspan="1">Value</th>
                <th class="text-left" rowspan="1" colspan="1">Bit depth</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0b000</td>
                <td class="text-left" rowspan="1" colspan="1">bit depth only stored in the streaminfo metadata block</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0b001</td>
                <td class="text-left" rowspan="1" colspan="1">8 bits per sample</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0b010</td>
                <td class="text-left" rowspan="1" colspan="1">12 bits per sample</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0b011</td>
                <td class="text-left" rowspan="1" colspan="1">reserved</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0b100</td>
                <td class="text-left" rowspan="1" colspan="1">16 bits per sample</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0b101</td>
                <td class="text-left" rowspan="1" colspan="1">20 bits per sample</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0b110</td>
                <td class="text-left" rowspan="1" colspan="1">24 bits per sample</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0b111</td>
                <td class="text-left" rowspan="1" colspan="1">32 bits per sample</td>
              </tr>
            </tbody>
          </table>
<p id="section-9.1.4-3">The next bit is reserved and MUST be zero.<a href="#section-9.1.4-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="coded-number">
<section id="section-9.1.5">
          <h4 id="name-coded-number">
<a href="#section-9.1.5" class="section-number selfRef">9.1.5. </a><a href="#name-coded-number" class="section-name selfRef">Coded number</a>
          </h4>
<p id="section-9.1.5-1">Following the reserved bit (starting at the 
fifth byte of the frame) is either a sample or a frame number, which 
will be referred to as the coded number. When dealing with variable 
block size streams, the sample number of the first sample in the frame 
is encoded. When the file contains a fixed block size stream, the frame 
number is encoded. See <a href="#frame-header" class="auto internal xref">Section 9.1</a>
 on the blocking strategy bit which signals whether a stream is a fixed 
block size stream or a variable block size stream. Also see <a href="#addition-of-blocking-strategy-bit" class="auto internal xref">Appendix B.1</a>.<a href="#section-9.1.5-1" class="pilcrow">¶</a></p>
<p id="section-9.1.5-2">The coded number is stored in a variable length code like UTF-8 as defined in <span>[<a href="#RFC3629" class="cite xref">RFC3629</a>]</span>, but extended to a maximum of 36 bits unencoded, 7 bytes encoded.<a href="#section-9.1.5-2" class="pilcrow">¶</a></p>
<p id="section-9.1.5-3">When a frame number is encoded, the value MUST 
NOT be larger than what fits a value of 31 bits unencoded or 6 bytes 
encoded. Please note that as most general purpose UTF-8 encoders and 
decoders follow <span>[<a href="#RFC3629" class="cite xref">RFC3629</a>]</span>,
 they will not be able to handle these extended codes. Furthermore, 
while UTF-8 is specifically used to encode characters, FLAC uses it to 
encode numbers instead. To encode or decode a coded number, follow the 
procedures of Section 3 of <span>[<a href="#RFC3629" class="cite xref">RFC3629</a>]</span>, but instead of using a character number, use a frame or sample number, and instead of the table in Section 3 of <span>[<a href="#RFC3629" class="cite xref">RFC3629</a>]</span>, use the extended table below.<a href="#section-9.1.5-3" class="pilcrow">¶</a></p>
<table class="center" id="table-18">
            <caption><a href="#table-18" class="selfRef">Table 18</a></caption>
<thead>
              <tr>
                <th class="text-left" rowspan="1" colspan="1">Number range (hexadecimal)</th>
                <th class="text-left" rowspan="1" colspan="1">Octet sequence (binary)</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0000 0000 0000 -<br>
0000 0000 007F</td>
                <td class="text-left" rowspan="1" colspan="1">0xxxxxxx</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0000 0000 0080 -<br>
0000 0000 07FF</td>
                <td class="text-left" rowspan="1" colspan="1">110xxxxx 10xxxxxx</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0000 0000 0800 -<br>
0000 0000 FFFF</td>
                <td class="text-left" rowspan="1" colspan="1">1110xxxx 10xxxxxx 10xxxxxx</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0000 0001 0000 -<br>
0000 001F FFFF</td>
                <td class="text-left" rowspan="1" colspan="1">11110xxx 10xxxxxx 10xxxxxx 10xxxxxx</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0000 0020 0000 -<br>
0000 03FF FFFF</td>
                <td class="text-left" rowspan="1" colspan="1">111110xx 10xxxxxx 10xxxxxx 10xxxxxx 10xxxxxx</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0000 0400 0000 -<br>
0000 7FFF FFFF</td>
                <td class="text-left" rowspan="1" colspan="1">1111110x 10xxxxxx 10xxxxxx 10xxxxxx 10xxxxxx 10xxxxxx</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0000 8000 0000 -<br>
000F FFFF FFFF</td>
                <td class="text-left" rowspan="1" colspan="1">11111110 10xxxxxx 10xxxxxx 10xxxxxx 10xxxxxx 10xxxxxx 10xxxxxx</td>
              </tr>
            </tbody>
          </table>
<p id="section-9.1.5-5">If the coded number is a frame number, it MUST 
be equal to the number of frames preceding the current frame. If the 
coded number is a sample number, it MUST be equal to the number of 
samples preceding the current frame. In a stream where these 
requirements are not met, seeking is not (reliably) possible.<a href="#section-9.1.5-5" class="pilcrow">¶</a></p>
<p id="section-9.1.5-6">For example, a frame that belongs to a variable 
block size stream and has exactly 51 billion samples preceding it, has 
its coded number constructed as follows.<a href="#section-9.1.5-6" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-9.1.5-7">
<pre>Octets 1-5
0b11111110 0b10101111 0b10011111 0b10110101 0b10100011
               ^^^^^^     ^^^^^^     ^^^^^^     ^^^^^^
                 |          |          |      Bits 18-13
                 |          |      Bits 24-19
                 |      Bits 30-25
             Bits 36-31

Octets 6-7
0b10111000 0b10000000
    ^^^^^^     ^^^^^^
      |       Bits 6-1
  Bits 12-7

</pre><a href="#section-9.1.5-7" class="pilcrow">¶</a>
</div>
<p id="section-9.1.5-8">A decoder that relies on the coded number during
 seeking could be vulnerable to buffer overflows or getting stuck in an 
infinite loop if it seeks in a stream where the coded numbers are not 
strictly increasing or otherwise not valid. See also <a href="#security-considerations" class="auto internal xref">Section 12</a>.<a href="#section-9.1.5-8" class="pilcrow">¶</a></p>
</section>
</div>
<div id="uncommon-block-size">
<section id="section-9.1.6">
          <h4 id="name-uncommon-block-size">
<a href="#section-9.1.6" class="section-number selfRef">9.1.6. </a><a href="#name-uncommon-block-size" class="section-name selfRef">Uncommon block size</a>
          </h4>
<p id="section-9.1.6-1">If the block size bits defined earlier in this 
section were 0b0110 or 0b0111 (uncommon block size minus 1 stored), this
 follows the coded number as either an 8-bit or a 16-bit unsigned number
 coded big-endian. A value of 65535 (corresponding to a block size of 
65536) is forbidden and MUST NOT be used, because such a block size 
cannot be represented in the streaminfo metadata block. A value from 0 
up to (and including) 14, which corresponds to a block size from 1 to 
15, is only valid for the last frame in a stream and MUST NOT be used 
for any other frame. See also <a href="#streaminfo" class="auto internal xref">Section 8.2</a>.<a href="#section-9.1.6-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="uncommon-sample-rate">
<section id="section-9.1.7">
          <h4 id="name-uncommon-sample-rate">
<a href="#section-9.1.7" class="section-number selfRef">9.1.7. </a><a href="#name-uncommon-sample-rate" class="section-name selfRef">Uncommon sample rate</a>
          </h4>
<p id="section-9.1.7-1">Following the uncommon block size (or the coded 
number if no uncommon block size is stored) is the sample rate, if the 
sample rate bits were 0b1100, 0b1101, or 0b1110 (uncommon sample rate 
stored), as either an 8-bit or a 16-bit unsigned number coded 
big-endian.<a href="#section-9.1.7-1" class="pilcrow">¶</a></p>
<p id="section-9.1.7-2">The sample rate MUST NOT be 0 when the subframe 
contains audio. A sample rate of 0 MAY be used when non-audio is 
represented. See <a href="#streaminfo" class="auto internal xref">Section 8.2</a> for details.<a href="#section-9.1.7-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="frame-header-crc">
<section id="section-9.1.8">
          <h4 id="name-frame-header-crc">
<a href="#section-9.1.8" class="section-number selfRef">9.1.8. </a><a href="#name-frame-header-crc" class="section-name selfRef">Frame header CRC</a>
          </h4>
<p id="section-9.1.8-1">Finally, after either the frame/sample number, 
an uncommon block size, or an uncommon sample rate, depending on whether
 the latter two are stored, is an 8-bit CRC. This CRC is initialized 
with 0 and has the polynomial x^8 + x^2 + x^1 + x^0. This CRC covers the
 whole frame header before the CRC, including the sync code.<a href="#section-9.1.8-1" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="subframes">
<section id="section-9.2">
        <h3 id="name-subframes">
<a href="#section-9.2" class="section-number selfRef">9.2. </a><a href="#name-subframes" class="section-name selfRef">Subframes</a>
        </h3>
<p id="section-9.2-1">Following the frame header are a number of 
subframes equal to the number of audio channels. Note that as subframes 
contain a bitstream that does not necessarily has to be a whole number 
of bytes, only the first subframe always starts at a byte boundary.<a href="#section-9.2-1" class="pilcrow">¶</a></p>
<div id="subframe-header">
<section id="section-9.2.1">
          <h4 id="name-subframe-header">
<a href="#section-9.2.1" class="section-number selfRef">9.2.1. </a><a href="#name-subframe-header" class="section-name selfRef">Subframe header</a>
          </h4>
<p id="section-9.2.1-1">Each subframe starts with a header. The first 
bit of the header MUST be 0, followed by 6 bits describing which 
subframe type is used according to the following table, where v is the 
value of the 6 bits as an unsigned number.<a href="#section-9.2.1-1" class="pilcrow">¶</a></p>
<table class="center" id="table-19">
            <caption><a href="#table-19" class="selfRef">Table 19</a></caption>
<thead>
              <tr>
                <th class="text-left" rowspan="1" colspan="1">Value</th>
                <th class="text-left" rowspan="1" colspan="1">Subframe type</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0b000000</td>
                <td class="text-left" rowspan="1" colspan="1">Constant subframe</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0b000001</td>
                <td class="text-left" rowspan="1" colspan="1">Verbatim subframe</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0b000010 - 0b000111</td>
                <td class="text-left" rowspan="1" colspan="1">reserved</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0b001000 - 0b001100</td>
                <td class="text-left" rowspan="1" colspan="1">Subframe with a fixed predictor of order v-8, i.e., 0, 1, 2, 3 or 4</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0b001101 - 0b011111</td>
                <td class="text-left" rowspan="1" colspan="1">reserved</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0b100000 - 0b111111</td>
                <td class="text-left" rowspan="1" colspan="1">Subframe with a linear predictor of order v-31, i.e., 1 through 32 (inclusive)</td>
              </tr>
            </tbody>
          </table>
<p id="section-9.2.1-3">Following the subframe type bits is a bit that flags whether the subframe uses any wasted bits (see <a href="#wasted-bits-per-sample" class="auto internal xref">Section 9.2.2</a>).
 If it is 0, the subframe doesn't use any wasted bits and the subframe 
header is complete. If it is 1, the subframe does use wasted bits and 
the number of used wasted bits follows unary coded.<a href="#section-9.2.1-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="wasted-bits-per-sample">
<section id="section-9.2.2">
          <h4 id="name-wasted-bits-per-sample">
<a href="#section-9.2.2" class="section-number selfRef">9.2.2. </a><a href="#name-wasted-bits-per-sample" class="section-name selfRef">Wasted bits per sample</a>
          </h4>
<p id="section-9.2.2-1">Most uncompressed audio file formats can only 
store audio samples with a bit depth that is an integer number of bytes.
 Samples of which the bit depth is not an integer number of bytes are 
usually stored in such formats by padding them with least-significant 
zero bits to a bit depth that is an integer number of bytes. For 
example, shifting a 14-bit sample right by 2 pads it to a 16-bit sample,
 which then has two zero least-significant bits. In this specification, 
these least-significant zero bits are referred to as wasted bits per 
sample or simply wasted bits. They are wasted in the sense that they 
contain no information, but are stored anyway.<a href="#section-9.2.2-1" class="pilcrow">¶</a></p>
<p id="section-9.2.2-2">The FLAC format can optionally take advantage of
 these wasted bits by signaling their presence and coding the subframe 
without them. To do this, the wasted bits per sample flag in a subframe 
header is set to 0 and the number of wasted bits per sample (k) minus 1 
follows the flag in an unary encoding. For example, if k is 3, 0b001 
follows. If k = 0, the wasted bits per sample flag is 0 and no unary 
coded k follows. In this document, if a subframe header signals a 
certain number of wasted bits, it is said it 'uses' these wasted bits.<a href="#section-9.2.2-2" class="pilcrow">¶</a></p>
<p id="section-9.2.2-3">If a subframe uses wasted bits (i.e., k is not 
equal to 0), samples are coded ignoring k least-significant bits. For 
example, if a frame not employing stereo decorrelation specifies a 
sample size of 16 bits per sample in the frame header and k of a 
subframe is 3, samples in the subframe are coded as 13 bits per sample. 
For more details, see <a href="#constant-subframe" class="auto internal xref">Section 9.2.3</a>
 on how the bit depth of a subframe is calculated. A decoder MUST add k 
least-significant zero bits by shifting left (padding) after decoding a 
subframe sample. If the frame has left/side, right/side, or mid/side 
stereo, a decoder MUST perform padding on the subframes before restoring
 the channels to left and right. The number of wasted bits per sample 
MUST be such that the resulting number of bits per sample (of which the 
calculation is explained in <a href="#constant-subframe" class="auto internal xref">Section 9.2.3</a>) is larger than zero.<a href="#section-9.2.2-3" class="pilcrow">¶</a></p>
<p id="section-9.2.2-4">Besides audio files that have a certain number 
of wasted bits for the whole file, there exist audio files in which the 
number of wasted bits varies. There are DVD-Audio discs in which blocks 
of samples have had their least-significant bits selectively zeroed to 
slightly improve the compression of their otherwise lossless Meridian 
Lossless Packing codec, see <span>[<a href="#MLP" class="cite xref">MLP</a>]</span>. There are also audio processors like lossyWAV, see <span>[<a href="#lossyWAV" class="cite xref">lossyWAV</a>]</span>,
 which zero a number of least-sigificant bits for a block of samples, 
increasing the compression in a non-lossless way. Because of this, the 
number of wasted bits k MAY change between frames and MAY differ between
 subframes. If the number of wasted bits changes halfway through a 
subframe (e.g., the first part has 2 wasted bits and the second part has
 4 wasted bits) the subframe uses the lowest number of wasted bits, as 
otherwise non-zero bits would be discarded and the process would not be 
lossless.<a href="#section-9.2.2-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="constant-subframe">
<section id="section-9.2.3">
          <h4 id="name-constant-subframe">
<a href="#section-9.2.3" class="section-number selfRef">9.2.3. </a><a href="#name-constant-subframe" class="section-name selfRef">Constant subframe</a>
          </h4>
<p id="section-9.2.3-1">In a constant subframe, only a single sample is 
stored. This sample is stored as an integer number coded big-endian, 
signed two's complement. The number of bits used to store this sample 
depends on the bit depth of the current subframe. The bit depth of a 
subframe is equal to the bit depth as coded in the frame header (see <a href="#bit-depth-bits" class="auto internal xref">Section 9.1.4</a>), minus the number of used wasted bits coded in the subframe header (see <a href="#wasted-bits-per-sample" class="auto internal xref">Section 9.2.2</a>). If a subframe is a side subframe (see <a href="#interchannel-decorrelation" class="auto internal xref">Section 4.2</a>), the bit depth of that subframe is increased by 1 bit.<a href="#section-9.2.3-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="verbatim-subframe">
<section id="section-9.2.4">
          <h4 id="name-verbatim-subframe">
<a href="#section-9.2.4" class="section-number selfRef">9.2.4. </a><a href="#name-verbatim-subframe" class="section-name selfRef">Verbatim subframe</a>
          </h4>
<p id="section-9.2.4-1">A verbatim subframe stores all samples unencoded in sequential order. See <a href="#constant-subframe" class="auto internal xref">Section 9.2.3</a>
 on how a sample is stored unencoded. The number of samples that need to
 be stored in a subframe is given by the block size in the frame header.<a href="#section-9.2.4-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="fixed-predictor-subframe">
<section id="section-9.2.5">
          <h4 id="name-fixed-predictor-subframe">
<a href="#section-9.2.5" class="section-number selfRef">9.2.5. </a><a href="#name-fixed-predictor-subframe" class="section-name selfRef">Fixed predictor subframe</a>
          </h4>
<p id="section-9.2.5-1">Five different fixed predictors are defined in 
the following table, one for each prediction order 0 through 4. In the 
table is also a derivation, which explains the rationale for choosing 
these fixed predictors.<a href="#section-9.2.5-1" class="pilcrow">¶</a></p>
<table class="center" id="table-20">
            <caption><a href="#table-20" class="selfRef">Table 20</a></caption>
<thead>
              <tr>
                <th class="text-left" rowspan="1" colspan="1">Order</th>
                <th class="text-left" rowspan="1" colspan="1">Prediction</th>
                <th class="text-left" rowspan="1" colspan="1">Derivation</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0</td>
                <td class="text-left" rowspan="1" colspan="1">0</td>
                <td class="text-left" rowspan="1" colspan="1">N/A</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">1</td>
                <td class="text-left" rowspan="1" colspan="1">a(n-1)</td>
                <td class="text-left" rowspan="1" colspan="1">N/A</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">2</td>
                <td class="text-left" rowspan="1" colspan="1">2 * a(n-1) - a(n-2)</td>
                <td class="text-left" rowspan="1" colspan="1">a(n-1) + a'(n-1)</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">3</td>
                <td class="text-left" rowspan="1" colspan="1">3 * a(n-1) - 3 * a(n-2) + a(n-3)</td>
                <td class="text-left" rowspan="1" colspan="1">a(n-1) + a'(n-1) + a''(n-1)</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">4</td>
                <td class="text-left" rowspan="1" colspan="1">4 * a(n-1) - 6 * a(n-2) + 4 * a(n-3) - a(n-4)</td>
                <td class="text-left" rowspan="1" colspan="1">a(n-1) + a'(n-1) + a''(n-1) + a'''(n-1)</td>
              </tr>
            </tbody>
          </table>
<p id="section-9.2.5-3">Where<a href="#section-9.2.5-3" class="pilcrow">¶</a></p>
<ul class="compact">
<li class="compact" id="section-9.2.5-4.1">n is the number of the sample being predicted.<a href="#section-9.2.5-4.1" class="pilcrow">¶</a>
</li>
            <li class="compact" id="section-9.2.5-4.2">a(n) is the sample being predicted.<a href="#section-9.2.5-4.2" class="pilcrow">¶</a>
</li>
            <li class="compact" id="section-9.2.5-4.3">a(n-1) is the sample before the one being predicted.<a href="#section-9.2.5-4.3" class="pilcrow">¶</a>
</li>
            <li class="compact" id="section-9.2.5-4.4">a'(n-1) is the 
difference between the previous sample and the sample before that, i.e.,
 a(n-1) - a(n-2). This is the closest available first-order discrete 
derivative.<a href="#section-9.2.5-4.4" class="pilcrow">¶</a>
</li>
            <li class="compact" id="section-9.2.5-4.5">a''(n-1) is a'(n-1) - a'(n-2) or the closest available second-order discrete derivative.<a href="#section-9.2.5-4.5" class="pilcrow">¶</a>
</li>
            <li class="compact" id="section-9.2.5-4.6">a'''(n-1) is a''(n-1) - a''(n-2) or the closest available third-order discrete derivative.<a href="#section-9.2.5-4.6" class="pilcrow">¶</a>
</li>
          </ul>
<p id="section-9.2.5-5">As a predictor makes use of samples preceding 
the sample that is predicted, it can only be used when enough samples 
are known. As each subframe in FLAC is coded completely independently, 
the first few samples in each subframe cannot be predicted. Therefore, a
 number of so-called warm-up samples equal to the predictor order is 
stored. These are stored unencoded, bypassing the predictor and residual
 coding stages. See <a href="#constant-subframe" class="auto internal xref">Section 9.2.3</a> on how samples are stored unencoded. The table below defines how a fixed predictor subframe appears in the bitstream.<a href="#section-9.2.5-5" class="pilcrow">¶</a></p>
<table class="center" id="table-21">
            <caption><a href="#table-21" class="selfRef">Table 21</a></caption>
<thead>
              <tr>
                <th class="text-left" rowspan="1" colspan="1">Data</th>
                <th class="text-left" rowspan="1" colspan="1">Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>s(n)</code>
</td>
                <td class="text-left" rowspan="1" colspan="1">Unencoded warm-up samples (n = subframe's bits per sample * predictor order).</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Coded residual</td>
                <td class="text-left" rowspan="1" colspan="1">Coded residual as defined in <a href="#coded-residual" class="auto internal xref">Section 9.2.7</a>
</td>
              </tr>
            </tbody>
          </table>
<p id="section-9.2.5-7">As the fixed predictors are specified, they do 
not have to be stored. The fixed predictor order, which is stored in the
 subframe header, specifies which predictor is used.<a href="#section-9.2.5-7" class="pilcrow">¶</a></p>
<p id="section-9.2.5-8">To encode a signal with a fixed predictor, each 
sample has the corresponding prediction subtracted and sent to the 
residual coder. To decode a signal with a fixed predictor, the residual 
is decoded, and then the prediction can be added for each sample. This 
means that decoding is necessarily a sequential process within a 
subframe, as for each sample, enough fully decoded previous samples are 
needed to calculate the prediction.<a href="#section-9.2.5-8" class="pilcrow">¶</a></p>
<p id="section-9.2.5-9">For fixed predictor order 0, the prediction is 
always 0, thus each residual sample is equal to its corresponding input 
or decoded sample. The difference between a fixed predictor with order 0
 and a verbatim subframe, is that a verbatim subframe stores all samples
 unencoded, while a fixed predictor with order 0 has all its samples 
processed by the residual coder.<a href="#section-9.2.5-9" class="pilcrow">¶</a></p>
<p id="section-9.2.5-10">The first order fixed predictor is comparable 
to how DPCM encoding works, as the resulting residual sample is the 
difference between the corresponding sample and the sample before it. 
The higher order fixed predictors can be understood as polynomials 
fitted to the previous samples.<a href="#section-9.2.5-10" class="pilcrow">¶</a></p>
</section>
</div>
<div id="linear-predictor-subframe">
<section id="section-9.2.6">
          <h4 id="name-linear-predictor-subframe">
<a href="#section-9.2.6" class="section-number selfRef">9.2.6. </a><a href="#name-linear-predictor-subframe" class="section-name selfRef">Linear predictor subframe</a>
          </h4>
<p id="section-9.2.6-1">Whereas fixed predictors are well suited for 
simple signals, using a (non-fixed) linear predictor on more complex 
signals can improve compression by making the residual samples even 
smaller. There is a certain trade-off however, as storing the predictor 
coefficients takes up space as well.<a href="#section-9.2.6-1" class="pilcrow">¶</a></p>
<p id="section-9.2.6-2">In the FLAC format, a predictor is defined by up
 to 32 predictor coefficients and a shift. To form a prediction, each 
coefficient is multiplied by its corresponding past sample, the results 
are summed, and this sum is then shifted. To encode a signal with a 
linear predictor, each sample has the corresponding prediction 
subtracted and sent to the residual coder. To decode a signal with a 
linear predictor, the residual is decoded, and then the prediction can 
be added for each sample. This means that decoding MUST be a sequential 
process within a subframe, as for each sample, enough decoded samples 
are needed to calculate the prediction.<a href="#section-9.2.6-2" class="pilcrow">¶</a></p>
<p id="section-9.2.6-3">The table below defines how a linear predictor subframe appears in the bitstream.<a href="#section-9.2.6-3" class="pilcrow">¶</a></p>
<table class="center" id="table-22">
            <caption><a href="#table-22" class="selfRef">Table 22</a></caption>
<thead>
              <tr>
                <th class="text-left" rowspan="1" colspan="1">Data</th>
                <th class="text-left" rowspan="1" colspan="1">Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>s(n)</code>
</td>
                <td class="text-left" rowspan="1" colspan="1">Unencoded warm-up samples (n = subframe's bits per sample * lpc order).</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>u(4)</code>
</td>
                <td class="text-left" rowspan="1" colspan="1">(Predictor coefficient precision in bits)-1 (NOTE: 0b1111 is forbidden).</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>s(5)</code>
</td>
                <td class="text-left" rowspan="1" colspan="1">Prediction right shift needed in bits.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>s(n)</code>
</td>
                <td class="text-left" rowspan="1" colspan="1">Predictor coefficients (n = predictor coefficient precision * lpc order).</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Coded residual</td>
                <td class="text-left" rowspan="1" colspan="1">Coded residual as defined in <a href="#coded-residual" class="auto internal xref">Section 9.2.7</a>
</td>
              </tr>
            </tbody>
          </table>
<p id="section-9.2.6-5">See <a href="#constant-subframe" class="auto internal xref">Section 9.2.3</a>
 on how the warm-up samples are stored unencoded. The predictor 
coefficients are stored as an integer number coded big-endian, signed 
two's complement, where the number of bits needed for each coefficient 
is defined by the predictor coefficient precision. While the prediction 
right shift is signed two's complement, this number MUST NOT be 
negative, see <a href="#restriction-of-lpc-shift-to-non-negative-values" class="auto internal xref">Appendix B.4</a> for an explanation why this is.<a href="#section-9.2.6-5" class="pilcrow">¶</a></p>
<p id="section-9.2.6-6">Please note that the order in which the predictor coefficients appear in the bitstream corresponds to which <strong>past</strong>
 sample they belong to. In other words, the order of the predictor 
coefficients is opposite to the chronological order of the samples. So, 
the first predictor coefficient has to be multiplied with the sample 
directly before the sample that is being predicted, the second predictor
 coefficient has to be multiplied with the sample before that, etc.<a href="#section-9.2.6-6" class="pilcrow">¶</a></p>
</section>
</div>
<div id="coded-residual">
<section id="section-9.2.7">
          <h4 id="name-coded-residual">
<a href="#section-9.2.7" class="section-number selfRef">9.2.7. </a><a href="#name-coded-residual" class="section-name selfRef">Coded residual</a>
          </h4>
<p id="section-9.2.7-1">The first two bits in a coded residual indicate which coding method is used. See the table below.<a href="#section-9.2.7-1" class="pilcrow">¶</a></p>
<table class="center" id="table-23">
            <caption><a href="#table-23" class="selfRef">Table 23</a></caption>
<thead>
              <tr>
                <th class="text-right" rowspan="1" colspan="1">Value</th>
                <th class="text-left" rowspan="1" colspan="1">Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-right" rowspan="1" colspan="1">0b00</td>
                <td class="text-left" rowspan="1" colspan="1">partitioned Rice code with 4-bit parameters</td>
              </tr>
              <tr>
                <td class="text-right" rowspan="1" colspan="1">0b01</td>
                <td class="text-left" rowspan="1" colspan="1">partitioned Rice code with 5-bit parameters</td>
              </tr>
              <tr>
                <td class="text-right" rowspan="1" colspan="1">0b10 - 0b11</td>
                <td class="text-left" rowspan="1" colspan="1">reserved</td>
              </tr>
            </tbody>
          </table>
<p id="section-9.2.7-3">Both defined coding methods work the same way, 
but differ in the number of bits used for Rice parameters. The 4 bits 
that directly follow the coding method bits form the partition order, 
which is an unsigned number. The rest of the coded residual consists of 
2^(partition order) partitions. For example, if the 4 bits are 0b1000, 
the partition order is 8 and the residual is split up into 2^8 = 256 
partitions.<a href="#section-9.2.7-3" class="pilcrow">¶</a></p>
<p id="section-9.2.7-4">Each partition contains a certain number of 
residual samples. The number of residual samples in the first partition 
is equal to (block size &gt;&gt; partition order) - predictor order, 
i.e., the block size divided by the number of partitions minus the 
predictor order. In all other partitions, the number of residual samples
 is equal to (block size &gt;&gt; partition order).<a href="#section-9.2.7-4" class="pilcrow">¶</a></p>
<p id="section-9.2.7-5">The partition order MUST be such that the block 
size is evenly divisible by the number of partitions. This means, for 
example, that for all odd block sizes, only partition order 0 is 
allowed.  The partition order also MUST be such that the (block size 
&gt;&gt; partition order) is larger than the predictor order. This 
means, for example, that with a block size of 4096 and a predictor order
 of 4, the partition order cannot be larger than 9.<a href="#section-9.2.7-5" class="pilcrow">¶</a></p>
<p id="section-9.2.7-6">Each partition starts with a parameter. If the 
coded residual of a subframe is one with 4-bit Rice parameters (see the 
table at the start of this section), the first 4 bits of each partition 
are either a Rice parameter or an escape code. These 4 bits indicate an 
escape code if they are 0b1111, otherwise they contain the Rice 
parameter as an unsigned number. If the coded residual of the current 
subframe is one with 5-bit Rice parameters, the first 5 bits of each 
partition indicate an escape code if they are 0b11111, otherwise, they 
contain the Rice parameter as an unsigned number as well.<a href="#section-9.2.7-6" class="pilcrow">¶</a></p>
<div id="escaped-partition">
<section id="section-9.2.7.1">
            <h5 id="name-escaped-partition">
<a href="#section-9.2.7.1" class="section-number selfRef">9.2.7.1. </a><a href="#name-escaped-partition" class="section-name selfRef">Escaped partition</a>
            </h5>
<p id="section-9.2.7.1-1">If an escape code was used, the partition does
 not contain a variable-length Rice coded residual, but a fixed-length 
unencoded residual. Directly following the escape code are 5 bits 
containing the number of bits with which each residual sample is stored,
 as an unsigned number. The residual samples themselves are stored 
signed two's complement. For example, when a partition is escaped and 
each residual sample is stored with 3 bits, the number -1 is represented
 as 0b111.<a href="#section-9.2.7.1-1" class="pilcrow">¶</a></p>
<p id="section-9.2.7.1-2">Note that it is possible that the number of 
bits with which each sample is stored is 0, which means all residual 
samples in that partition have a value of 0 and that no bits are used to
 store the samples. In that case, the partition contains nothing except 
the escape code and 0b00000.<a href="#section-9.2.7.1-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="rice-code">
<section id="section-9.2.7.2">
            <h5 id="name-rice-code">
<a href="#section-9.2.7.2" class="section-number selfRef">9.2.7.2. </a><a href="#name-rice-code" class="section-name selfRef">Rice code</a>
            </h5>
<p id="section-9.2.7.2-1">If a Rice parameter was provided for a certain
 partition, that partition contains a Rice coded residual. The residual 
samples, which are signed numbers, are represented by unsigned numbers 
in the Rice code. For positive numbers, the representation is the number
 doubled, for negative numbers, the representation is the number 
multiplied by -2 and has 1 subtracted. This representation of signed 
numbers is also known as zigzag encoding. The zigzag encoded residual is
 called the folded residual.<a href="#section-9.2.7.2-1" class="pilcrow">¶</a></p>
<p id="section-9.2.7.2-2">Each folded residual sample is then split into
 two parts, a most-significant part and a least-significant part. The 
Rice parameter at the start of each partition determines where that 
split lies: it is the number of bits in the least-significant part. Each
 residual sample is then stored by coding the most-significant part as 
unary, followed by the least-significant part as binary.<a href="#section-9.2.7.2-2" class="pilcrow">¶</a></p>
<p id="section-9.2.7.2-3">For example, take a partition with Rice 
parameter 3 containing a folded residual sample with 38 as its value, 
which is 0b100110 in binary. The most-significant part is 0b100 (4) and 
is stored unary as 0b00001. The least-significant part is 0b110 (6) and 
is stored as is. The Rice code word is thus 0b00001110. The Rice code 
words for all residual samples in a partition are stored consecutively.<a href="#section-9.2.7.2-3" class="pilcrow">¶</a></p>
<p id="section-9.2.7.2-4">To decode a Rice code word, zero bits must be 
counted until encountering a one bit, after which a number of bits given
 by the Rice parameter must be read. The count of zero bits is shifted 
left by the Rice parameter (i.e., multiplied by 2 raised to the power 
Rice parameter) and bitwise ORed with (i.e., added to) the read value. 
This is the folded residual value. An even folded residual value is 
shifted right 1 bit (i.e., divided by two) to get the (unfolded) 
residual value. An odd folded residual value is shifted right 1 bit and 
then has all bits flipped (1 added to and divided by -2) to get the 
(unfolded) residual value, subject to negative numbers being signed 
two's complement on the decoding machine.<a href="#section-9.2.7.2-4" class="pilcrow">¶</a></p>
<p id="section-9.2.7.2-5"><a href="#examples" class="auto internal xref">Appendix D</a> shows decoding of a complete coded residual.<a href="#section-9.2.7.2-5" class="pilcrow">¶</a></p>
</section>
</div>
<div id="residual-sample-value-limit">
<section id="section-9.2.7.3">
            <h5 id="name-residual-sample-value-limit">
<a href="#section-9.2.7.3" class="section-number selfRef">9.2.7.3. </a><a href="#name-residual-sample-value-limit" class="section-name selfRef">Residual sample value limit</a>
            </h5>
<p id="section-9.2.7.3-1">All residual sample values MUST be 
representable in the range offered by a 32-bit integer, signed one's 
complement. Equivalently, all residual sample values MUST fall in the 
range offered by a 32-bit integer signed two's complement excluding the 
most negative possible value of that range. This means residual sample 
values MUST NOT have an absolute value equal to, or larger than, 2 to 
the power 31. A FLAC encoder MUST make sure of this. If a FLAC encoder 
is, for a certain subframe, unable to find a suitable predictor for 
which all residual samples fall within said range, it MUST default to 
writing a verbatim subframe. <a href="#numerical-considerations" class="auto internal xref">Appendix A</a>
 explains in which circumstances residual samples are already implicitly
 representable in said range and thus an additional check is not needed.<a href="#section-9.2.7.3-1" class="pilcrow">¶</a></p>
<p id="section-9.2.7.3-2">The reason for this limit is to ensure that 
decoders can use 32-bit integers when processing residuals, simplifying 
decoding. The reason the most negative value of a 32-bit int signed 
two's complement is specifically excluded is to prevent decoders from 
having to implement specific handling of that value, as it cannot be 
negated within a 32-bit signed int, and most library routines 
calculating an absolute value have undefined behavior on processing that
 value.<a href="#section-9.2.7.3-2" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="frame-footer">
<section id="section-9.3">
        <h3 id="name-frame-footer">
<a href="#section-9.3" class="section-number selfRef">9.3. </a><a href="#name-frame-footer" class="section-name selfRef">Frame footer</a>
        </h3>
<p id="section-9.3-1">Following the last subframe is the frame footer. 
If the last subframe is not byte aligned (i.e., the number of bits 
required to store all subframes put together is not divisible by 8), 
zero bits are added until byte alignment is reached. Following this is a
 16-bit CRC, initialized with 0, with the polynomial x^16 + x^15 + x^2 +
 x^0. This CRC covers the whole frame excluding the 16-bit CRC, 
including the sync code.<a href="#section-9.3-1" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="container-mappings">
<section id="section-10">
      <h2 id="name-container-mappings">
<a href="#section-10" class="section-number selfRef">10. </a><a href="#name-container-mappings" class="section-name selfRef">Container mappings</a>
      </h2>
<p id="section-10-1">The FLAC format can be used without any container, 
as it already provides for the most basic features normally associated 
with a container. However, the functionality this basic container 
provides is rather limited, and for more advanced features, like 
combining FLAC audio with video, it needs to be encapsulated by a more 
capable container.  This presents a problem: because of these container 
features, the FLAC format mixes data that belongs to the encoded data 
(like block size and sample rate) with data that belongs to the 
container (like checksum and timecode). The choice was made to 
encapsulate FLAC frames as they are, which means some data will be 
duplicated and potentially deviating between the FLAC frames and the 
encapsulating container.<a href="#section-10-1" class="pilcrow">¶</a></p>
<p id="section-10-2">As FLAC frames are completely independent of each 
other, container format features handling dependencies do not need to be
 used. For example, all FLAC frames embedded in Matroska are marked as 
keyframes when they are stored in a SimpleBlock, and tracks in an MP4 
file containing only FLAC frames do not need a sync sample box.<a href="#section-10-2" class="pilcrow">¶</a></p>
<div id="ogg-mapping">
<section id="section-10.1">
        <h3 id="name-ogg-mapping">
<a href="#section-10.1" class="section-number selfRef">10.1. </a><a href="#name-ogg-mapping" class="section-name selfRef">Ogg mapping</a>
        </h3>
<p id="section-10.1-1">The Ogg container format is defined in <span>[<a href="#RFC3533" class="cite xref">RFC3533</a>]</span>. The first packet of a logical bitstream carrying FLAC data is structured according to the following table.<a href="#section-10.1-1" class="pilcrow">¶</a></p>
<table class="center" id="table-24">
          <caption><a href="#table-24" class="selfRef">Table 24</a></caption>
<thead>
            <tr>
              <th class="text-left" rowspan="1" colspan="1">Data</th>
              <th class="text-left" rowspan="1" colspan="1">Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">5 bytes</td>
              <td class="text-left" rowspan="1" colspan="1">Bytes <code>0x7F 0x46 0x4C 0x41 0x43</code> (as also defined by <span>[<a href="#RFC5334" class="cite xref">RFC5334</a>]</span>)</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">2 bytes</td>
              <td class="text-left" rowspan="1" colspan="1">Version number of the FLAC-in-Ogg mapping. These bytes are <code>0x01 0x00</code>, meaning version 1.0 of the mapping.</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">2 bytes</td>
              <td class="text-left" rowspan="1" colspan="1">Number of header packets (excluding the first header packet) as an unsigned number coded big-endian.</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">4 bytes</td>
              <td class="text-left" rowspan="1" colspan="1">The <code>fLaC</code> signature</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">4 bytes</td>
              <td class="text-left" rowspan="1" colspan="1">A metadata block header for the streaminfo block</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">34 bytes</td>
              <td class="text-left" rowspan="1" colspan="1">A streaminfo metadata block</td>
            </tr>
          </tbody>
        </table>
<p id="section-10.1-3">The number of header packets MAY be 0, which 
means the number of packets that follow is unknown. This first packet 
MUST NOT share a Ogg page with any other packets. This means the first 
page of a logical stream of FLAC-in-Ogg is always 79 bytes.<a href="#section-10.1-3" class="pilcrow">¶</a></p>
<p id="section-10.1-4">Following the first packet are one or more header
 packets, each of which contains a single metadata block. The first of 
these packets SHOULD be a Vorbis comment metadata block, for historic 
reasons. This is contrary to unencapsulated FLAC streams, where the 
order of metadata blocks is not important except for the streaminfo 
block and where a Vorbis comment metadata block is optional.<a href="#section-10.1-4" class="pilcrow">¶</a></p>
<p id="section-10.1-5">Following the header packets are audio packets. 
Each audio packet contains a single FLAC frame. The first audio packet 
MUST start on a new Ogg page, i.e., the last metadata block MUST finish 
its page before any audio packets are encapsulated.<a href="#section-10.1-5" class="pilcrow">¶</a></p>
<p id="section-10.1-6">The granule position of all pages containing 
header packets MUST be 0. For pages containing audio packets, the 
granule position is the number of the last sample contained in the last 
completed packet in the frame. The sample numbering considers 
interchannel samples. If a page contains no packet end (e.g., when it 
only contains the start of a large packet, which continues on the next 
page), then the granule position is set to the maximum value possible, 
i.e., <code>0xFF 0xFF 0xFF 0xFF 0xFF 0xFF 0xFF 0xFF</code>.<a href="#section-10.1-6" class="pilcrow">¶</a></p>
<p id="section-10.1-7">The granule position of the first audio data page
 with a completed packet MAY be larger than the number of samples 
contained in packets that complete on that page. In other words, the 
apparent sample number of the first sample in the stream following from 
the granule position and the audio data MAY be larger than 0. This 
allows, for example, a server to cast a live stream to several clients 
that joined at different moments, without rewriting the granule position
 for each client.<a href="#section-10.1-7" class="pilcrow">¶</a></p>
<p id="section-10.1-8">If an audio stream is encoded where audio 
properties (sample rate, number of channels, or bit depth) change at 
some point in the stream, this should be dealt with by finishing 
encoding of the current Ogg stream and starting a new Ogg stream, 
concatenated to the previous one. This is called chaining in Ogg. See 
the Ogg specification <span>[<a href="#RFC3533" class="cite xref">RFC3533</a>]</span> for details.<a href="#section-10.1-8" class="pilcrow">¶</a></p>
</section>
</div>
<div id="matroska-mapping">
<section id="section-10.2">
        <h3 id="name-matroska-mapping">
<a href="#section-10.2" class="section-number selfRef">10.2. </a><a href="#name-matroska-mapping" class="section-name selfRef">Matroska mapping</a>
        </h3>
<p id="section-10.2-1">The Matroska container format is defined in <span>[<a href="#I-D.ietf-cellar-matroska" class="cite xref">I-D.ietf-cellar-matroska</a>]</span>. The codec ID (EBML path <code>\Segment\Tracks\TrackEntry\CodecID</code>) assigned to signal tracks carrying FLAC data is <code>A_FLAC</code> in ASCII. All FLAC data before the first audio frame (i.e., the <code>fLaC</code> ASCII signature and all metadata blocks) is stored as CodecPrivate data (EBML path <code>\Segment\Tracks\TrackEntry\CodecPrivate</code>).<a href="#section-10.2-1" class="pilcrow">¶</a></p>
<p id="section-10.2-2">Each FLAC frame (including all of its subframes) is treated as a single frame in the Matroska context.<a href="#section-10.2-2" class="pilcrow">¶</a></p>
<p id="section-10.2-3">If an audio stream is encoded where audio 
properties (sample rate, number of channels, or bit depth) change at 
some point in the stream, this should be dealt with by finishing the 
current Matroska segment and starting a new one with the new properties.<a href="#section-10.2-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="iso-base-media-file-format-mp4-mapping">
<section id="section-10.3">
        <h3 id="name-iso-base-media-file-format-">
<a href="#section-10.3" class="section-number selfRef">10.3. </a><a href="#name-iso-base-media-file-format-" class="section-name selfRef">ISO Base Media File Format (MP4) mapping</a>
        </h3>
<p id="section-10.3-1">The full encapsulation definition of FLAC audio 
in MP4 files was deemed too extensive to include in this document. A 
definition document can be found at <span>[<a href="#FLAC-in-MP4-specification" class="cite xref">FLAC-in-MP4-specification</a>]</span>.<a href="#section-10.3-1" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="implementation-status">
<section id="section-11">
      <h2 id="name-implementation-status">
<a href="#section-11" class="section-number selfRef">11. </a><a href="#name-implementation-status" class="section-name selfRef">Implementation status</a>
      </h2>
<p id="section-11-1">Note to RFC Editor - please remove this entire section before publication, as well as the reference to RFC 7942.<a href="#section-11-1" class="pilcrow">¶</a></p>
<p id="section-11-2">This section records the status of known implementations of the FLAC format, and is based on a proposal described in <span>[<a href="#RFC7942" class="cite xref">RFC7942</a>]</span>.
 Please note that the listing of any individual implementation here does
 not imply endorsement by the IETF. Furthermore, no effort has been 
spent to verify the information presented here that was supplied by IETF
 contributors. This is not intended as, and must not be construed to be,
 a catalog of available implementations or their features.  Readers are 
advised to note that other implementations may exist.<a href="#section-11-2" class="pilcrow">¶</a></p>
<p id="section-11-3">A reference encoder and decoder implementation of 
the FLAC format exists, known as libFLAC, maintained by Xiph.Org. It can
 be found at <a href="https://xiph.org/flac/">https://xiph.org/flac/</a>
 Note that while all libFLAC components are licensed under 3-clause BSD,
 the flac and metaflac command line tools often supplied together with 
libFLAC are licensed under GPL.<a href="#section-11-3" class="pilcrow">¶</a></p>
<p id="section-11-4">Another completely independent implementation of 
both encoder and decoder of the FLAC format is available in libavcodec, 
maintained by FFmpeg, licensed under LGPL 2.1 or later. It can be found 
at <a href="https://ffmpeg.org/">https://ffmpeg.org/</a><a href="#section-11-4" class="pilcrow">¶</a></p>
<p id="section-11-5">A list of other implementations and an overview of which parts of the format they implement can be found at <span>[<a href="#FLAC-wiki-implementations" class="cite xref">FLAC-wiki-implementations</a>]</span>.<a href="#section-11-5" class="pilcrow">¶</a></p>
</section>
</div>
<div id="security-considerations">
<section id="section-12">
      <h2 id="name-security-considerations">
<a href="#section-12" class="section-number selfRef">12. </a><a href="#name-security-considerations" class="section-name selfRef">Security Considerations</a>
      </h2>
<p id="section-12-1">Like any other codec (such as <span>[<a href="#RFC6716" class="cite xref">RFC6716</a>]</span>),
 FLAC should not be used with insecure ciphers or cipher modes that are 
vulnerable to known plaintext attacks. Some of the header bits as well 
as the padding are easily predictable.<a href="#section-12-1" class="pilcrow">¶</a></p>
<p id="section-12-2">Implementations of the FLAC codec need to take appropriate security considerations into account. Section 2.1 of <span>[<a href="#RFC4732" class="cite xref">RFC4732</a>]</span>
 provides general information on DoS attacks on end-systems and 
describes some mitigation strategies. Areas of concern specific to FLAC 
follow.<a href="#section-12-2" class="pilcrow">¶</a></p>
<p id="section-12-3">It is extremely important for the decoder to be 
robust against malformed payloads. Payloads that do not conform to this 
specification <span class="bcp14">MUST NOT</span> cause the decoder to 
overrun its allocated memory or take an excessive amount of resources to
 decode. An overrun in allocated memory could lead to arbitrary code 
execution by an attacker. The same applies to the encoder, even though 
problems with encoders are typically rarer. Malformed audio streams <span class="bcp14">MUST NOT</span> cause the encoder to misbehave because this would allow an attacker to attack transcoding gateways.<a href="#section-12-3" class="pilcrow">¶</a></p>
<p id="section-12-4">As with all compression algorithms, both encoding 
and decoding can produce an output much larger than the input. For 
decoding, the most extreme possible case of this is a frame with eight 
constant subframes of block size 65535 and coding for 32-bit PCM. This 
frame is only 49 bytes in size, but codes for more than 2 megabytes of 
uncompressed PCM data. For encoding, it is possible to have an even 
larger size increase, although such behavior is generally considered 
faulty. This happens if the encoder chooses a rice parameter that does 
not fit with the residual that has to be encoded. In such a case, very 
long unary coded symbols can appear, in the most extreme case, more than
 4 gigabytes per sample. Decoder and encoder implementors are advised to
 take precautions to prevent excessive resource utilization in such 
cases.<a href="#section-12-4" class="pilcrow">¶</a></p>
<p id="section-12-5">Where metadata is handled, implementors are advised
 to either thoroughly test the handling of extreme cases or impose 
reasonable limits beyond the limits of this specification document. For 
example, a single Vorbis comment metadata block can contain millions of 
valid fields. It is unlikely such a limit is ever reached except in a 
potentially malicious file. Likewise, the media type and description of a
 picture metadata block can be millions of characters long, despite 
there being no reasonable use of such contents. One possible use case 
for very long character strings is in lyrics, which can be stored in 
Vorbis comment metadata block fields.<a href="#section-12-5" class="pilcrow">¶</a></p>
<p id="section-12-6">Various kinds of metadata blocks contain length 
fields or field counts. While reading a block following these lengths or
 counts, a decoder MUST make sure higher-level lengths or counts (most 
importantly, the length field of the metadata block itself) are not 
exceeded. As some of these length fields code string lengths, memory for
 which must be allocated, parsers MUST first verify that a block is 
valid before allocating memory based on its contents, except when 
explicitly instructed to salvage data from a malformed file.<a href="#section-12-6" class="pilcrow">¶</a></p>
<p id="section-12-7">Metadata blocks can also contain references, e.g., 
the picture metadata block can contain a URI. When following an URI, the
 security considerations of [RFC3986] apply. Applications MUST obtain 
explicit user approval to retrieve resources via remote protocols. 
Following external URIs introduces a tracking risk from on-path 
observers and the operator of the service hosting the URI. Likewise, the
 choice of scheme, if it isn’t protected like https, could also 
introduce integrity attacks by an on-path observer. A malicious operator
 of the service hosting the URI can return arbitrary content that the 
parser will read. Also, such retrievals can be used in a DDoS attack 
when the URI points to a potential victim. Therefore, applications need 
to ask user approval for each retrieval individually, take extra 
precautions when parsing retrieved data, and cache retrieved resources. 
Applications MUST obtain explicit user approval to retrieve local 
resources not located in the same directory as the FLAC file being 
processed. Since relative URIs are permitted, applications MUST guard 
against directory traversal attacks and guard against a violation of a 
same-origin policy if such a policy is being enforced.<a href="#section-12-7" class="pilcrow">¶</a></p>
<p id="section-12-8">Seeking in a FLAC stream that is not in a container
 relies on the coded number in frame headers and optionally a seektable 
metadata block. Parsers MUST employ thorough checks on whether a found 
coded number or seekpoint is at all possible, e.g., whether it is within
 bounds and not directly contradicting any other coded number or 
seekpoint that the seeking process relies on. Without these checks, 
seeking might get stuck in an infinite loop when numbers in frames are 
non-consecutive or otherwise not valid, which could be used in denial of
 service attacks.<a href="#section-12-8" class="pilcrow">¶</a></p>
<p id="section-12-9">Implementors are advised to employ fuzz testing 
combined with different sanitizers on FLAC decoders to find security 
problems. Ignoring the results of CRC checks improves the efficiency of 
decoder fuzz testing.<a href="#section-12-9" class="pilcrow">¶</a></p>
<p id="section-12-10">See <span>[<a href="#FLAC-decoder-testbench" class="cite xref">FLAC-decoder-testbench</a>]</span>
 for a non-exhaustive list of FLAC files with extreme configurations 
that lead to crashes or reboots on some known implementations. Besides 
providing a starting point for security testing, this set of files can 
also be used to test conformance with this specification.<a href="#section-12-10" class="pilcrow">¶</a></p>
<p id="section-12-11">FLAC files may contain executable code, although 
the FLAC format is not designed for it and it is uncommon. One use case 
where FLAC is occasionally used to store executable code is when 
compressing images of mixed mode CDs, which contain both audio and 
non-audio data, of which the non-audio portion can contain executable 
code. In that case, the executable code is stored as if it were audio 
and is potentially obscured. Of course, it is also possible to store 
executable code as metadata, for example as a vorbis comment with help 
of a binary-to-text encoding or directly in an application metadata 
block. Applications MUST NOT execute code contained in FLAC files or 
present parts of FLAC files as executable code to the user, except when 
an application has that explicit purpose, e.g., applications reading 
FLAC files as disc images and presenting it as virtual disc drive.<a href="#section-12-11" class="pilcrow">¶</a></p>
</section>
</div>
<div id="iana-considerations">
<section id="section-13">
      <h2 id="name-iana-considerations">
<a href="#section-13" class="section-number selfRef">13. </a><a href="#name-iana-considerations" class="section-name selfRef">IANA Considerations</a>
      </h2>
<p id="section-13-1">This document registers one new media type, "audio/flac", as defined in the following section, and creates a new IANA registry.<a href="#section-13-1" class="pilcrow">¶</a></p>
<div id="media-type-registration">
<section id="section-13.1">
        <h3 id="name-media-type-registration">
<a href="#section-13.1" class="section-number selfRef">13.1. </a><a href="#name-media-type-registration" class="section-name selfRef">Media type registration</a>
        </h3>
<p id="section-13.1-1">The following information serves as the 
registration form for the "audio/flac" media type. This media type is 
applicable for FLAC audio that is not packaged in a container as 
described in <a href="#container-mappings" class="auto internal xref">Section 10</a>.
 FLAC audio packaged in such a container will take on the media type of 
that container, for example, audio/ogg when packaged in an Ogg 
container, or video/mp4 when packaged in an MP4 container alongside a 
video track.<a href="#section-13.1-1" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-13.1-2">
<pre>Type name: audio

Subtype name: flac

Required parameters: N/A

Optional parameters: N/A

Encoding considerations: as per THISRFC

Security considerations: see the security considerations in Section
12 of THISRFC

Interoperability considerations: see the descriptions of past format
changes in Appendix B of THISRFC

Published specification: THISRFC

Applications that use this media type: ffmpeg, apache, firefox

Fragment identifier considerations: none

Additional information:

  Deprecated alias names for this type: audio/x-flac

  Magic number(s): fLaC

  File extension(s): flac

  Macintosh file type code(s): none

  Uniform Type Identifier: org.xiph.flac conforms to public.audio

  Windows Clipboard Format Name: audio/flac

Person &amp; email address to contact for further information:
IETF CELLAR WG cellar@ietf.org

Intended usage: COMMON

Restrictions on usage: N/A

Author: IETF CELLAR WG

Change controller: Internet Engineering Task Force
(mailto:iesg@ietf.org)

Provisional registration? (standards tree only): NO

</pre><a href="#section-13.1-2" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="application-id-registry">
<section id="section-13.2">
        <h3 id="name-application-id-registry">
<a href="#section-13.2" class="section-number selfRef">13.2. </a><a href="#name-application-id-registry" class="section-name selfRef">Application ID Registry</a>
        </h3>
<p id="section-13.2-1">This document creates a new IANA registry called 
the "FLAC Application Metadata Block ID" registry. The values correspond
 to the 32-bit identifier described in <a href="#application" class="auto internal xref">Section 8.4</a>.<a href="#section-13.2-1" class="pilcrow">¶</a></p>
<p id="section-13.2-2">To register a new Application ID in this 
registry, one needs an Application ID, a description, optionally a 
reference to a document describing the Application ID and a Change 
Controller (IETF or email of registrant). The Application IDs are to be 
allocated according to the "First Come First Served" policy [RFC8126], 
so that there is no impediment to registering any Application IDs the 
FLAC community encounters, especially if they were used in audio files 
but were not registered when the audio files were encoded. An 
Application ID can be any 32-bit value, but is often composed of 4 ASCII
 characters, to be human-readable.<a href="#section-13.2-2" class="pilcrow">¶</a></p>
<p id="section-13.2-3">The FLAC Application Metadata Block ID registry 
is assigned the following initial values, taken from the registration 
page at xiph.org (see <span>[<a href="#ID-registration-page" class="cite xref">ID-registration-page</a>]</span>), which is no longer being maintained as it is replaced by this registry.<a href="#section-13.2-3" class="pilcrow">¶</a></p>
<table class="center" id="table-25">
          <caption><a href="#table-25" class="selfRef">Table 25</a></caption>
<thead>
            <tr>
              <th class="text-left" rowspan="1" colspan="1">Application ID</th>
              <th class="text-left" rowspan="1" colspan="1">ASCII rendition (if available)</th>
              <th class="text-left" rowspan="1" colspan="1">Description</th>
              <th class="text-left" rowspan="1" colspan="1">Specification</th>
              <th class="text-left" rowspan="1" colspan="1">Change controller</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">0x41544348</td>
              <td class="text-left" rowspan="1" colspan="1">ATCH</td>
              <td class="text-left" rowspan="1" colspan="1">FlacFile</td>
              <td class="text-left" rowspan="1" colspan="1">
                <span>[<a href="#FlacFile" class="cite xref">FlacFile</a>]</span>
</td>
              <td class="text-left" rowspan="1" colspan="1">IETF</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">0x42534F4C</td>
              <td class="text-left" rowspan="1" colspan="1">BSOL</td>
              <td class="text-left" rowspan="1" colspan="1">beSolo</td>
              <td class="text-left" rowspan="1" colspan="1"></td>
              <td class="text-left" rowspan="1" colspan="1">IETF</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">0x42554753</td>
              <td class="text-left" rowspan="1" colspan="1">BUGS</td>
              <td class="text-left" rowspan="1" colspan="1">Bugs Player</td>
              <td class="text-left" rowspan="1" colspan="1"></td>
              <td class="text-left" rowspan="1" colspan="1">IETF</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">0x43756573</td>
              <td class="text-left" rowspan="1" colspan="1">Cues</td>
              <td class="text-left" rowspan="1" colspan="1">GoldWave cue points</td>
              <td class="text-left" rowspan="1" colspan="1"></td>
              <td class="text-left" rowspan="1" colspan="1">IETF</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">0x46696361</td>
              <td class="text-left" rowspan="1" colspan="1">Fica</td>
              <td class="text-left" rowspan="1" colspan="1">CUE Splitter</td>
              <td class="text-left" rowspan="1" colspan="1"></td>
              <td class="text-left" rowspan="1" colspan="1">IETF</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">0x46746F6C</td>
              <td class="text-left" rowspan="1" colspan="1">Ftol</td>
              <td class="text-left" rowspan="1" colspan="1">flac-tools</td>
              <td class="text-left" rowspan="1" colspan="1"></td>
              <td class="text-left" rowspan="1" colspan="1">IETF</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">0x4D4F5442</td>
              <td class="text-left" rowspan="1" colspan="1">MOTB</td>
              <td class="text-left" rowspan="1" colspan="1">MOTB MetaCzar</td>
              <td class="text-left" rowspan="1" colspan="1"></td>
              <td class="text-left" rowspan="1" colspan="1">IETF</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">0x4D505345</td>
              <td class="text-left" rowspan="1" colspan="1">MPSE</td>
              <td class="text-left" rowspan="1" colspan="1">MP3 Stream Editor</td>
              <td class="text-left" rowspan="1" colspan="1"></td>
              <td class="text-left" rowspan="1" colspan="1">IETF</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">0x4D754D4C</td>
              <td class="text-left" rowspan="1" colspan="1">MuML</td>
              <td class="text-left" rowspan="1" colspan="1">MusicML: Music Metadata Language</td>
              <td class="text-left" rowspan="1" colspan="1"></td>
              <td class="text-left" rowspan="1" colspan="1">IETF</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">0x52494646</td>
              <td class="text-left" rowspan="1" colspan="1">RIFF</td>
              <td class="text-left" rowspan="1" colspan="1">Sound Devices RIFF chunk storage</td>
              <td class="text-left" rowspan="1" colspan="1"></td>
              <td class="text-left" rowspan="1" colspan="1">IETF</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">0x5346464C</td>
              <td class="text-left" rowspan="1" colspan="1">SFFL</td>
              <td class="text-left" rowspan="1" colspan="1">Sound Font FLAC</td>
              <td class="text-left" rowspan="1" colspan="1"></td>
              <td class="text-left" rowspan="1" colspan="1">IETF</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">0x534F4E59</td>
              <td class="text-left" rowspan="1" colspan="1">SONY</td>
              <td class="text-left" rowspan="1" colspan="1">Sony Creative Software</td>
              <td class="text-left" rowspan="1" colspan="1"></td>
              <td class="text-left" rowspan="1" colspan="1">IETF</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">0x5351455A</td>
              <td class="text-left" rowspan="1" colspan="1">SQEZ</td>
              <td class="text-left" rowspan="1" colspan="1">flacsqueeze</td>
              <td class="text-left" rowspan="1" colspan="1"></td>
              <td class="text-left" rowspan="1" colspan="1">IETF</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">0x54745776</td>
              <td class="text-left" rowspan="1" colspan="1">TtWv</td>
              <td class="text-left" rowspan="1" colspan="1">TwistedWave</td>
              <td class="text-left" rowspan="1" colspan="1"></td>
              <td class="text-left" rowspan="1" colspan="1">IETF</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">0x55495453</td>
              <td class="text-left" rowspan="1" colspan="1">UITS</td>
              <td class="text-left" rowspan="1" colspan="1">UITS Embedding tools</td>
              <td class="text-left" rowspan="1" colspan="1"></td>
              <td class="text-left" rowspan="1" colspan="1">IETF</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">0x61696666</td>
              <td class="text-left" rowspan="1" colspan="1">aiff</td>
              <td class="text-left" rowspan="1" colspan="1">FLAC AIFF chunk storage</td>
              <td class="text-left" rowspan="1" colspan="1">
                <span>[<a href="#Foreign-metadata" class="cite xref">Foreign-metadata</a>]</span>
</td>
              <td class="text-left" rowspan="1" colspan="1">IETF</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">0x696D6167</td>
              <td class="text-left" rowspan="1" colspan="1">imag</td>
              <td class="text-left" rowspan="1" colspan="1">flac-image</td>
              <td class="text-left" rowspan="1" colspan="1"></td>
              <td class="text-left" rowspan="1" colspan="1">IETF</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">0x7065656D</td>
              <td class="text-left" rowspan="1" colspan="1">peem</td>
              <td class="text-left" rowspan="1" colspan="1">Parseable Embedded Extensible Metadata</td>
              <td class="text-left" rowspan="1" colspan="1"></td>
              <td class="text-left" rowspan="1" colspan="1">IETF</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">0x71667374</td>
              <td class="text-left" rowspan="1" colspan="1">qfst</td>
              <td class="text-left" rowspan="1" colspan="1">QFLAC Studio</td>
              <td class="text-left" rowspan="1" colspan="1"></td>
              <td class="text-left" rowspan="1" colspan="1">IETF</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">0x72696666</td>
              <td class="text-left" rowspan="1" colspan="1">riff</td>
              <td class="text-left" rowspan="1" colspan="1">FLAC RIFF chunk storage</td>
              <td class="text-left" rowspan="1" colspan="1">
                <span>[<a href="#Foreign-metadata" class="cite xref">Foreign-metadata</a>]</span>
</td>
              <td class="text-left" rowspan="1" colspan="1">IETF</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">0x74756E65</td>
              <td class="text-left" rowspan="1" colspan="1">tune</td>
              <td class="text-left" rowspan="1" colspan="1">TagTuner</td>
              <td class="text-left" rowspan="1" colspan="1"></td>
              <td class="text-left" rowspan="1" colspan="1">IETF</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">0x773634C0</td>
              <td class="text-left" rowspan="1" colspan="1">w64</td>
              <td class="text-left" rowspan="1" colspan="1">FLAC Wave64 chunk storage</td>
              <td class="text-left" rowspan="1" colspan="1">
                <span>[<a href="#Foreign-metadata" class="cite xref">Foreign-metadata</a>]</span>
</td>
              <td class="text-left" rowspan="1" colspan="1">IETF</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">0x78626174</td>
              <td class="text-left" rowspan="1" colspan="1">xbat</td>
              <td class="text-left" rowspan="1" colspan="1">XBAT</td>
              <td class="text-left" rowspan="1" colspan="1"></td>
              <td class="text-left" rowspan="1" colspan="1">IETF</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">0x786D6364</td>
              <td class="text-left" rowspan="1" colspan="1">xmcd</td>
              <td class="text-left" rowspan="1" colspan="1">xmcd</td>
              <td class="text-left" rowspan="1" colspan="1"></td>
              <td class="text-left" rowspan="1" colspan="1">IETF</td>
            </tr>
          </tbody>
        </table>
</section>
</div>
</section>
</div>
<div id="acknowledgments">
<section id="section-14">
      <h2 id="name-acknowledgments">
<a href="#section-14" class="section-number selfRef">14. </a><a href="#name-acknowledgments" class="section-name selfRef">Acknowledgments</a>
      </h2>
<p id="section-14-1">FLAC owes much to the many people who have advanced the audio compression field so freely. For instance:<a href="#section-14-1" class="pilcrow">¶</a></p>
<ul class="compact">
<li class="compact" id="section-14-2.1">A. J. Robinson for his work on Shorten; his paper (see <span>[<a href="#robinson-tr156" class="cite xref">robinson-tr156</a>]</span>)
 is a good starting point on some of the basic methods used by FLAC. 
FLAC trivially extends and improves the fixed predictors, LPC 
coefficient quantization, and Rice coding used in Shorten.<a href="#section-14-2.1" class="pilcrow">¶</a>
</li>
        <li class="compact" id="section-14-2.2">S. W. Golomb and Robert F. Rice; their universal codes are used by FLAC's entropy coder, see <span>[<a href="#Rice" class="cite xref">Rice</a>]</span>.<a href="#section-14-2.2" class="pilcrow">¶</a>
</li>
        <li class="compact" id="section-14-2.3">N. Levinson and J. Durbin; the FLAC reference encoder (see <a href="#implementation-status" class="auto internal xref">Section 11</a>)
 uses an algorithm developed and refined by them for determining the LPC
 coefficients from the autocorrelation coefficients, see <span>[<a href="#Durbin" class="cite xref">Durbin</a>]</span>.<a href="#section-14-2.3" class="pilcrow">¶</a>
</li>
        <li class="compact" id="section-14-2.4">And of course, Claude Shannon, see <span>[<a href="#Shannon" class="cite xref">Shannon</a>]</span>.<a href="#section-14-2.4" class="pilcrow">¶</a>
</li>
      </ul>
<p id="section-14-3">The FLAC format, the FLAC reference implementation,
 and this document were originally developed by Josh Coalson. While many
 others have contributed since, this original effort is deeply 
appreciated.<a href="#section-14-3" class="pilcrow">¶</a></p>
</section>
</div>
<section id="section-15">
      <h2 id="name-references">
<a href="#section-15" class="section-number selfRef">15. </a><a href="#name-references" class="section-name selfRef">References</a>
      </h2>
<section id="section-15.1">
        <h3 id="name-normative-references">
<a href="#section-15.1" class="section-number selfRef">15.1. </a><a href="#name-normative-references" class="section-name selfRef">Normative References</a>
        </h3>
<dl class="references">
<dt id="I-D.ietf-cellar-matroska">[I-D.ietf-cellar-matroska]</dt>
        <dd>
<span class="refAuthor">Lhomme, S.</span>, <span class="refAuthor">Bunkus, M.</span>, and <span class="refAuthor">D. Rice</span>, <span class="refTitle">"Matroska Media Container Format Specifications"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-cellar-matroska-21</span>, <time datetime="2023-10-22" class="refDate">22 October 2023</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-ietf-cellar-matroska-21">https://datatracker.ietf.org/doc/html/draft-ietf-cellar-matroska-21</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="ISRC-handbook">[ISRC-handbook]</dt>
        <dd>
<span class="refAuthor">International ISRC Registration Authority</span>, <span class="refTitle">"International Standard Recording Code (ISRC) Handbook, 4th edition"</span>, <time datetime="2021" class="refDate">2021</time>, <span>&lt;<a href="https://www.ifpi.org/isrc_handbook/">https://www.ifpi.org/isrc_handbook/</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC1321">[RFC1321]</dt>
        <dd>
<span class="refAuthor">Rivest, R.</span>, <span class="refTitle">"The MD5 Message-Digest Algorithm"</span>, <span class="seriesInfo">RFC 1321</span>, <span class="seriesInfo">DOI 10.17487/RFC1321</span>, <time datetime="1992-04" class="refDate">April 1992</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc1321">https://www.rfc-editor.org/info/rfc1321</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC2046">[RFC2046]</dt>
        <dd>
<span class="refAuthor">Freed, N.</span> and <span class="refAuthor">N. Borenstein</span>, <span class="refTitle">"Multipurpose Internet Mail Extensions (MIME) Part Two: Media Types"</span>, <span class="seriesInfo">RFC 2046</span>, <span class="seriesInfo">DOI 10.17487/RFC2046</span>, <time datetime="1996-11" class="refDate">November 1996</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2046">https://www.rfc-editor.org/info/rfc2046</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC2083">[RFC2083]</dt>
        <dd>
<span class="refAuthor">Boutell, T.</span>, <span class="refTitle">"PNG (Portable Network Graphics) Specification Version 1.0"</span>, <span class="seriesInfo">RFC 2083</span>, <span class="seriesInfo">DOI 10.17487/RFC2083</span>, <time datetime="1997-03" class="refDate">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2083">https://www.rfc-editor.org/info/rfc2083</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC2119">[RFC2119]</dt>
        <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time datetime="1997-03" class="refDate">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC3533">[RFC3533]</dt>
        <dd>
<span class="refAuthor">Pfeiffer, S.</span>, <span class="refTitle">"The Ogg Encapsulation Format Version 0"</span>, <span class="seriesInfo">RFC 3533</span>, <span class="seriesInfo">DOI 10.17487/RFC3533</span>, <time datetime="2003-05" class="refDate">May 2003</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc3533">https://www.rfc-editor.org/info/rfc3533</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC3629">[RFC3629]</dt>
        <dd>
<span class="refAuthor">Yergeau, F.</span>, <span class="refTitle">"UTF-8, a transformation format of ISO 10646"</span>, <span class="seriesInfo">STD 63</span>, <span class="seriesInfo">RFC 3629</span>, <span class="seriesInfo">DOI 10.17487/RFC3629</span>, <time datetime="2003-11" class="refDate">November 2003</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc3629">https://www.rfc-editor.org/info/rfc3629</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC3986">[RFC3986]</dt>
        <dd>
<span class="refAuthor">Berners-Lee, T.</span>, <span class="refAuthor">Fielding, R.</span>, and <span class="refAuthor">L. Masinter</span>, <span class="refTitle">"Uniform Resource Identifier (URI): Generic Syntax"</span>, <span class="seriesInfo">STD 66</span>, <span class="seriesInfo">RFC 3986</span>, <span class="seriesInfo">DOI 10.17487/RFC3986</span>, <time datetime="2005-01" class="refDate">January 2005</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc3986">https://www.rfc-editor.org/info/rfc3986</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8174">[RFC8174]</dt>
      <dd>
<span class="refAuthor">Leiba, B.</span>, <span class="refTitle">"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 8174</span>, <span class="seriesInfo">DOI 10.17487/RFC8174</span>, <time datetime="2017-05" class="refDate">May 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8174">https://www.rfc-editor.org/info/rfc8174</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
<section id="section-15.2">
        <h3 id="name-informative-references">
<a href="#section-15.2" class="section-number selfRef">15.2. </a><a href="#name-informative-references" class="section-name selfRef">Informative References</a>
        </h3>
<dl class="references">
<dt id="Durbin">[Durbin]</dt>
        <dd>
<span class="refAuthor">Durbin, J.</span>, <span class="refTitle">"The Fitting of Time-Series Models"</span>, <span class="seriesInfo">DOI 10.2307/1401322</span>, <time datetime="1959-12" class="refDate">December 1959</time>, <span>&lt;<a href="https://www.jstor.org/stable/1401322">https://www.jstor.org/stable/1401322</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="FIR">[FIR]</dt>
        <dd>
<span class="refTitle">"Finite impulse response - Wikipedia"</span>, <span>&lt;<a href="https://en.wikipedia.org/wiki/Finite_impulse_response">https://en.wikipedia.org/wiki/Finite_impulse_response</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="FLAC-decoder-testbench">[FLAC-decoder-testbench]</dt>
        <dd>
<span class="refTitle">"FLAC decoder testbench"</span>, <span class="refContent">commit aa7b0c6</span>, <time datetime="2023-08" class="refDate">August 2023</time>, <span>&lt;<a href="https://github.com/ietf-wg-cellar/flac-test-files">https://github.com/ietf-wg-cellar/flac-test-files</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="FLAC-in-MP4-specification">[FLAC-in-MP4-specification]</dt>
        <dd>
<span class="refAuthor">Montgomery, C.</span>, <span class="refTitle">"Encapsulation of FLAC in ISO Base Media File Format"</span>, <span class="refContent">commit 78d85dd</span>, <time datetime="2022-07" class="refDate">July 2022</time>, <span>&lt;<a href="https://github.com/xiph/flac/blob/master/doc/isoflac.txt">https://github.com/xiph/flac/blob/master/doc/isoflac.txt</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="FLAC-specification-github">[FLAC-specification-github]</dt>
        <dd>
<span class="refTitle">"FLAC specification github repository"</span>, <span>&lt;<a href="https://github.com/ietf-wg-cellar/flac-specification">https://github.com/ietf-wg-cellar/flac-specification</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="FLAC-wiki-implementations">[FLAC-wiki-implementations]</dt>
        <dd>
<span class="refTitle">"FLAC specification wiki: Implementations"</span>, <span>&lt;<a href="https://github.com/ietf-wg-cellar/flac-specification/wiki/Implementations">https://github.com/ietf-wg-cellar/flac-specification/wiki/Implementations</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="FLAC-wiki-interoperability">[FLAC-wiki-interoperability]</dt>
        <dd>
<span class="refTitle">"FLAC specification wiki: Interoperability considerations"</span>, <span>&lt;<a href="https://github.com/ietf-wg-cellar/flac-specification/wiki/Interoperability-considerations">https://github.com/ietf-wg-cellar/flac-specification/wiki/Interoperability-considerations</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="FlacFile">[FlacFile]</dt>
        <dd>
<span class="refTitle">"FlacFile"</span>, <time datetime="2007-10" class="refDate">October 2007</time>, <span>&lt;<a href="https://web.archive.org/web/20071023070305/http://firestuff.org:80/flacfile/">https://web.archive.org/web/20071023070305/http://firestuff.org:80/flacfile/</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="Foreign-metadata">[Foreign-metadata]</dt>
        <dd>
<span class="refTitle">"Specification of foreign metadata storage in FLAC"</span>, <time datetime="2023-11" class="refDate">November 2023</time>, <span>&lt;<a href="https://github.com/xiph/flac/blob/master/doc/foreign_metadata_storage.md">https://github.com/xiph/flac/blob/master/doc/foreign_metadata_storage.md</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="HPL-1999-144">[HPL-1999-144]</dt>
        <dd>
<span class="refAuthor">Hans, M.</span> and <span class="refAuthor">RW. Schafer</span>, <span class="refTitle">"Lossless Compression of Digital Audio"</span>, <span class="seriesInfo">DOI 10.1109/79.939834</span>, <time datetime="1999-11" class="refDate">November 1999</time>, <span>&lt;<a href="https://www.hpl.hp.com/techreports/1999/HPL-1999-144.pdf">https://www.hpl.hp.com/techreports/1999/HPL-1999-144.pdf</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="ID-registration-page">[ID-registration-page]</dt>
        <dd>
<span class="refTitle">"FLAC - ID Registry"</span>, <span>&lt;<a href="https://xiph.org/flac/id.html">https://xiph.org/flac/id.html</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="ID3v2">[ID3v2]</dt>
        <dd>
<span class="refAuthor">Nilsson, M.</span>, <span class="refTitle">"id3v2.4.0-frames.txt"</span>, <time datetime="2000-11" class="refDate">November 2000</time>, <span>&lt;<a href="https://web.archive.org/web/20220903174949/https://id3.org/id3v2.4.0-frames">https://web.archive.org/web/20220903174949/https://id3.org/id3v2.4.0-frames</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="IEC.60908.1999">[IEC.60908.1999]</dt>
        <dd>
<span class="refAuthor">International Electrotechnical Commission</span>, <span class="refTitle">"Audio recording - Compact disc digital audio system"</span>, <span class="seriesInfo">IEC International standard 60908 second edition</span>, <time datetime="1999" class="refDate">1999</time>. </dd>
<dd class="break"></dd>
<dt id="LinearPrediction">[LinearPrediction]</dt>
        <dd>
<span class="refTitle">"Linear prediction - Wikipedia"</span>, <span>&lt;<a href="https://en.wikipedia.org/wiki/Linear_prediction">https://en.wikipedia.org/wiki/Linear_prediction</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="MLP">[MLP]</dt>
        <dd>
<span class="refAuthor">Gerzon, MA.</span>, <span class="refAuthor">Craven, PG.</span>, <span class="refAuthor">Stuart, JR.</span>, <span class="refAuthor">Law, MJ.</span>, and <span class="refAuthor">RJ. Wilson</span>, <span class="refTitle">"The MLP Lossless Compression System"</span>, <time datetime="1999-09" class="refDate">September 1999</time>, <span>&lt;<a href="https://www.aes.org/e-lib/online/browse.cfm?elib=8082">https://www.aes.org/e-lib/online/browse.cfm?elib=8082</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="MusicBrainz">[MusicBrainz]</dt>
        <dd>
<span class="refAuthor">MusicBrainz</span>, <span class="refTitle">"Tags &amp; Variables - MusicBrainz Picard v2.10 documentation"</span>, <span>&lt;<a href="https://picard-docs.musicbrainz.org/en/variables/variables.html">https://picard-docs.musicbrainz.org/en/variables/variables.html</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC4732">[RFC4732]</dt>
        <dd>
<span class="refAuthor">Handley, M., Ed.</span>, <span class="refAuthor">Rescorla, E., Ed.</span>, and <span class="refAuthor">IAB</span>, <span class="refTitle">"Internet Denial-of-Service Considerations"</span>, <span class="seriesInfo">RFC 4732</span>, <span class="seriesInfo">DOI 10.17487/RFC4732</span>, <time datetime="2006-12" class="refDate">December 2006</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc4732">https://www.rfc-editor.org/info/rfc4732</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC5334">[RFC5334]</dt>
        <dd>
<span class="refAuthor">Goncalves, I.</span>, <span class="refAuthor">Pfeiffer, S.</span>, and <span class="refAuthor">C. Montgomery</span>, <span class="refTitle">"Ogg Media Types"</span>, <span class="seriesInfo">RFC 5334</span>, <span class="seriesInfo">DOI 10.17487/RFC5334</span>, <time datetime="2008-09" class="refDate">September 2008</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc5334">https://www.rfc-editor.org/info/rfc5334</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6716">[RFC6716]</dt>
        <dd>
<span class="refAuthor">Valin, JM.</span>, <span class="refAuthor">Vos, K.</span>, and <span class="refAuthor">T. Terriberry</span>, <span class="refTitle">"Definition of the Opus Audio Codec"</span>, <span class="seriesInfo">RFC 6716</span>, <span class="seriesInfo">DOI 10.17487/RFC6716</span>, <time datetime="2012-09" class="refDate">September 2012</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6716">https://www.rfc-editor.org/info/rfc6716</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7942">[RFC7942]</dt>
        <dd>
<span class="refAuthor">Sheffer, Y.</span> and <span class="refAuthor">A. Farrel</span>, <span class="refTitle">"Improving Awareness of Running Code: The Implementation Status Section"</span>, <span class="seriesInfo">BCP 205</span>, <span class="seriesInfo">RFC 7942</span>, <span class="seriesInfo">DOI 10.17487/RFC7942</span>, <time datetime="2016-07" class="refDate">July 2016</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7942">https://www.rfc-editor.org/info/rfc7942</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="Rice">[Rice]</dt>
        <dd>
<span class="refAuthor">Rice, RF.</span> and <span class="refAuthor">JR. Plaunt</span>, <span class="refTitle">"Adaptive Variable-Length Coding for Efficient Compression of Spacecraft Television Data"</span>, <span class="seriesInfo">DOI 10.1109/TCOM.1971.1090789</span>, <time datetime="1971-12" class="refDate">December 1971</time>, <span>&lt;<a href="https://ieeexplore.ieee.org/document/1090789">https://ieeexplore.ieee.org/document/1090789</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="Shannon">[Shannon]</dt>
        <dd>
<span class="refAuthor">Shannon, CE.</span>, <span class="refTitle">"Communication in the Presence of Noise"</span>, <span class="seriesInfo">DOI 10.1109/JRPROC.1949.232969</span>, <time datetime="1949-01" class="refDate">January 1949</time>, <span>&lt;<a href="https://ieeexplore.ieee.org/document/1697831">https://ieeexplore.ieee.org/document/1697831</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="VarLengthCode">[VarLengthCode]</dt>
        <dd>
<span class="refTitle">"Variable-length code - Wikipedia"</span>, <span>&lt;<a href="https://en.wikipedia.org/wiki/Variable-length_code">https://en.wikipedia.org/wiki/Variable-length_code</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="Vorbis">[Vorbis]</dt>
        <dd>
<span class="refAuthor">Xiph.Org</span>, <span class="refTitle">"Ogg Vorbis I format specification: comment field and header specification"</span>, <span>&lt;<a href="https://xiph.org/vorbis/doc/v-comment.html">https://xiph.org/vorbis/doc/v-comment.html</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="lossyWAV">[lossyWAV]</dt>
        <dd>
<span class="refTitle">"lossyWAV - Hydrogenaudio Knowledgebase"</span>, <span>&lt;<a href="https://wiki.hydrogenaud.io/index.php?title=LossyWAV">https://wiki.hydrogenaud.io/index.php?title=LossyWAV</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="robinson-tr156">[robinson-tr156]</dt>
      <dd>
<span class="refAuthor">Robinson, T.</span>, <span class="refTitle">"SHORTEN: Simple lossless and near-lossless waveform compression"</span>, <time datetime="1994-12" class="refDate">December 1994</time>, <span>&lt;<a href="https://mi.eng.cam.ac.uk/reports/abstracts/robinson_tr156.html">https://mi.eng.cam.ac.uk/reports/abstracts/robinson_tr156.html</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</section>
<div id="numerical-considerations">
<section id="appendix-A">
      <h2 id="name-numerical-considerations">
<a href="#appendix-A" class="section-number selfRef">Appendix A. </a><a href="#name-numerical-considerations" class="section-name selfRef">Numerical considerations</a>
      </h2>
<p id="appendix-A-1">In order to maintain lossless behavior, all 
arithmetic used in encoding and decoding sample values must be done with
 integer data types to eliminate the possibility of introducing rounding
 errors associated with floating-point arithmetic. Use of floating-point
 representations in analysis (e.g., finding a good predictor or Rice 
parameter) is not a concern, as long as the process of using the found 
predictor and Rice parameter to encode audio samples is implemented with
 only integer math.<a href="#appendix-A-1" class="pilcrow">¶</a></p>
<p id="appendix-A-2">Furthermore, the possibility of integer overflow 
can be eliminated by using large enough data types. Choosing a 64-bit 
signed data type for all arithmetic involving sample values would make 
sure the possibility for overflow is eliminated, but usually smaller 
data types are chosen for increased performance, especially in embedded 
devices. This appendix provides guidelines for choosing the appropriate 
data type for each step of encoding and decoding FLAC files.<a href="#appendix-A-2" class="pilcrow">¶</a></p>
<p id="appendix-A-3">In this appendix, signed data types are signed two's complement.<a href="#appendix-A-3" class="pilcrow">¶</a></p>
<div id="determining-the-necessary-data-type-size">
<section id="appendix-A.1">
        <h3 id="name-determining-the-necessary-d">
<a href="#appendix-A.1" class="section-number selfRef">A.1. </a><a href="#name-determining-the-necessary-d" class="section-name selfRef">Determining the necessary data type size</a>
        </h3>
<p id="appendix-A.1-1">To find the smallest data type size that is 
guaranteed not to overflow for a certain sequence of arithmetic 
operations, the combination of values producing the largest possible 
result should be considered.<a href="#appendix-A.1-1" class="pilcrow">¶</a></p>
<p id="appendix-A.1-2">If, for example, two 16-bit signed integers are 
added, the largest possible result forms if both values are the largest 
number that can be represented with a 16-bit signed integer. To store 
the result, a signed integer data type with at least 17 bits is needed. 
Similarly, when adding 4 of these values, 18 bits are needed; when 
adding 8, 19 bits are needed, etc. In general, the number of bits 
necessary when adding numbers together is increased by the log base 2 of
 the number of values rounded up to the nearest integer. So, when adding
 18 unknown values stored in 8 bit signed integers, we need a signed 
integer data type of at least 13 bits to store the result, as the log 
base 2 of 18 rounded up is 5.<a href="#appendix-A.1-2" class="pilcrow">¶</a></p>
<p id="appendix-A.1-3">When multiplying two numbers, the number of bits 
needed for the result is the size of the first number plus the size of 
the second number. If, for example, a 16-bit signed integer is 
multiplied by another 16-bit signed integer, the result needs at least 
32 bits to be stored without overflowing. To show this in practice, the 
largest signed value that can be stored in 4 bits is -8. (-8)*(-8) is 
64, which needs at least 8 bits (signed) to store.<a href="#appendix-A.1-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="stereo-decorrelation">
<section id="appendix-A.2">
        <h3 id="name-stereo-decorrelation">
<a href="#appendix-A.2" class="section-number selfRef">A.2. </a><a href="#name-stereo-decorrelation" class="section-name selfRef">Stereo decorrelation</a>
        </h3>
<p id="appendix-A.2-1">When stereo decorrelation is used, the side channel will have one extra bit of bit depth, see <a href="#interchannel-decorrelation" class="auto internal xref">Section 4.2</a>.<a href="#appendix-A.2-1" class="pilcrow">¶</a></p>
<p id="appendix-A.2-2">This means that while 16-bit signed integers have
 sufficient range to store samples from a fully decoded FLAC frame with a
 bit depth of 16 bits, the decoding of a side subframe in such a file 
will need a data type with at least 17 bits to store decoded subframe 
samples before undoing stereo decorrelation.<a href="#appendix-A.2-2" class="pilcrow">¶</a></p>
<p id="appendix-A.2-3">Most FLAC decoders store decoded (subframe) 
samples as 32-bit values, which is sufficient for files with bit depths 
up to (and including) 31 bits.<a href="#appendix-A.2-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="prediction-1">
<section id="appendix-A.3">
        <h3 id="name-prediction-2">
<a href="#appendix-A.3" class="section-number selfRef">A.3. </a><a href="#name-prediction-2" class="section-name selfRef">Prediction</a>
        </h3>
<p id="appendix-A.3-1">A prediction (which is used to calculate the 
residual on encoding or added to the residual to calculate the sample 
value on decoding) is formed by multiplying and summing preceding sample
 values. In order to eliminate the possibility of integer overflow, the 
combination of preceding sample values and predictor coefficients 
producing the largest possible value should be considered.<a href="#appendix-A.3-1" class="pilcrow">¶</a></p>
<p id="appendix-A.3-2">To determine the size of the data type needed to 
calculate either a residual sample (on encoding) or an audio sample 
value (on decoding) in a fixed predictor subframe, the maximal possible 
value for these is calculated as described in <a href="#determining-the-necessary-data-type-size" class="auto internal xref">Appendix A.1</a>
 in the following table. For example: if a frame codes for 16-bit audio 
and has some form of stereo decorrelation, the subframe coding for the 
side channel would need 16+1+3 bits if a third order fixed predictor is 
used.<a href="#appendix-A.3-2" class="pilcrow">¶</a></p>
<table class="center" id="table-26">
          <caption><a href="#table-26" class="selfRef">Table 26</a></caption>
<thead>
            <tr>
              <th class="text-left" rowspan="1" colspan="1">Order</th>
              <th class="text-left" rowspan="1" colspan="1">Calculation of residual</th>
              <th class="text-left" rowspan="1" colspan="1">Sample values summed</th>
              <th class="text-left" rowspan="1" colspan="1">Extra bits</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">0</td>
              <td class="text-left" rowspan="1" colspan="1">a(n)</td>
              <td class="text-left" rowspan="1" colspan="1">1</td>
              <td class="text-left" rowspan="1" colspan="1">0</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">1</td>
              <td class="text-left" rowspan="1" colspan="1">a(n) - a(n-1)</td>
              <td class="text-left" rowspan="1" colspan="1">2</td>
              <td class="text-left" rowspan="1" colspan="1">1</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">2</td>
              <td class="text-left" rowspan="1" colspan="1">a(n) - 2 * a(n-1) + a(n-2)</td>
              <td class="text-left" rowspan="1" colspan="1">4</td>
              <td class="text-left" rowspan="1" colspan="1">2</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">3</td>
              <td class="text-left" rowspan="1" colspan="1">a(n) - 3 * a(n-1) + 3 * a(n-2) - a(n-3)</td>
              <td class="text-left" rowspan="1" colspan="1">8</td>
              <td class="text-left" rowspan="1" colspan="1">3</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">4</td>
              <td class="text-left" rowspan="1" colspan="1">a(n) - 4 * a(n-1) + 6 * a(n-2) - 4 * a(n-3) + a(n-4)</td>
              <td class="text-left" rowspan="1" colspan="1">16</td>
              <td class="text-left" rowspan="1" colspan="1">4</td>
            </tr>
          </tbody>
        </table>
<p id="appendix-A.3-4">Where<a href="#appendix-A.3-4" class="pilcrow">¶</a></p>
<ul class="compact">
<li class="compact" id="appendix-A.3-5.1">n is the number of the sample being predicted.<a href="#appendix-A.3-5.1" class="pilcrow">¶</a>
</li>
          <li class="compact" id="appendix-A.3-5.2">a(n) is the sample being predicted.<a href="#appendix-A.3-5.2" class="pilcrow">¶</a>
</li>
          <li class="compact" id="appendix-A.3-5.3">a(n-1) is the sample before the one being predicted, a(n-2) is the sample before that, etc.<a href="#appendix-A.3-5.3" class="pilcrow">¶</a>
</li>
        </ul>
<p id="appendix-A.3-6">For subframes with a linear predictor, the 
calculation is a little more complicated. Each prediction is the sum of 
several multiplications. Each of these multiply a sample value with a 
predictor coefficient. The extra bits needed can be calculated by adding
 the predictor coefficient precision (in bits) to the bit depth of the 
audio samples. To account for the summing of these multiplications, the 
log base 2 of the predictor order rounded up is added.<a href="#appendix-A.3-6" class="pilcrow">¶</a></p>
<p id="appendix-A.3-7">For example, if the sample bit depth of the source is 24, the current subframe encodes a side channel (see <a href="#interchannel-decorrelation" class="auto internal xref">Section 4.2</a>),
 the predictor order is 12, and the predictor coefficient precision is 
15 bits, the minimum required size of the used signed integer data type 
is at least (24 + 1) + 15 + ceil(log2(12)) = 44 bits. As another 
example, with a side-channel subframe bit depth of 16, a predictor order
 of 8, and a predictor coefficient precision of 12 bits, the minimum 
required size of the used signed integer data type is (16 + 1) + 12 + 
ceil(log2(8)) = 32 bits.<a href="#appendix-A.3-7" class="pilcrow">¶</a></p>
</section>
</div>
<div id="residual">
<section id="appendix-A.4">
        <h3 id="name-residual">
<a href="#appendix-A.4" class="section-number selfRef">A.4. </a><a href="#name-residual" class="section-name selfRef">Residual</a>
        </h3>
<p id="appendix-A.4-1">As stated in <a href="#coded-residual" class="auto internal xref">Section 9.2.7</a>,
 an encoder must make sure residual samples are representable by a 
32-bit integer, signed two's complement, excluding the most negative 
value. Continuing as in the previous section, it is possible to 
calculate when residual samples already implicitly fit and when an 
additional check is needed. This implicit fit is achieved when residuals
 would fit a theoretical 31-bit signed int, as that satisfies both of 
the mentioned criteria. When this implicit fit is not achieved, all 
residual values must be calculated and checked individually.<a href="#appendix-A.4-1" class="pilcrow">¶</a></p>
<p id="appendix-A.4-2">For the residual of a fixed predictor, the 
maximum residual sample size was already calculated in the previous 
section. However, for a linear predictor, the prediction is shifted 
right by a certain amount. The number of bits needed for the residual is
 the number of bits calculated in the previous section, reduced by the 
prediction right shift, and increased by one bit to account for the 
subtraction of the prediction from the current sample on encoding.<a href="#appendix-A.4-2" class="pilcrow">¶</a></p>
<p id="appendix-A.4-3">Taking the last example of the previous section, 
where 32 bits were needed for the prediction, the required data type 
size for the residual samples in case of a right shift of 10 bits would 
be 32 - 10 + 1 = 23 bits, which means it is not necessary to perform the
 aforementioned check.<a href="#appendix-A.4-3" class="pilcrow">¶</a></p>
<p id="appendix-A.4-4">As another example, when encoding 32-bit PCM with
 fixed predictors, all predictor orders must be checked. While the 
0-order fixed predictor is guaranteed to have residual samples that fit a
 32-bit signed int, it might produce a residual sample value that is the
 most negative representable value of that 32-bit signed int.<a href="#appendix-A.4-4" class="pilcrow">¶</a></p>
<p id="appendix-A.4-5">Note that on decoding, while the residual sample 
values are limited to the aforementioned range, the predictions are not.
 This means that while the decoding of the residual samples can happen 
fully in 32-bit signed integers, decoders must be sure to execute the 
addition of each residual sample to its accompanying prediction with a 
wide enough signed integer data type like on encoding.<a href="#appendix-A.4-5" class="pilcrow">¶</a></p>
</section>
</div>
<div id="rice-coding">
<section id="appendix-A.5">
        <h3 id="name-rice-coding">
<a href="#appendix-A.5" class="section-number selfRef">A.5. </a><a href="#name-rice-coding" class="section-name selfRef">Rice coding</a>
        </h3>
<p id="appendix-A.5-1">When folding (i.e., zig-zag encoding) the 
residual sample values, no extra bits are needed when the absolute value
 of each residual sample is first stored in an unsigned data type of the
 size of the last step, then doubled, and then has one subtracted 
depending on whether the residual sample was positive or negative. Many 
implementations, however, choose to require one extra bit of data type 
size so zig-zag encoding can happen in one step and without a cast 
instead of the procedure described in the previous sentence.<a href="#appendix-A.5-1" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="past-format-changes">
<section id="appendix-B">
      <h2 id="name-past-format-changes">
<a href="#appendix-B" class="section-number selfRef">Appendix B. </a><a href="#name-past-format-changes" class="section-name selfRef">Past format changes</a>
      </h2>
<p id="appendix-B-1">This informational appendix documents the changes 
made to the FLAC format over the years. This information might be of use
 when encountering FLAC files that were made with software following the
 format as it was before the changes documented in this appendix.<a href="#appendix-B-1" class="pilcrow">¶</a></p>
<p id="appendix-B-2">The FLAC format was first specified in December 
2000 and the bitstream format was considered frozen with the release of 
FLAC (the reference encoder/decoder) 1.0 in July 2001. Only changes made
 since this first stable release are considered in this appendix. 
Changes made to the FLAC streamable subset definition (see <a href="#streamable-subset" class="auto internal xref">Section 7</a>) are not considered.<a href="#appendix-B-2" class="pilcrow">¶</a></p>
<div id="addition-of-blocking-strategy-bit">
<section id="appendix-B.1">
        <h3 id="name-addition-of-blocking-strate">
<a href="#appendix-B.1" class="section-number selfRef">B.1. </a><a href="#name-addition-of-blocking-strate" class="section-name selfRef">Addition of blocking strategy bit</a>
        </h3>
<p id="appendix-B.1-1">Perhaps the largest backwards incompatible change
 to the specification was published in July 2007. Before this change, 
variable block size streams were not explicitly marked as such by a flag
 bit in the frame header. A decoder had two ways to detect a variable 
block size stream, either by comparing the minimum and maximum block 
size in the STREAMINFO metadata block (which are equal for a fixed block
 size stream), or, if a decoder did not receive a STREAMINFO metadata 
block, by detecting a change of block size during a stream, which could 
in theory not happen at all. As the meaning of the coded number in the 
frame header depends on whether or not a stream is variable block size, 
this presented a problem: the meaning of the coded number could not be 
reliably determined. To fix this problem, one of the reserved bits was 
changed to be used as a blocking strategy bit. See also <a href="#frame-header" class="auto internal xref">Section 9.1</a>.<a href="#appendix-B.1-1" class="pilcrow">¶</a></p>
<p id="appendix-B.1-2">Along with the addition of a new flag, the meaning of the block size bits (see <a href="#block-size-bits" class="auto internal xref">Section 9.1.1</a>)
 was subtly changed. Initially, block size bits patterns 0b0001-0b0101 
and 0b1000-0b1111 could only be used for fixed block size streams, while
 0b0110 and 0b0111 could be used for both fixed block size and variable 
block size streams. With the change, these restrictions were lifted, and
 patterns 0b0001-0b1111 are now used for both variable block size and 
fixed block size streams.<a href="#appendix-B.1-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="restriction-of-encoded-residual-samples">
<section id="appendix-B.2">
        <h3 id="name-restriction-of-encoded-resi">
<a href="#appendix-B.2" class="section-number selfRef">B.2. </a><a href="#name-restriction-of-encoded-resi" class="section-name selfRef">Restriction of encoded residual samples</a>
        </h3>
<p id="appendix-B.2-1">Another change to the specification was deemed 
necessary during standardization by the CELLAR working group of the 
IETF. As specified in <a href="#coded-residual" class="auto internal xref">Section 9.2.7</a>
 a limit is imposed on residual samples. This limit was not specified 
prior to the IETF standardization effort. However, as far as was known 
to the working group, no FLAC encoder at that time produced FLAC files 
containing residual samples exceeding this limit. This is mostly because
 it is very unlikely to encounter residual samples exceeding this limit 
when encoding 24-bit PCM, and encoding of PCM with higher bit depths was
 not yet implemented in any known encoder. In fact, these FLAC encoders 
would produce corrupt files upon being triggered to produce such 
residual samples and it is unlikely any non-experimental encoder would 
ever do so, even when presented with crafted material. Therefore, it was
 not expected that existing implementations would be rendered 
non-compliant by this change.<a href="#appendix-B.2-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="addition-of-5-bit-rice-parameters">
<section id="appendix-B.3">
        <h3 id="name-addition-of-5-bit-rice-para">
<a href="#appendix-B.3" class="section-number selfRef">B.3. </a><a href="#name-addition-of-5-bit-rice-para" class="section-name selfRef">Addition of 5-bit Rice parameters</a>
        </h3>
<p id="appendix-B.3-1">One significant addition to the format was the 
residual coding method using 5-bit Rice parameters. Prior to publication
 of this addition in July 2007, there was only one residual coding 
method specified, a partitioned Rice code with 4-bit Rice parameters. 
The range offered by this coding method proved too small when encoding 
24-bit PCM, therefore, a second residual coding method was specified, 
identical to the first but with 5-bit Rice parameters.<a href="#appendix-B.3-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="restriction-of-lpc-shift-to-non-negative-values">
<section id="appendix-B.4">
        <h3 id="name-restriction-of-lpc-shift-to">
<a href="#appendix-B.4" class="section-number selfRef">B.4. </a><a href="#name-restriction-of-lpc-shift-to" class="section-name selfRef">Restriction of LPC shift to non-negative values</a>
        </h3>
<p id="appendix-B.4-1">As stated in <a href="#linear-predictor-subframe" class="auto internal xref">Section 9.2.6</a>,
 the predictor right shift is a number signed two's complement, which 
MUST NOT be negative. This is because right shifting a number by a 
negative amount is undefined behavior in the C programming language 
standard. The intended behavior was that a positive number would be a 
right shift and a negative number would be a left shift. The FLAC 
reference encoder was changed in 2007 to not generate LPC subframes with
 a negative predictor right shift, as it turned out that the use of such
 subframes would only very rarely provide any benefit, and the decoders 
that were already widely in use at that point were not able to handle 
such subframes.<a href="#appendix-B.4-1" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="interoperability-considerations">
<section id="appendix-C">
      <h2 id="name-interoperability-considerat">
<a href="#appendix-C" class="section-number selfRef">Appendix C. </a><a href="#name-interoperability-considerat" class="section-name selfRef">Interoperability considerations</a>
      </h2>
<p id="appendix-C-1">As documented in <a href="#past-format-changes" class="auto internal xref">Appendix B</a>,
 there have been some changes and additions to the FLAC format. 
Additionally, implementation of certain features of the FLAC format took
 many years, meaning early decoder implementations could not be tested 
against files with these features. Finally, many lower-quality FLAC 
decoders only implement just enough features required for playback of 
the most common FLAC files.<a href="#appendix-C-1" class="pilcrow">¶</a></p>
<p id="appendix-C-2">This appendix provides some considerations for 
encoder implementations aiming to create highly compatible files. As 
this topic is one that might change after this document is finished, 
consult <span>[<a href="#FLAC-wiki-interoperability" class="cite xref">FLAC-wiki-interoperability</a>]</span> for more up-to-date information.<a href="#appendix-C-2" class="pilcrow">¶</a></p>
<div id="features-outside-of-the-streamable-subset">
<section id="appendix-C.1">
        <h3 id="name-features-outside-of-the-str">
<a href="#appendix-C.1" class="section-number selfRef">C.1. </a><a href="#name-features-outside-of-the-str" class="section-name selfRef">Features outside of the streamable subset</a>
        </h3>
<p id="appendix-C.1-1">As described in <a href="#streamable-subset" class="auto internal xref">Section 7</a>,
 FLAC specifies a subset of its capabilities as the FLAC streamable 
subset. Certain decoders may choose to only decode FLAC files conforming
 to the limitations imposed by the streamable subset. Therefore, maximum
 compatibility with decoders is achieved when the limitations of the 
FLAC streamable subset are followed when creating FLAC files.<a href="#appendix-C.1-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="variable-block-size">
<section id="appendix-C.2">
        <h3 id="name-variable-block-size">
<a href="#appendix-C.2" class="section-number selfRef">C.2. </a><a href="#name-variable-block-size" class="section-name selfRef">Variable block size</a>
        </h3>
<p id="appendix-C.2-1">Because it is often difficult to find the optimal
 arrangement of block sizes for maximum compression, most encoders 
choose to create files with a fixed block size. Because of this, many 
decoder implementations receive minimal use when handling variable block
 size streams, and this can reveal bugs or reveal that implementations 
do not decode them at all. Furthermore, as explained in <a href="#addition-of-blocking-strategy-bit" class="auto internal xref">Appendix B.1</a>,
 there have been some changes to the way variable block size streams 
were encoded. Because of this, maximum compatibility with decoders is 
achieved when FLAC files are created using fixed block size streams.<a href="#appendix-C.2-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="rice-parameter-5-bit">
<section id="appendix-C.3">
        <h3 id="name-5-bit-rice-parameter">
<a href="#appendix-C.3" class="section-number selfRef">C.3. </a><a href="#name-5-bit-rice-parameter" class="section-name selfRef">5-bit Rice parameter</a>
        </h3>
<p id="appendix-C.3-1">As the addition of the 5-bit Rice parameter, as described in <a href="#addition-of-5-bit-rice-parameters" class="auto internal xref">Appendix B.3</a>,
 occurred quite a few years after the FLAC format was first introduced, 
some early decoders might not be able to decode files containing such 
Rice parameters. The introduction of this was specifically aimed at 
improving compression of 24-bit PCM audio, and compression of 16-bit PCM
 audio only rarely benefits from using 5-bit Rice parameters. Therefore,
 maximum compatibility with decoders is achieved when FLAC files 
containing audio with a bit depth of 16 bits or lower are created 
without any use of 5-bit Rice parameters.<a href="#appendix-C.3-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="rice-escape-code">
<section id="appendix-C.4">
        <h3 id="name-rice-escape-code">
<a href="#appendix-C.4" class="section-number selfRef">C.4. </a><a href="#name-rice-escape-code" class="section-name selfRef">Rice escape code</a>
        </h3>
<p id="appendix-C.4-1">Escaped Rice partitions are seldom used, as it 
turned out their use provides only a very small compression improvement.
 As many encoders therefore do not use these by default or are not 
capable of producing them at all, it is likely that many decoder 
implementations are not able to decode them correctly. Therefore, 
maximum compatibility with decoders is achieved when FLAC files are 
created without any use of escaped Rice partitions.<a href="#appendix-C.4-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="uncommon-block-size-1">
<section id="appendix-C.5">
        <h3 id="name-uncommon-block-size-2">
<a href="#appendix-C.5" class="section-number selfRef">C.5. </a><a href="#name-uncommon-block-size-2" class="section-name selfRef">Uncommon block size</a>
        </h3>
<p id="appendix-C.5-1">For unknown reasons, some decoders have chosen to
 support only common block sizes for all but the last block of a stream.
 Therefore, maximum compatibility with decoders is achieved when 
creating FLAC files using common block sizes, as listed in <a href="#block-size-bits" class="auto internal xref">Section 9.1.1</a>, for all but the last block of a stream.<a href="#appendix-C.5-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="uncommon-bit-depth">
<section id="appendix-C.6">
        <h3 id="name-uncommon-bit-depth">
<a href="#appendix-C.6" class="section-number selfRef">C.6. </a><a href="#name-uncommon-bit-depth" class="section-name selfRef">Uncommon bit depth</a>
        </h3>
<p id="appendix-C.6-1">Most audio is stored in bit depths that are a 
whole number of bytes, e.g., 8, 16 or 24 bit. There is however audio 
with different bit depths. A few examples:<a href="#appendix-C.6-1" class="pilcrow">¶</a></p>
<ul class="compact">
<li class="compact" id="appendix-C.6-2.1">DVD-Audio has the possibility to store 20 bit PCM audio.<a href="#appendix-C.6-2.1" class="pilcrow">¶</a>
</li>
          <li class="compact" id="appendix-C.6-2.2">DAT and DV can store 12 bit PCM audio.<a href="#appendix-C.6-2.2" class="pilcrow">¶</a>
</li>
          <li class="compact" id="appendix-C.6-2.3">NICAM-728 samples at 14 bit, which is companded to 10 bit.<a href="#appendix-C.6-2.3" class="pilcrow">¶</a>
</li>
          <li class="compact" id="appendix-C.6-2.4">8-bit µ-law can be losslessly converted to 14 bit (Linear) PCM.<a href="#appendix-C.6-2.4" class="pilcrow">¶</a>
</li>
          <li class="compact" id="appendix-C.6-2.5">8-bit A-law can be losslessly converted to 13 bit (Linear) PCM.<a href="#appendix-C.6-2.5" class="pilcrow">¶</a>
</li>
        </ul>
<p id="appendix-C.6-3">The FLAC format can contain these bit depths 
directly, but because they are uncommon, some decoders are not able to 
process the resulting files correctly. It is possible to store these 
formats in a FLAC file with a more common bit depth without sacrificing 
compression by padding each sample with zero bits to a bit depth that is
 a whole byte. The FLAC format can efficiently compress these wasted 
bits. See <a href="#wasted-bits-per-sample" class="auto internal xref">Section 9.2.2</a> for details.<a href="#appendix-C.6-3" class="pilcrow">¶</a></p>
<p id="appendix-C.6-4">Therefore, maximum compatibility with decoders is
 achieved when FLAC files are created by padding samples of such audio 
with zero bits to the bit depth that is the next whole number of bytes.<a href="#appendix-C.6-4" class="pilcrow">¶</a></p>
<p id="appendix-C.6-5">In cases where the original signal is already 
padded, this operation cannot be reversed losslessly without knowing the
 original bit depth. To leave no ambiguity, the original bit depth needs
 to be stored, for example, in a vorbis comment field, by storing the 
header of the original file, or in a description of the file. The choice
 of a suitable method is left to the implementer.<a href="#appendix-C.6-5" class="pilcrow">¶</a></p>
<p id="appendix-C.6-6">Besides audio with a 'non-whole byte' bit depth, 
some decoder implementations have chosen to only accept FLAC files 
coding for PCM audio with a bit depth of 16 bit. Many implementations 
support bit depths up to 24 bit but no higher. Consult <span>[<a href="#FLAC-wiki-interoperability" class="cite xref">FLAC-wiki-interoperability</a>]</span> for more up-to-date information.<a href="#appendix-C.6-6" class="pilcrow">¶</a></p>
</section>
</div>
<div id="multi-channel-audio-and-uncommon-sample-rates">
<section id="appendix-C.7">
        <h3 id="name-multi-channel-audio-and-unc">
<a href="#appendix-C.7" class="section-number selfRef">C.7. </a><a href="#name-multi-channel-audio-and-unc" class="section-name selfRef">Multi-channel audio and uncommon sample rates</a>
        </h3>
<p id="appendix-C.7-1">Many FLAC audio players are unable to render 
multi-channel audio or audio with an uncommon sample rate. While this is
 not a concern specific to the FLAC format, it is of note when requiring
 maximum compatibility with decoders. Unlike the previously mentioned 
interoperability considerations, this is one where compatibility cannot 
be improved without sacrificing the lossless nature of the FLAC format.<a href="#appendix-C.7-1" class="pilcrow">¶</a></p>
<p id="appendix-C.7-2">From a non-exhaustive inquiry, it seems that a 
non-negligible amount of players, especially hardware players, do not 
support audio with 3 or more channels or sample rates other than those 
considered common, see <a href="#sample-rate-bits" class="auto internal xref">Section 9.1.2</a>.<a href="#appendix-C.7-2" class="pilcrow">¶</a></p>
<p id="appendix-C.7-3">For those players that do support and are able to
 render multi-channel audio, many do not parse and use the 
WAVEFORMATEXTENSIBLE_CHANNEL_MASK tag (see <a href="#channel-mask" class="auto internal xref">Section 8.6.2</a>).
 This too is an interoperability consideration where compatibility 
cannot be improved without sacrificing the lossless nature of the FLAC 
format.<a href="#appendix-C.7-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="changing-audio-properties-mid-stream">
<section id="appendix-C.8">
        <h3 id="name-changing-audio-properties-m">
<a href="#appendix-C.8" class="section-number selfRef">C.8. </a><a href="#name-changing-audio-properties-m" class="section-name selfRef">Changing audio properties mid-stream</a>
        </h3>
<p id="appendix-C.8-1">Each FLAC frame header stores the audio sample 
rate, number of bits per sample, and number of channels independently of
 the streaminfo metadata block and other frame headers. This was done to
 permit multicasting of FLAC files, but it also allows these properties 
to change mid-stream. However, many FLAC decoders do not handle such 
changes, as few other formats are capable of holding such streams and 
changing playback properties during playback is often not possible 
without interrupting playback. Also, as explained in <a href="#frame-structure" class="auto internal xref">Section 9</a>, using this feature of FLAC results in various practical problems.<a href="#appendix-C.8-1" class="pilcrow">¶</a></p>
<p id="appendix-C.8-2">However, even when storing an audio stream with 
changing properties in FLAC encapsulated in a container capable of 
handling such changes, as recommended in <a href="#frame-structure" class="auto internal xref">Section 9</a>,
 many decoders are not able to decode such a stream correctly. 
Therefore, maximum compatibility with decoders is achieved when FLAC 
files are created with a single set of audio properties, in which the 
properties coded in the streaminfo metadata block (see <a href="#streaminfo" class="auto internal xref">Section 8.2</a>) and the properties coded in all frame headers (see <a href="#frame-header" class="auto internal xref">Section 9.1</a>)
 are the same. This can be achieved by splitting up an input stream with
 changing audio properties at the points where these properties change 
into separate streams or files.<a href="#appendix-C.8-2" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="examples">
<section id="appendix-D">
      <h2 id="name-examples">
<a href="#appendix-D" class="section-number selfRef">Appendix D. </a><a href="#name-examples" class="section-name selfRef">Examples</a>
      </h2>
<p id="appendix-D-1">This informational appendix contains short example 
FLAC files that are decoded step by step. These examples provide a more 
engaging way to understand the FLAC format than the formal 
specification. The text explaining these examples assumes the reader has
 at least cursorily read the specification and that the reader refers to
 the specification for explanation of the terminology used. These 
examples mostly focus on the layout of several metadata blocks and 
subframe types and the implications of certain aspects (for example, 
wasted bits and stereo decorrelation) on this layout.<a href="#appendix-D-1" class="pilcrow">¶</a></p>
<p id="appendix-D-2">The examples feature files generated by various 
FLAC encoders. These are presented in hexadecimal or binary format, 
followed by tables and text referring to various features by their 
starting bit positions in these representations. Each starting position 
(shortened to 'start' in the tables) is a hexadecimal byte position and a
 start bit within that byte, separated by a plus sign. Counts for these 
start at zero. For example, a feature starting at the 3rd bit of the 
17th byte is referred to as starting at 0x10+2. The files that are 
explored in these examples can be found at <span>[<a href="#FLAC-specification-github" class="cite xref">FLAC-specification-github</a>]</span>.<a href="#appendix-D-2" class="pilcrow">¶</a></p>
<p id="appendix-D-3">All data in this appendix has been thoroughly 
verified. However, as this appendix is informational, if any information
 here conflicts with statements in the formal specification, the latter 
takes precedence.<a href="#appendix-D-3" class="pilcrow">¶</a></p>
<div id="decoding-example-1">
<section id="appendix-D.1">
        <h3 id="name-decoding-example-1">
<a href="#appendix-D.1" class="section-number selfRef">D.1. </a><a href="#name-decoding-example-1" class="section-name selfRef">Decoding example 1</a>
        </h3>
<p id="appendix-D.1-1">This very short example FLAC file codes for PCM 
audio that has two channels, each containing one sample. The focus of 
this example is on the essential parts of a FLAC file.<a href="#appendix-D.1-1" class="pilcrow">¶</a></p>
<div id="example-file-1-in-hexadecimal-representation">
<section id="appendix-D.1.1">
          <h4 id="name-example-file-1-in-hexadecim">
<a href="#appendix-D.1.1" class="section-number selfRef">D.1.1. </a><a href="#name-example-file-1-in-hexadecim" class="section-name selfRef">Example file 1 in hexadecimal representation</a>
          </h4>
<div class="alignLeft art-text artwork" id="appendix-D.1.1-1">
<pre>00000000: 664c 6143 8000 0022 1000 1000  fLaC..."....
0000000c: 0000 0f00 000f 0ac4 42f0 0000  ........B...
00000018: 0001 3e84 b418 07dc 6903 0758  ..&gt;.....i..X
00000024: 6a3d ad1a 2e0f fff8 6918 0000  j=......i...
00000030: bf03 58fd 0312 8baa 9a         ..X......

</pre><a href="#appendix-D.1.1-1" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="example-file-1-in-binary-representation">
<section id="appendix-D.1.2">
          <h4 id="name-example-file-1-in-binary-re">
<a href="#appendix-D.1.2" class="section-number selfRef">D.1.2. </a><a href="#name-example-file-1-in-binary-re" class="section-name selfRef">Example file 1 in binary representation</a>
          </h4>
<div class="alignLeft art-text artwork" id="appendix-D.1.2-1">
<pre>00000000: 01100110 01001100 01100001 01000011  fLaC
00000004: 10000000 00000000 00000000 00100010  ..."
00000008: 00010000 00000000 00010000 00000000  ....
0000000c: 00000000 00000000 00001111 00000000  ....
00000010: 00000000 00001111 00001010 11000100  ....
00000014: 01000010 11110000 00000000 00000000  B...
00000018: 00000000 00000001 00111110 10000100  ..&gt;.
0000001c: 10110100 00011000 00000111 11011100  ....
00000020: 01101001 00000011 00000111 01011000  i..X
00000024: 01101010 00111101 10101101 00011010  j=..
00000028: 00101110 00001111 11111111 11111000  ....
0000002c: 01101001 00011000 00000000 00000000  i...
00000030: 10111111 00000011 01011000 11111101  ..X.
00000034: 00000011 00010010 10001011 10101010  ....
00000038: 10011010

</pre><a href="#appendix-D.1.2-1" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="signature-and-streaminfo">
<section id="appendix-D.1.3">
          <h4 id="name-signature-and-streaminfo">
<a href="#appendix-D.1.3" class="section-number selfRef">D.1.3. </a><a href="#name-signature-and-streaminfo" class="section-name selfRef">Signature and streaminfo</a>
          </h4>
<p id="appendix-D.1.3-1">The first 4 bytes of the file contain the fLaC 
file signature. Directly following it is a metadata block. The signature
 and the first metadata block header are broken down in the following 
table.<a href="#appendix-D.1.3-1" class="pilcrow">¶</a></p>
<table class="center" id="table-27">
            <caption><a href="#table-27" class="selfRef">Table 27</a></caption>
<thead>
              <tr>
                <th class="text-left" rowspan="1" colspan="1">Start</th>
                <th class="text-left" rowspan="1" colspan="1">Length</th>
                <th class="text-left" rowspan="1" colspan="1">Contents</th>
                <th class="text-left" rowspan="1" colspan="1">Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x00+0</td>
                <td class="text-left" rowspan="1" colspan="1">4 bytes</td>
                <td class="text-left" rowspan="1" colspan="1">0x664C6143</td>
                <td class="text-left" rowspan="1" colspan="1">fLaC</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x04+0</td>
                <td class="text-left" rowspan="1" colspan="1">1 bit</td>
                <td class="text-left" rowspan="1" colspan="1">0b1</td>
                <td class="text-left" rowspan="1" colspan="1">Last metadata block</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x04+1</td>
                <td class="text-left" rowspan="1" colspan="1">7 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0b0000000</td>
                <td class="text-left" rowspan="1" colspan="1">Streaminfo metadata block</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x05+0</td>
                <td class="text-left" rowspan="1" colspan="1">3 bytes</td>
                <td class="text-left" rowspan="1" colspan="1">0x000022</td>
                <td class="text-left" rowspan="1" colspan="1">Length 34 byte</td>
              </tr>
            </tbody>
          </table>
<p id="appendix-D.1.3-3">As the header indicates that this is the last 
metadata block, the position of the first audio frame can now be 
calculated as the position of the first byte after the metadata block 
header + the length of the block, i.e., 8+34 = 42 or 0x2a. As can be 
seen, 0x2a indeed contains the frame sync code for fixed block size 
streams, 0xfff8.<a href="#appendix-D.1.3-3" class="pilcrow">¶</a></p>
<p id="appendix-D.1.3-4">The streaminfo metadata block contents are broken down in the following table.<a href="#appendix-D.1.3-4" class="pilcrow">¶</a></p>
<table class="center" id="table-28">
            <caption><a href="#table-28" class="selfRef">Table 28</a></caption>
<thead>
              <tr>
                <th class="text-left" rowspan="1" colspan="1">Start</th>
                <th class="text-left" rowspan="1" colspan="1">Length</th>
                <th class="text-left" rowspan="1" colspan="1">Contents</th>
                <th class="text-left" rowspan="1" colspan="1">Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x08+0</td>
                <td class="text-left" rowspan="1" colspan="1">2 bytes</td>
                <td class="text-left" rowspan="1" colspan="1">0x1000</td>
                <td class="text-left" rowspan="1" colspan="1">Min. block size 4096</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x0a+0</td>
                <td class="text-left" rowspan="1" colspan="1">2 bytes</td>
                <td class="text-left" rowspan="1" colspan="1">0x1000</td>
                <td class="text-left" rowspan="1" colspan="1">Max. block size 4096</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x0c+0</td>
                <td class="text-left" rowspan="1" colspan="1">3 bytes</td>
                <td class="text-left" rowspan="1" colspan="1">0x00000f</td>
                <td class="text-left" rowspan="1" colspan="1">Min. frame size 15 byte</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x0f+0</td>
                <td class="text-left" rowspan="1" colspan="1">3 bytes</td>
                <td class="text-left" rowspan="1" colspan="1">0x00000f</td>
                <td class="text-left" rowspan="1" colspan="1">Max. frame size 15 byte</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x12+0</td>
                <td class="text-left" rowspan="1" colspan="1">20 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0x0ac4, 0b0100</td>
                <td class="text-left" rowspan="1" colspan="1">Sample rate 44100 hertz</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x14+4</td>
                <td class="text-left" rowspan="1" colspan="1">3 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0b001</td>
                <td class="text-left" rowspan="1" colspan="1">2 channels</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x14+7</td>
                <td class="text-left" rowspan="1" colspan="1">5 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0b01111</td>
                <td class="text-left" rowspan="1" colspan="1">Sample bit depth 16</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x15+4</td>
                <td class="text-left" rowspan="1" colspan="1">36 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0b0000, 0x00000001</td>
                <td class="text-left" rowspan="1" colspan="1">Total no. of samples 1</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x1a</td>
                <td class="text-left" rowspan="1" colspan="1">16 bytes</td>
                <td class="text-left" rowspan="1" colspan="1">(...)</td>
                <td class="text-left" rowspan="1" colspan="1">MD5 checksum</td>
              </tr>
            </tbody>
          </table>
<p id="appendix-D.1.3-6">The minimum and maximum block size are both 
4096. This was apparently the block size the encoder planned to use, but
 as only 1 interchannel sample was provided, no frames with 4096 samples
 are actually present in this file.<a href="#appendix-D.1.3-6" class="pilcrow">¶</a></p>
<p id="appendix-D.1.3-7">Note that anywhere a number of samples is 
mentioned (block size, total number of samples, sample rate), 
interchannel samples are meant.<a href="#appendix-D.1.3-7" class="pilcrow">¶</a></p>
<p id="appendix-D.1.3-8">The MD5 checksum (starting at 0x1a) is 0x3e84 
b418 07dc 6903 0758 6a3d ad1a 2e0f. This will be validated after 
decoding the samples.<a href="#appendix-D.1.3-8" class="pilcrow">¶</a></p>
</section>
</div>
<div id="audio-frames">
<section id="appendix-D.1.4">
          <h4 id="name-audio-frames">
<a href="#appendix-D.1.4" class="section-number selfRef">D.1.4. </a><a href="#name-audio-frames" class="section-name selfRef">Audio frames</a>
          </h4>
<p id="appendix-D.1.4-1">The frame header starts at position 0x2a and is broken down in the following table.<a href="#appendix-D.1.4-1" class="pilcrow">¶</a></p>
<table class="center" id="table-29">
            <caption><a href="#table-29" class="selfRef">Table 29</a></caption>
<thead>
              <tr>
                <th class="text-left" rowspan="1" colspan="1">Start</th>
                <th class="text-left" rowspan="1" colspan="1">Length</th>
                <th class="text-left" rowspan="1" colspan="1">Contents</th>
                <th class="text-left" rowspan="1" colspan="1">Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x2a+0</td>
                <td class="text-left" rowspan="1" colspan="1">15 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0xff, 0b1111100</td>
                <td class="text-left" rowspan="1" colspan="1">frame sync</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x2b+7</td>
                <td class="text-left" rowspan="1" colspan="1">1 bit</td>
                <td class="text-left" rowspan="1" colspan="1">0b0</td>
                <td class="text-left" rowspan="1" colspan="1">blocking strategy</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x2c+0</td>
                <td class="text-left" rowspan="1" colspan="1">4 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0b0110</td>
                <td class="text-left" rowspan="1" colspan="1">8-bit block size further down</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x2c+4</td>
                <td class="text-left" rowspan="1" colspan="1">4 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0b1001</td>
                <td class="text-left" rowspan="1" colspan="1">sample rate 44.1 kHz</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x2d+0</td>
                <td class="text-left" rowspan="1" colspan="1">4 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0b0001</td>
                <td class="text-left" rowspan="1" colspan="1">stereo, no decorrelation</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x2d+4</td>
                <td class="text-left" rowspan="1" colspan="1">3 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0b100</td>
                <td class="text-left" rowspan="1" colspan="1">bit depth 16 bit</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x2d+7</td>
                <td class="text-left" rowspan="1" colspan="1">1 bit</td>
                <td class="text-left" rowspan="1" colspan="1">0b0</td>
                <td class="text-left" rowspan="1" colspan="1">mandatory 0 bit</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x2e+0</td>
                <td class="text-left" rowspan="1" colspan="1">1 byte</td>
                <td class="text-left" rowspan="1" colspan="1">0x00</td>
                <td class="text-left" rowspan="1" colspan="1">frame number 0</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x2f+0</td>
                <td class="text-left" rowspan="1" colspan="1">1 byte</td>
                <td class="text-left" rowspan="1" colspan="1">0x00</td>
                <td class="text-left" rowspan="1" colspan="1">block size 1</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x30+0</td>
                <td class="text-left" rowspan="1" colspan="1">1 byte</td>
                <td class="text-left" rowspan="1" colspan="1">0xbf</td>
                <td class="text-left" rowspan="1" colspan="1">frame header CRC</td>
              </tr>
            </tbody>
          </table>
<p id="appendix-D.1.4-3">As the stream is a fixed block size stream, the
 number at 0x2e contains a frame number. As the value is smaller than 
128, only 1 byte is used for the encoding.<a href="#appendix-D.1.4-3" class="pilcrow">¶</a></p>
<p id="appendix-D.1.4-4">At byte 0x31, the first subframe starts, which is broken down in the following table.<a href="#appendix-D.1.4-4" class="pilcrow">¶</a></p>
<table class="center" id="table-30">
            <caption><a href="#table-30" class="selfRef">Table 30</a></caption>
<thead>
              <tr>
                <th class="text-left" rowspan="1" colspan="1">Start</th>
                <th class="text-left" rowspan="1" colspan="1">Length</th>
                <th class="text-left" rowspan="1" colspan="1">Contents</th>
                <th class="text-left" rowspan="1" colspan="1">Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x31+0</td>
                <td class="text-left" rowspan="1" colspan="1">1 bit</td>
                <td class="text-left" rowspan="1" colspan="1">0b0</td>
                <td class="text-left" rowspan="1" colspan="1">mandatory 0 bit</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x31+1</td>
                <td class="text-left" rowspan="1" colspan="1">6 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0b000001</td>
                <td class="text-left" rowspan="1" colspan="1">verbatim subframe</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x31+7</td>
                <td class="text-left" rowspan="1" colspan="1">1 bit</td>
                <td class="text-left" rowspan="1" colspan="1">0b1</td>
                <td class="text-left" rowspan="1" colspan="1">wasted bits used</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x32+0</td>
                <td class="text-left" rowspan="1" colspan="1">2 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0b01</td>
                <td class="text-left" rowspan="1" colspan="1">2 wasted bits used</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x32+2</td>
                <td class="text-left" rowspan="1" colspan="1">14 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0b011000, 0xfd</td>
                <td class="text-left" rowspan="1" colspan="1">14-bit unencoded sample</td>
              </tr>
            </tbody>
          </table>
<p id="appendix-D.1.4-6">As the wasted bits flag is 1 in this subframe, 
an unary coded number follows. Starting at 0x32, we see 0b01, which 
unary codes for 1, meaning this subframe uses 2 wasted bits.<a href="#appendix-D.1.4-6" class="pilcrow">¶</a></p>
<p id="appendix-D.1.4-7">As this is a verbatim subframe, the subframe 
only contains unencoded sample values. With a block size of 1, it 
contains only a single sample. The bit depth of the audio is 16 bits, 
but as the subframe header signals the use of 2 wasted bits, only 14 
bits are stored. As no stereo decorrelation is used, a bit depth 
increase for the side channel is not applicable. So, the next 14 bits 
(starting at position 0x32+2) contain the unencoded sample coded 
big-endian, signed two's complement. The value reads 0b011000 11111101, 
or 6397. This value needs to be shifted left by 2 bits, to account for 
the wasted bits. The value is then 0b011000 11111101 00, or 25588.<a href="#appendix-D.1.4-7" class="pilcrow">¶</a></p>
<p id="appendix-D.1.4-8">The second subframe starts at 0x34, and is broken down in the following table.<a href="#appendix-D.1.4-8" class="pilcrow">¶</a></p>
<table class="center" id="table-31">
            <caption><a href="#table-31" class="selfRef">Table 31</a></caption>
<thead>
              <tr>
                <th class="text-left" rowspan="1" colspan="1">Start</th>
                <th class="text-left" rowspan="1" colspan="1">Length</th>
                <th class="text-left" rowspan="1" colspan="1">Contents</th>
                <th class="text-left" rowspan="1" colspan="1">Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x34+0</td>
                <td class="text-left" rowspan="1" colspan="1">1 bit</td>
                <td class="text-left" rowspan="1" colspan="1">0b0</td>
                <td class="text-left" rowspan="1" colspan="1">mandatory 0 bit</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x34+1</td>
                <td class="text-left" rowspan="1" colspan="1">6 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0b000001</td>
                <td class="text-left" rowspan="1" colspan="1">verbatim subframe</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x34+7</td>
                <td class="text-left" rowspan="1" colspan="1">1 bit</td>
                <td class="text-left" rowspan="1" colspan="1">0b1</td>
                <td class="text-left" rowspan="1" colspan="1">wasted bits used</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x35+0</td>
                <td class="text-left" rowspan="1" colspan="1">4 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0b0001</td>
                <td class="text-left" rowspan="1" colspan="1">4 wasted bits used</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x35+4</td>
                <td class="text-left" rowspan="1" colspan="1">12 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0b0010, 0x8b</td>
                <td class="text-left" rowspan="1" colspan="1">12-bit unencoded sample</td>
              </tr>
            </tbody>
          </table>
<p id="appendix-D.1.4-10">Here the wasted bits flag is also one, but the
 unary coded number that follows it is 4 bit long, indicating the use of
 4 wasted bits. This means the sample is stored in 12 bits. The sample 
value is 0b0010 10001011, or 651. This value now has to be shifted left 
by 4 bits, i.e., 0b0010 10001011 0000 or 10416.<a href="#appendix-D.1.4-10" class="pilcrow">¶</a></p>
<p id="appendix-D.1.4-11">At this point, we would undo stereo decorrelation if that was applicable.<a href="#appendix-D.1.4-11" class="pilcrow">¶</a></p>
<p id="appendix-D.1.4-12">As the last subframe ends byte-aligned, no 
padding bits follow it. The next 2 bytes, starting at 0x38, contain the 
frame CRC. As this is the only frame in the file, the file ends with the
 CRC.<a href="#appendix-D.1.4-12" class="pilcrow">¶</a></p>
<p id="appendix-D.1.4-13">To validate the MD5 checksum, we line up the 
samples interleaved, byte-aligned, little endian, signed two's 
complement. The first sample, with value 25588, translates to 0xf463, 
the second sample, with value 10416,  translates to 0xb028. When 
computing the MD5 checksum with 0xf463b028 as input, we get the MD5 
checksum found in the header, so decoding was lossless.<a href="#appendix-D.1.4-13" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="decoding-example-2">
<section id="appendix-D.2">
        <h3 id="name-decoding-example-2">
<a href="#appendix-D.2" class="section-number selfRef">D.2. </a><a href="#name-decoding-example-2" class="section-name selfRef">Decoding example 2</a>
        </h3>
<p id="appendix-D.2-1">This FLAC file is larger than the first example, 
but still contains very little audio. The focus of this example is on 
decoding a subframe with a fixed predictor and a coded residual, but it 
also contains a very short seektable, a Vorbis comment metadata block, 
and a padding metadata block.<a href="#appendix-D.2-1" class="pilcrow">¶</a></p>
<div id="example-file-2-in-hexadecimal-representation">
<section id="appendix-D.2.1">
          <h4 id="name-example-file-2-in-hexadecim">
<a href="#appendix-D.2.1" class="section-number selfRef">D.2.1. </a><a href="#name-example-file-2-in-hexadecim" class="section-name selfRef">Example file 2 in hexadecimal representation</a>
          </h4>
<div class="alignLeft art-text artwork" id="appendix-D.2.1-1">
<pre>00000000: 664c 6143 0000 0022 0010 0010  fLaC..."....
0000000c: 0000 1700 0044 0ac4 42f0 0000  .....D..B...
00000018: 0013 d5b0 5649 75e9 8b8d 8b93  ....VIu.....
00000024: 0422 757b 8103 0300 0012 0000  ."u{........
00000030: 0000 0000 0000 0000 0000 0000  ............
0000003c: 0000 0010 0400 003a 2000 0000  .......: ...
00000048: 7265 6665 7265 6e63 6520 6c69  reference li
00000054: 6246 4c41 4320 312e 332e 3320  bFLAC 1.3.3
00000060: 3230 3139 3038 3034 0100 0000  20190804....
0000006c: 0e00 0000 5449 544c 453d d7a9  ....TITLE=..
00000078: d79c d795 d79d 8100 0006 0000  ............
00000084: 0000 0000 fff8 6998 000f 9912  ......i.....
00000090: 0867 0162 3d14 4299 8f5d f70d  .g.b=.B..]..
0000009c: 6fe0 0c17 caeb 2100 0ee7 a77a  o.....!....z
000000a8: 24a1 590c 1217 b603 097b 784f  $.Y......{xO
000000b4: aa9a 33d2 85e0 70ad 5b1b 4851  ..3...p.[.HQ
000000c0: b401 0d99 d2cd 1a68 f1e6 b810  .......h....
000000cc: fff8 6918 0102 a402 c382 c40b  ..i.........
000000d8: c14a 03ee 48dd 03b6 7c13 30    .J..H...|.0

</pre><a href="#appendix-D.2.1-1" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="example-file-2-in-binary-representation-only-audio-frames">
<section id="appendix-D.2.2">
          <h4 id="name-example-file-2-in-binary-re">
<a href="#appendix-D.2.2" class="section-number selfRef">D.2.2. </a><a href="#name-example-file-2-in-binary-re" class="section-name selfRef">Example file 2 in binary representation (only audio frames)</a>
          </h4>
<div class="alignLeft art-text artwork" id="appendix-D.2.2-1">
<pre>00000088: 11111111 11111000 01101001 10011000  ..i.
0000008c: 00000000 00001111 10011001 00010010  ....
00000090: 00001000 01100111 00000001 01100010  .g.b
00000094: 00111101 00010100 01000010 10011001  =.B.
00000098: 10001111 01011101 11110111 00001101  .]..
0000009c: 01101111 11100000 00001100 00010111  o...
000000a0: 11001010 11101011 00100001 00000000  ..!.
000000a4: 00001110 11100111 10100111 01111010  ...z
000000a8: 00100100 10100001 01011001 00001100  $.Y.
000000ac: 00010010 00010111 10110110 00000011  ....
000000b0: 00001001 01111011 01111000 01001111  .{xO
000000b4: 10101010 10011010 00110011 11010010  ..3.
000000b8: 10000101 11100000 01110000 10101101  ..p.
000000bc: 01011011 00011011 01001000 01010001  [.HQ
000000c0: 10110100 00000001 00001101 10011001  ....
000000c4: 11010010 11001101 00011010 01101000  ...h
000000c8: 11110001 11100110 10111000 00010000  ....
000000cc: 11111111 11111000 01101001 00011000  ..i.
000000d0: 00000001 00000010 10100100 00000010  ....
000000d4: 11000011 10000010 11000100 00001011  ....
000000d8: 11000001 01001010 00000011 11101110  .J..
000000dc: 01001000 11011101 00000011 10110110  H...
000000e0: 01111100 00010011 00110000           |.0

</pre><a href="#appendix-D.2.2-1" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="streaminfo-metadata-block">
<section id="appendix-D.2.3">
          <h4 id="name-streaminfo-metadata-block">
<a href="#appendix-D.2.3" class="section-number selfRef">D.2.3. </a><a href="#name-streaminfo-metadata-block" class="section-name selfRef">Streaminfo metadata block</a>
          </h4>
<p id="appendix-D.2.3-1">Most of the streaminfo block, including its 
header, is the same as in example 1, so only parts that are different 
are listed in the following table.<a href="#appendix-D.2.3-1" class="pilcrow">¶</a></p>
<table class="center" id="table-32">
            <caption><a href="#table-32" class="selfRef">Table 32</a></caption>
<thead>
              <tr>
                <th class="text-left" rowspan="1" colspan="1">Start</th>
                <th class="text-left" rowspan="1" colspan="1">Length</th>
                <th class="text-left" rowspan="1" colspan="1">Contents</th>
                <th class="text-left" rowspan="1" colspan="1">Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x04+0</td>
                <td class="text-left" rowspan="1" colspan="1">1 bit</td>
                <td class="text-left" rowspan="1" colspan="1">0b0</td>
                <td class="text-left" rowspan="1" colspan="1">Not the last metadata block</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x08+0</td>
                <td class="text-left" rowspan="1" colspan="1">2 bytes</td>
                <td class="text-left" rowspan="1" colspan="1">0x0010</td>
                <td class="text-left" rowspan="1" colspan="1">Min. block size 16</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x0a+0</td>
                <td class="text-left" rowspan="1" colspan="1">2 bytes</td>
                <td class="text-left" rowspan="1" colspan="1">0x0010</td>
                <td class="text-left" rowspan="1" colspan="1">Max. block size 16</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x0c+0</td>
                <td class="text-left" rowspan="1" colspan="1">3 bytes</td>
                <td class="text-left" rowspan="1" colspan="1">0x000017</td>
                <td class="text-left" rowspan="1" colspan="1">Min. frame size 23 byte</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x0f+0</td>
                <td class="text-left" rowspan="1" colspan="1">3 bytes</td>
                <td class="text-left" rowspan="1" colspan="1">0x000044</td>
                <td class="text-left" rowspan="1" colspan="1">Max. frame size 68 byte</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x15+4</td>
                <td class="text-left" rowspan="1" colspan="1">36 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0b0000, 0x00000013</td>
                <td class="text-left" rowspan="1" colspan="1">Total no. of samples 19</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x1a</td>
                <td class="text-left" rowspan="1" colspan="1">16 bytes</td>
                <td class="text-left" rowspan="1" colspan="1">(...)</td>
                <td class="text-left" rowspan="1" colspan="1">MD5 checksum</td>
              </tr>
            </tbody>
          </table>
<p id="appendix-D.2.3-3">This time, the minimum and maximum block sizes 
are reflected in the file: there is one block of 16 samples, the last 
block (which has 3 samples) is not considered for the minimum block 
size. The MD5 checksum is 0xd5b0 5649 75e9 8b8d 8b93 0422 757b 8103, 
this will be verified at the end of this example.<a href="#appendix-D.2.3-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="seektable-1">
<section id="appendix-D.2.4">
          <h4 id="name-seektable-2">
<a href="#appendix-D.2.4" class="section-number selfRef">D.2.4. </a><a href="#name-seektable-2" class="section-name selfRef">Seektable</a>
          </h4>
<p id="appendix-D.2.4-1">The seektable metadata block only holds one 
entry. It is not really useful here, as it points to the first frame, 
but it is enough for this example. The seektable metadata block is 
broken down in the following table.<a href="#appendix-D.2.4-1" class="pilcrow">¶</a></p>
<table class="center" id="table-33">
            <caption><a href="#table-33" class="selfRef">Table 33</a></caption>
<thead>
              <tr>
                <th class="text-left" rowspan="1" colspan="1">Start</th>
                <th class="text-left" rowspan="1" colspan="1">Length</th>
                <th class="text-left" rowspan="1" colspan="1">Contents</th>
                <th class="text-left" rowspan="1" colspan="1">Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x2a+0</td>
                <td class="text-left" rowspan="1" colspan="1">1 bit</td>
                <td class="text-left" rowspan="1" colspan="1">0b0</td>
                <td class="text-left" rowspan="1" colspan="1">Not the last metadata block</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x2a+1</td>
                <td class="text-left" rowspan="1" colspan="1">7 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0b0000011</td>
                <td class="text-left" rowspan="1" colspan="1">Seektable metadata block</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x2b+0</td>
                <td class="text-left" rowspan="1" colspan="1">3 bytes</td>
                <td class="text-left" rowspan="1" colspan="1">0x000012</td>
                <td class="text-left" rowspan="1" colspan="1">Length 18 byte</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x2e+0</td>
                <td class="text-left" rowspan="1" colspan="1">8 bytes</td>
                <td class="text-left" rowspan="1" colspan="1">0x0000000000000000</td>
                <td class="text-left" rowspan="1" colspan="1">Seekpoint to sample 0</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x36+0</td>
                <td class="text-left" rowspan="1" colspan="1">8 bytes</td>
                <td class="text-left" rowspan="1" colspan="1">0x0000000000000000</td>
                <td class="text-left" rowspan="1" colspan="1">Seekpoint to offset 0</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x3e+0</td>
                <td class="text-left" rowspan="1" colspan="1">2 bytes</td>
                <td class="text-left" rowspan="1" colspan="1">0x0010</td>
                <td class="text-left" rowspan="1" colspan="1">Seekpoint to block size 16</td>
              </tr>
            </tbody>
          </table>
</section>
</div>
<div id="vorbis-comment-1">
<section id="appendix-D.2.5">
          <h4 id="name-vorbis-comment-2">
<a href="#appendix-D.2.5" class="section-number selfRef">D.2.5. </a><a href="#name-vorbis-comment-2" class="section-name selfRef">Vorbis comment</a>
          </h4>
<p id="appendix-D.2.5-1">The Vorbis comment metadata block contains the vendor string and a single comment. It is broken down in the following table.<a href="#appendix-D.2.5-1" class="pilcrow">¶</a></p>
<table class="center" id="table-34">
            <caption><a href="#table-34" class="selfRef">Table 34</a></caption>
<thead>
              <tr>
                <th class="text-left" rowspan="1" colspan="1">Start</th>
                <th class="text-left" rowspan="1" colspan="1">Length</th>
                <th class="text-left" rowspan="1" colspan="1">Contents</th>
                <th class="text-left" rowspan="1" colspan="1">Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x40+0</td>
                <td class="text-left" rowspan="1" colspan="1">1 bit</td>
                <td class="text-left" rowspan="1" colspan="1">0b0</td>
                <td class="text-left" rowspan="1" colspan="1">Not the last metadata block</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x40+1</td>
                <td class="text-left" rowspan="1" colspan="1">7 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0b0000100</td>
                <td class="text-left" rowspan="1" colspan="1">Vorbis comment metadata block</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x41+0</td>
                <td class="text-left" rowspan="1" colspan="1">3 bytes</td>
                <td class="text-left" rowspan="1" colspan="1">0x00003a</td>
                <td class="text-left" rowspan="1" colspan="1">Length 58 byte</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x44+0</td>
                <td class="text-left" rowspan="1" colspan="1">4 bytes</td>
                <td class="text-left" rowspan="1" colspan="1">0x20000000</td>
                <td class="text-left" rowspan="1" colspan="1">Vendor string length 32 byte</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x48+0</td>
                <td class="text-left" rowspan="1" colspan="1">32 bytes</td>
                <td class="text-left" rowspan="1" colspan="1">(...)</td>
                <td class="text-left" rowspan="1" colspan="1">Vendor string</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x68+0</td>
                <td class="text-left" rowspan="1" colspan="1">4 bytes</td>
                <td class="text-left" rowspan="1" colspan="1">0x01000000</td>
                <td class="text-left" rowspan="1" colspan="1">Number of fields 1</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x6c+0</td>
                <td class="text-left" rowspan="1" colspan="1">4 bytes</td>
                <td class="text-left" rowspan="1" colspan="1">0x0e000000</td>
                <td class="text-left" rowspan="1" colspan="1">Field length 14 byte</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x70+0</td>
                <td class="text-left" rowspan="1" colspan="1">14 bytes</td>
                <td class="text-left" rowspan="1" colspan="1">(...)</td>
                <td class="text-left" rowspan="1" colspan="1">Field contents</td>
              </tr>
            </tbody>
          </table>
<p id="appendix-D.2.5-3">The vendor string is reference libFLAC 1.3.3 
20190804, and the field contents of the only field is TITLE=שלום. The 
Vorbis comment field is 14 bytes but only 10 characters in size, because
 it contains four 2-byte characters.<a href="#appendix-D.2.5-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="padding-1">
<section id="appendix-D.2.6">
          <h4 id="name-padding-2">
<a href="#appendix-D.2.6" class="section-number selfRef">D.2.6. </a><a href="#name-padding-2" class="section-name selfRef">Padding</a>
          </h4>
<p id="appendix-D.2.6-1">The last metadata block is a (very short) padding block.<a href="#appendix-D.2.6-1" class="pilcrow">¶</a></p>
<table class="center" id="table-35">
            <caption><a href="#table-35" class="selfRef">Table 35</a></caption>
<thead>
              <tr>
                <th class="text-left" rowspan="1" colspan="1">Start</th>
                <th class="text-left" rowspan="1" colspan="1">Length</th>
                <th class="text-left" rowspan="1" colspan="1">Contents</th>
                <th class="text-left" rowspan="1" colspan="1">Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x7e+0</td>
                <td class="text-left" rowspan="1" colspan="1">1 bit</td>
                <td class="text-left" rowspan="1" colspan="1">0b1</td>
                <td class="text-left" rowspan="1" colspan="1">Last metadata block</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x7e+1</td>
                <td class="text-left" rowspan="1" colspan="1">7 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0b0000001</td>
                <td class="text-left" rowspan="1" colspan="1">Padding metadata block</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x7f+0</td>
                <td class="text-left" rowspan="1" colspan="1">3 bytes</td>
                <td class="text-left" rowspan="1" colspan="1">0x000006</td>
                <td class="text-left" rowspan="1" colspan="1">Length 6 byte</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x82+0</td>
                <td class="text-left" rowspan="1" colspan="1">6 bytes</td>
                <td class="text-left" rowspan="1" colspan="1">0x000000000000</td>
                <td class="text-left" rowspan="1" colspan="1">Padding bytes</td>
              </tr>
            </tbody>
          </table>
</section>
</div>
<div id="first-audio-frame">
<section id="appendix-D.2.7">
          <h4 id="name-first-audio-frame">
<a href="#appendix-D.2.7" class="section-number selfRef">D.2.7. </a><a href="#name-first-audio-frame" class="section-name selfRef">First audio frame</a>
          </h4>
<p id="appendix-D.2.7-1">The frame header starts at position 0x88 and is broken down in the following table.<a href="#appendix-D.2.7-1" class="pilcrow">¶</a></p>
<table class="center" id="table-36">
            <caption><a href="#table-36" class="selfRef">Table 36</a></caption>
<thead>
              <tr>
                <th class="text-left" rowspan="1" colspan="1">Start</th>
                <th class="text-left" rowspan="1" colspan="1">Length</th>
                <th class="text-left" rowspan="1" colspan="1">Contents</th>
                <th class="text-left" rowspan="1" colspan="1">Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x88+0</td>
                <td class="text-left" rowspan="1" colspan="1">15 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0xff, 0b1111100</td>
                <td class="text-left" rowspan="1" colspan="1">frame sync</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x89+7</td>
                <td class="text-left" rowspan="1" colspan="1">1 bit</td>
                <td class="text-left" rowspan="1" colspan="1">0b0</td>
                <td class="text-left" rowspan="1" colspan="1">blocking strategy</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x8a+0</td>
                <td class="text-left" rowspan="1" colspan="1">4 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0b0110</td>
                <td class="text-left" rowspan="1" colspan="1">8-bit block size further down</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x8a+4</td>
                <td class="text-left" rowspan="1" colspan="1">4 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0b1001</td>
                <td class="text-left" rowspan="1" colspan="1">sample rate 44.1 kHz</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x8b+0</td>
                <td class="text-left" rowspan="1" colspan="1">4 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0b1001</td>
                <td class="text-left" rowspan="1" colspan="1">side-right stereo</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x8b+4</td>
                <td class="text-left" rowspan="1" colspan="1">3 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0b100</td>
                <td class="text-left" rowspan="1" colspan="1">bit depth 16 bit</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x8b+7</td>
                <td class="text-left" rowspan="1" colspan="1">1 bit</td>
                <td class="text-left" rowspan="1" colspan="1">0b0</td>
                <td class="text-left" rowspan="1" colspan="1">mandatory 0 bit</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x8c+0</td>
                <td class="text-left" rowspan="1" colspan="1">1 byte</td>
                <td class="text-left" rowspan="1" colspan="1">0x00</td>
                <td class="text-left" rowspan="1" colspan="1">frame number 0</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x8d+0</td>
                <td class="text-left" rowspan="1" colspan="1">1 byte</td>
                <td class="text-left" rowspan="1" colspan="1">0x0f</td>
                <td class="text-left" rowspan="1" colspan="1">block size 16</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x8e+0</td>
                <td class="text-left" rowspan="1" colspan="1">1 byte</td>
                <td class="text-left" rowspan="1" colspan="1">0x99</td>
                <td class="text-left" rowspan="1" colspan="1">frame header CRC</td>
              </tr>
            </tbody>
          </table>
<p id="appendix-D.2.7-3">The first subframe starts at byte 0x8f, it is 
broken down in the following table excluding the coded residual. As this
 subframe codes for a side channel, the bit depth is increased by 1 bit 
from 16 bit to 17 bit. This is most clearly present in the unencoded 
warm-up sample.<a href="#appendix-D.2.7-3" class="pilcrow">¶</a></p>
<table class="center" id="table-37">
            <caption><a href="#table-37" class="selfRef">Table 37</a></caption>
<thead>
              <tr>
                <th class="text-left" rowspan="1" colspan="1">Start</th>
                <th class="text-left" rowspan="1" colspan="1">Length</th>
                <th class="text-left" rowspan="1" colspan="1">Contents</th>
                <th class="text-left" rowspan="1" colspan="1">Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x8f+0</td>
                <td class="text-left" rowspan="1" colspan="1">1 bit</td>
                <td class="text-left" rowspan="1" colspan="1">0b0</td>
                <td class="text-left" rowspan="1" colspan="1">mandatory 0 bit</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x8f+1</td>
                <td class="text-left" rowspan="1" colspan="1">6 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0b001001</td>
                <td class="text-left" rowspan="1" colspan="1">fixed subframe, 1st order</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x8f+7</td>
                <td class="text-left" rowspan="1" colspan="1">1 bit</td>
                <td class="text-left" rowspan="1" colspan="1">0b0</td>
                <td class="text-left" rowspan="1" colspan="1">no wasted bits used</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x90+0</td>
                <td class="text-left" rowspan="1" colspan="1">17 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0x0867, 0b0</td>
                <td class="text-left" rowspan="1" colspan="1">unencoded warm-up sample</td>
              </tr>
            </tbody>
          </table>
<p id="appendix-D.2.7-5">The coded residual is broken down in the 
following table. All quotients are unary coded, all remainders are 
stored unencoded with a number of bits specified by the Rice parameter.<a href="#appendix-D.2.7-5" class="pilcrow">¶</a></p>
<table class="center" id="table-38">
            <caption><a href="#table-38" class="selfRef">Table 38</a></caption>
<thead>
              <tr>
                <th class="text-left" rowspan="1" colspan="1">Start</th>
                <th class="text-left" rowspan="1" colspan="1">Length</th>
                <th class="text-left" rowspan="1" colspan="1">Contents</th>
                <th class="text-left" rowspan="1" colspan="1">Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x92+1</td>
                <td class="text-left" rowspan="1" colspan="1">2 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0b00</td>
                <td class="text-left" rowspan="1" colspan="1">Rice code with 4-bit parameter</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x92+3</td>
                <td class="text-left" rowspan="1" colspan="1">4 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0b0000</td>
                <td class="text-left" rowspan="1" colspan="1">Partition order 0</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x92+7</td>
                <td class="text-left" rowspan="1" colspan="1">4 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0b1011</td>
                <td class="text-left" rowspan="1" colspan="1">Rice parameter 11</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x93+3</td>
                <td class="text-left" rowspan="1" colspan="1">4 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0b0001</td>
                <td class="text-left" rowspan="1" colspan="1">Quotient 3</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x93+7</td>
                <td class="text-left" rowspan="1" colspan="1">11 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0b00011110100</td>
                <td class="text-left" rowspan="1" colspan="1">Remainder 244</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x95+2</td>
                <td class="text-left" rowspan="1" colspan="1">2 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0b01</td>
                <td class="text-left" rowspan="1" colspan="1">Quotient 1</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x95+4</td>
                <td class="text-left" rowspan="1" colspan="1">11 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0b01000100001</td>
                <td class="text-left" rowspan="1" colspan="1">Remainder 545</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x96+7</td>
                <td class="text-left" rowspan="1" colspan="1">2 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0b01</td>
                <td class="text-left" rowspan="1" colspan="1">Quotient 1</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x97+1</td>
                <td class="text-left" rowspan="1" colspan="1">11 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0b00110011000</td>
                <td class="text-left" rowspan="1" colspan="1">Remainder 408</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x98+4</td>
                <td class="text-left" rowspan="1" colspan="1">1 bit</td>
                <td class="text-left" rowspan="1" colspan="1">0b1</td>
                <td class="text-left" rowspan="1" colspan="1">Quotient 0</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x98+5</td>
                <td class="text-left" rowspan="1" colspan="1">11 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0b11101011101</td>
                <td class="text-left" rowspan="1" colspan="1">Remainder 1885</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x9a+0</td>
                <td class="text-left" rowspan="1" colspan="1">1 bit</td>
                <td class="text-left" rowspan="1" colspan="1">0b1</td>
                <td class="text-left" rowspan="1" colspan="1">Quotient 0</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x9a+1</td>
                <td class="text-left" rowspan="1" colspan="1">11 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0b11101110000</td>
                <td class="text-left" rowspan="1" colspan="1">Remainder 1904</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x9b+4</td>
                <td class="text-left" rowspan="1" colspan="1">1 bit</td>
                <td class="text-left" rowspan="1" colspan="1">0b1</td>
                <td class="text-left" rowspan="1" colspan="1">Quotient 0</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x9b+5</td>
                <td class="text-left" rowspan="1" colspan="1">11 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0b10101101111</td>
                <td class="text-left" rowspan="1" colspan="1">Remainder 1391</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x9d+0</td>
                <td class="text-left" rowspan="1" colspan="1">1 bit</td>
                <td class="text-left" rowspan="1" colspan="1">0b1</td>
                <td class="text-left" rowspan="1" colspan="1">Quotient 0</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x9d+1</td>
                <td class="text-left" rowspan="1" colspan="1">11 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0b11000000000</td>
                <td class="text-left" rowspan="1" colspan="1">Remainder 1536</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x9e+4</td>
                <td class="text-left" rowspan="1" colspan="1">1 bit</td>
                <td class="text-left" rowspan="1" colspan="1">0b1</td>
                <td class="text-left" rowspan="1" colspan="1">Quotient 0</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x9e+5</td>
                <td class="text-left" rowspan="1" colspan="1">11 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0b10000010111</td>
                <td class="text-left" rowspan="1" colspan="1">Remainder 1047</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0xa0+0</td>
                <td class="text-left" rowspan="1" colspan="1">1 bit</td>
                <td class="text-left" rowspan="1" colspan="1">0b1</td>
                <td class="text-left" rowspan="1" colspan="1">Quotient 0</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0xa0+1</td>
                <td class="text-left" rowspan="1" colspan="1">11 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0b10010101110</td>
                <td class="text-left" rowspan="1" colspan="1">Remainder 1198</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0xa1+4</td>
                <td class="text-left" rowspan="1" colspan="1">1 bit</td>
                <td class="text-left" rowspan="1" colspan="1">0b1</td>
                <td class="text-left" rowspan="1" colspan="1">Quotient 0</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0xa1+5</td>
                <td class="text-left" rowspan="1" colspan="1">11 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0b01100100001</td>
                <td class="text-left" rowspan="1" colspan="1">Remainder 801</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0xa3+0</td>
                <td class="text-left" rowspan="1" colspan="1">13 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0b0000000000001</td>
                <td class="text-left" rowspan="1" colspan="1">Quotient 12</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0xa4+5</td>
                <td class="text-left" rowspan="1" colspan="1">11 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0b11011100111</td>
                <td class="text-left" rowspan="1" colspan="1">Remainder 1767</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0xa6+0</td>
                <td class="text-left" rowspan="1" colspan="1">1 bit</td>
                <td class="text-left" rowspan="1" colspan="1">0b1</td>
                <td class="text-left" rowspan="1" colspan="1">Quotient 0</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0xa6+1</td>
                <td class="text-left" rowspan="1" colspan="1">11 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0b01001110111</td>
                <td class="text-left" rowspan="1" colspan="1">Remainder 631</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0xa7+4</td>
                <td class="text-left" rowspan="1" colspan="1">1 bit</td>
                <td class="text-left" rowspan="1" colspan="1">0b1</td>
                <td class="text-left" rowspan="1" colspan="1">Quotient 0</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0xa7+5</td>
                <td class="text-left" rowspan="1" colspan="1">11 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0b01000100100</td>
                <td class="text-left" rowspan="1" colspan="1">Remainder 548</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0xa9+0</td>
                <td class="text-left" rowspan="1" colspan="1">1 bit</td>
                <td class="text-left" rowspan="1" colspan="1">0b1</td>
                <td class="text-left" rowspan="1" colspan="1">Quotient 0</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0xa9+1</td>
                <td class="text-left" rowspan="1" colspan="1">11 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0b01000010101</td>
                <td class="text-left" rowspan="1" colspan="1">Remainder 533</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0xaa+4</td>
                <td class="text-left" rowspan="1" colspan="1">1 bit</td>
                <td class="text-left" rowspan="1" colspan="1">0b1</td>
                <td class="text-left" rowspan="1" colspan="1">Quotient 0</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0xaa+5</td>
                <td class="text-left" rowspan="1" colspan="1">11 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0b00100001100</td>
                <td class="text-left" rowspan="1" colspan="1">Remainder 268</td>
              </tr>
            </tbody>
          </table>
<p id="appendix-D.2.7-7">At this point, the decoder should know it is 
done decoding the coded residual, as it received 16 samples: 1 warm-up 
sample and 15 residual samples. Each residual sample can be calculated 
from the quotient and remainder, and undoing the zig-zag encoding. For 
example, the value of the first zig-zag encoded residual sample is 3 * 
2^11 + 244 = 6388. As this is an even number, the zig-zag encoding is 
undone by dividing by 2, the residual sample value is 3194. This is done
 for all residual samples in the next table.<a href="#appendix-D.2.7-7" class="pilcrow">¶</a></p>
<table class="center" id="table-39">
            <caption><a href="#table-39" class="selfRef">Table 39</a></caption>
<thead>
              <tr>
                <th class="text-left" rowspan="1" colspan="1">Quotient</th>
                <th class="text-left" rowspan="1" colspan="1">Remainder</th>
                <th class="text-left" rowspan="1" colspan="1">Zig-zag encoded</th>
                <th class="text-left" rowspan="1" colspan="1">Residual sample value</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">3</td>
                <td class="text-left" rowspan="1" colspan="1">244</td>
                <td class="text-left" rowspan="1" colspan="1">6388</td>
                <td class="text-left" rowspan="1" colspan="1">3194</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">1</td>
                <td class="text-left" rowspan="1" colspan="1">545</td>
                <td class="text-left" rowspan="1" colspan="1">2593</td>
                <td class="text-left" rowspan="1" colspan="1">-1297</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">1</td>
                <td class="text-left" rowspan="1" colspan="1">408</td>
                <td class="text-left" rowspan="1" colspan="1">2456</td>
                <td class="text-left" rowspan="1" colspan="1">1228</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0</td>
                <td class="text-left" rowspan="1" colspan="1">1885</td>
                <td class="text-left" rowspan="1" colspan="1">1885</td>
                <td class="text-left" rowspan="1" colspan="1">-943</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0</td>
                <td class="text-left" rowspan="1" colspan="1">1904</td>
                <td class="text-left" rowspan="1" colspan="1">1904</td>
                <td class="text-left" rowspan="1" colspan="1">952</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0</td>
                <td class="text-left" rowspan="1" colspan="1">1391</td>
                <td class="text-left" rowspan="1" colspan="1">1391</td>
                <td class="text-left" rowspan="1" colspan="1">-696</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0</td>
                <td class="text-left" rowspan="1" colspan="1">1536</td>
                <td class="text-left" rowspan="1" colspan="1">1536</td>
                <td class="text-left" rowspan="1" colspan="1">768</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0</td>
                <td class="text-left" rowspan="1" colspan="1">1047</td>
                <td class="text-left" rowspan="1" colspan="1">1047</td>
                <td class="text-left" rowspan="1" colspan="1">-524</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0</td>
                <td class="text-left" rowspan="1" colspan="1">1198</td>
                <td class="text-left" rowspan="1" colspan="1">1198</td>
                <td class="text-left" rowspan="1" colspan="1">599</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0</td>
                <td class="text-left" rowspan="1" colspan="1">801</td>
                <td class="text-left" rowspan="1" colspan="1">801</td>
                <td class="text-left" rowspan="1" colspan="1">-401</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">12</td>
                <td class="text-left" rowspan="1" colspan="1">1767</td>
                <td class="text-left" rowspan="1" colspan="1">26343</td>
                <td class="text-left" rowspan="1" colspan="1">-13172</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0</td>
                <td class="text-left" rowspan="1" colspan="1">631</td>
                <td class="text-left" rowspan="1" colspan="1">631</td>
                <td class="text-left" rowspan="1" colspan="1">-316</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0</td>
                <td class="text-left" rowspan="1" colspan="1">548</td>
                <td class="text-left" rowspan="1" colspan="1">548</td>
                <td class="text-left" rowspan="1" colspan="1">274</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0</td>
                <td class="text-left" rowspan="1" colspan="1">533</td>
                <td class="text-left" rowspan="1" colspan="1">533</td>
                <td class="text-left" rowspan="1" colspan="1">-267</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0</td>
                <td class="text-left" rowspan="1" colspan="1">268</td>
                <td class="text-left" rowspan="1" colspan="1">268</td>
                <td class="text-left" rowspan="1" colspan="1">134</td>
              </tr>
            </tbody>
          </table>
<p id="appendix-D.2.7-9">It can be calculated that using a Rice code is,
 in this case, more efficient than storing values unencoded. The Rice 
code (excluding the partition order and parameter) is 199 bits in 
length. The largest residual value (-13172) would need 15 bits to be 
stored unencoded, so storing all 15 samples with 15 bits results in a 
sequence with a length of 225 bits.<a href="#appendix-D.2.7-9" class="pilcrow">¶</a></p>
<p id="appendix-D.2.7-10">The next step is using the predictor and the 
residuals to restore the sample values. As this subframe uses a fixed 
predictor with order 1, this means adding the residual value to the 
value of the previous sample.<a href="#appendix-D.2.7-10" class="pilcrow">¶</a></p>
<table class="center" id="table-40">
            <caption><a href="#table-40" class="selfRef">Table 40</a></caption>
<thead>
              <tr>
                <th class="text-left" rowspan="1" colspan="1">Residual</th>
                <th class="text-left" rowspan="1" colspan="1">Sample value</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">(warm-up)</td>
                <td class="text-left" rowspan="1" colspan="1">4302</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">3194</td>
                <td class="text-left" rowspan="1" colspan="1">7496</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">-1297</td>
                <td class="text-left" rowspan="1" colspan="1">6199</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">1228</td>
                <td class="text-left" rowspan="1" colspan="1">7427</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">-943</td>
                <td class="text-left" rowspan="1" colspan="1">6484</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">952</td>
                <td class="text-left" rowspan="1" colspan="1">7436</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">-696</td>
                <td class="text-left" rowspan="1" colspan="1">6740</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">768</td>
                <td class="text-left" rowspan="1" colspan="1">7508</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">-524</td>
                <td class="text-left" rowspan="1" colspan="1">6984</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">599</td>
                <td class="text-left" rowspan="1" colspan="1">7583</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">-401</td>
                <td class="text-left" rowspan="1" colspan="1">7182</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">-13172</td>
                <td class="text-left" rowspan="1" colspan="1">-5990</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">-316</td>
                <td class="text-left" rowspan="1" colspan="1">-6306</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">274</td>
                <td class="text-left" rowspan="1" colspan="1">-6032</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">-267</td>
                <td class="text-left" rowspan="1" colspan="1">-6299</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">134</td>
                <td class="text-left" rowspan="1" colspan="1">-6165</td>
              </tr>
            </tbody>
          </table>
<p id="appendix-D.2.7-12">With this, the decoding of the first subframe 
is complete. The decoding of the second subframe is very similar, as it 
also uses a fixed predictor of order 1, so this is left as an exercise 
for the reader, the results are in the next table. The next step is 
undoing stereo decorrelation, which is done in the following table. As 
the stereo decorrelation is side-right, the samples in the right channel
 come directly from the second subframe, while the samples in the left 
channel are found by adding the values of both subframes for each 
sample.<a href="#appendix-D.2.7-12" class="pilcrow">¶</a></p>
<table class="center" id="table-41">
            <caption><a href="#table-41" class="selfRef">Table 41</a></caption>
<thead>
              <tr>
                <th class="text-left" rowspan="1" colspan="1">Subframe 1</th>
                <th class="text-left" rowspan="1" colspan="1">Subframe 2</th>
                <th class="text-left" rowspan="1" colspan="1">Left</th>
                <th class="text-left" rowspan="1" colspan="1">Right</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">4302</td>
                <td class="text-left" rowspan="1" colspan="1">6070</td>
                <td class="text-left" rowspan="1" colspan="1">10372</td>
                <td class="text-left" rowspan="1" colspan="1">6070</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">7496</td>
                <td class="text-left" rowspan="1" colspan="1">10545</td>
                <td class="text-left" rowspan="1" colspan="1">18041</td>
                <td class="text-left" rowspan="1" colspan="1">10545</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">6199</td>
                <td class="text-left" rowspan="1" colspan="1">8743</td>
                <td class="text-left" rowspan="1" colspan="1">14942</td>
                <td class="text-left" rowspan="1" colspan="1">8743</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">7427</td>
                <td class="text-left" rowspan="1" colspan="1">10449</td>
                <td class="text-left" rowspan="1" colspan="1">17876</td>
                <td class="text-left" rowspan="1" colspan="1">10449</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">6484</td>
                <td class="text-left" rowspan="1" colspan="1">9143</td>
                <td class="text-left" rowspan="1" colspan="1">15627</td>
                <td class="text-left" rowspan="1" colspan="1">9143</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">7436</td>
                <td class="text-left" rowspan="1" colspan="1">10463</td>
                <td class="text-left" rowspan="1" colspan="1">17899</td>
                <td class="text-left" rowspan="1" colspan="1">10463</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">6740</td>
                <td class="text-left" rowspan="1" colspan="1">9502</td>
                <td class="text-left" rowspan="1" colspan="1">16242</td>
                <td class="text-left" rowspan="1" colspan="1">9502</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">7508</td>
                <td class="text-left" rowspan="1" colspan="1">10569</td>
                <td class="text-left" rowspan="1" colspan="1">18077</td>
                <td class="text-left" rowspan="1" colspan="1">10569</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">6984</td>
                <td class="text-left" rowspan="1" colspan="1">9840</td>
                <td class="text-left" rowspan="1" colspan="1">16824</td>
                <td class="text-left" rowspan="1" colspan="1">9840</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">7583</td>
                <td class="text-left" rowspan="1" colspan="1">10680</td>
                <td class="text-left" rowspan="1" colspan="1">18263</td>
                <td class="text-left" rowspan="1" colspan="1">10680</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">7182</td>
                <td class="text-left" rowspan="1" colspan="1">10113</td>
                <td class="text-left" rowspan="1" colspan="1">17295</td>
                <td class="text-left" rowspan="1" colspan="1">10113</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">-5990</td>
                <td class="text-left" rowspan="1" colspan="1">-8428</td>
                <td class="text-left" rowspan="1" colspan="1">-14418</td>
                <td class="text-left" rowspan="1" colspan="1">-8428</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">-6306</td>
                <td class="text-left" rowspan="1" colspan="1">-8895</td>
                <td class="text-left" rowspan="1" colspan="1">-15201</td>
                <td class="text-left" rowspan="1" colspan="1">-8895</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">-6032</td>
                <td class="text-left" rowspan="1" colspan="1">-8476</td>
                <td class="text-left" rowspan="1" colspan="1">-14508</td>
                <td class="text-left" rowspan="1" colspan="1">-8476</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">-6299</td>
                <td class="text-left" rowspan="1" colspan="1">-8896</td>
                <td class="text-left" rowspan="1" colspan="1">-15195</td>
                <td class="text-left" rowspan="1" colspan="1">-8896</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">-6165</td>
                <td class="text-left" rowspan="1" colspan="1">-8653</td>
                <td class="text-left" rowspan="1" colspan="1">-14818</td>
                <td class="text-left" rowspan="1" colspan="1">-8653</td>
              </tr>
            </tbody>
          </table>
<p id="appendix-D.2.7-14">As the second subframe ends byte-aligned, no 
padding bits follow it. Finally, the last 2 bytes of the frame contain 
the frame CRC.<a href="#appendix-D.2.7-14" class="pilcrow">¶</a></p>
</section>
</div>
<div id="second-audio-frame">
<section id="appendix-D.2.8">
          <h4 id="name-second-audio-frame">
<a href="#appendix-D.2.8" class="section-number selfRef">D.2.8. </a><a href="#name-second-audio-frame" class="section-name selfRef">Second audio frame</a>
          </h4>
<p id="appendix-D.2.8-1">The second audio frame is very similar to the frame decoded in the first example, but this time not 1 but 3 samples are present.<a href="#appendix-D.2.8-1" class="pilcrow">¶</a></p>
<p id="appendix-D.2.8-2">The frame header starts at position 0xcc and is broken down in the following table.<a href="#appendix-D.2.8-2" class="pilcrow">¶</a></p>
<table class="center" id="table-42">
            <caption><a href="#table-42" class="selfRef">Table 42</a></caption>
<thead>
              <tr>
                <th class="text-left" rowspan="1" colspan="1">Start</th>
                <th class="text-left" rowspan="1" colspan="1">Length</th>
                <th class="text-left" rowspan="1" colspan="1">Contents</th>
                <th class="text-left" rowspan="1" colspan="1">Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0xcc+0</td>
                <td class="text-left" rowspan="1" colspan="1">15 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0xff, 0b1111100</td>
                <td class="text-left" rowspan="1" colspan="1">frame sync</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0xcd+7</td>
                <td class="text-left" rowspan="1" colspan="1">1 bit</td>
                <td class="text-left" rowspan="1" colspan="1">0b0</td>
                <td class="text-left" rowspan="1" colspan="1">blocking strategy</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0xce+0</td>
                <td class="text-left" rowspan="1" colspan="1">4 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0b0110</td>
                <td class="text-left" rowspan="1" colspan="1">8-bit block size further down</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0xce+4</td>
                <td class="text-left" rowspan="1" colspan="1">4 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0b1001</td>
                <td class="text-left" rowspan="1" colspan="1">sample rate 44.1 kHz</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0xcf+0</td>
                <td class="text-left" rowspan="1" colspan="1">4 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0b0001</td>
                <td class="text-left" rowspan="1" colspan="1">stereo, no decorrelation</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0xcf+4</td>
                <td class="text-left" rowspan="1" colspan="1">3 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0b100</td>
                <td class="text-left" rowspan="1" colspan="1">bit depth 16 bit</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0xcf+7</td>
                <td class="text-left" rowspan="1" colspan="1">1 bit</td>
                <td class="text-left" rowspan="1" colspan="1">0b0</td>
                <td class="text-left" rowspan="1" colspan="1">mandatory 0 bit</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0xd0+0</td>
                <td class="text-left" rowspan="1" colspan="1">1 byte</td>
                <td class="text-left" rowspan="1" colspan="1">0x01</td>
                <td class="text-left" rowspan="1" colspan="1">frame number 1</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0xd1+0</td>
                <td class="text-left" rowspan="1" colspan="1">1 byte</td>
                <td class="text-left" rowspan="1" colspan="1">0x02</td>
                <td class="text-left" rowspan="1" colspan="1">block size 3</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0xd2+0</td>
                <td class="text-left" rowspan="1" colspan="1">1 byte</td>
                <td class="text-left" rowspan="1" colspan="1">0xa4</td>
                <td class="text-left" rowspan="1" colspan="1">frame header CRC</td>
              </tr>
            </tbody>
          </table>
<p id="appendix-D.2.8-4">The first subframe starts at 0xd3+0 and is broken down in the following table.<a href="#appendix-D.2.8-4" class="pilcrow">¶</a></p>
<table class="center" id="table-43">
            <caption><a href="#table-43" class="selfRef">Table 43</a></caption>
<thead>
              <tr>
                <th class="text-left" rowspan="1" colspan="1">Start</th>
                <th class="text-left" rowspan="1" colspan="1">Length</th>
                <th class="text-left" rowspan="1" colspan="1">Contents</th>
                <th class="text-left" rowspan="1" colspan="1">Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0xd3+0</td>
                <td class="text-left" rowspan="1" colspan="1">1 bit</td>
                <td class="text-left" rowspan="1" colspan="1">0b0</td>
                <td class="text-left" rowspan="1" colspan="1">mandatory 0 bit</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0xd3+1</td>
                <td class="text-left" rowspan="1" colspan="1">6 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0b000001</td>
                <td class="text-left" rowspan="1" colspan="1">verbatim subframe</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0xd3+7</td>
                <td class="text-left" rowspan="1" colspan="1">1 bit</td>
                <td class="text-left" rowspan="1" colspan="1">0b0</td>
                <td class="text-left" rowspan="1" colspan="1">no wasted bits used</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0xd4+0</td>
                <td class="text-left" rowspan="1" colspan="1">16 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0xc382</td>
                <td class="text-left" rowspan="1" colspan="1">16-bit unencoded sample</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0xd6+0</td>
                <td class="text-left" rowspan="1" colspan="1">16 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0xc40b</td>
                <td class="text-left" rowspan="1" colspan="1">16-bit unencoded sample</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0xd8+0</td>
                <td class="text-left" rowspan="1" colspan="1">16 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0xc14a</td>
                <td class="text-left" rowspan="1" colspan="1">16-bit unencoded sample</td>
              </tr>
            </tbody>
          </table>
<p id="appendix-D.2.8-6">The second subframe starts at 0xda+0 and is broken down in the following table.<a href="#appendix-D.2.8-6" class="pilcrow">¶</a></p>
<table class="center" id="table-44">
            <caption><a href="#table-44" class="selfRef">Table 44</a></caption>
<thead>
              <tr>
                <th class="text-left" rowspan="1" colspan="1">Start</th>
                <th class="text-left" rowspan="1" colspan="1">Length</th>
                <th class="text-left" rowspan="1" colspan="1">Contents</th>
                <th class="text-left" rowspan="1" colspan="1">Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0xda+0</td>
                <td class="text-left" rowspan="1" colspan="1">1 bit</td>
                <td class="text-left" rowspan="1" colspan="1">0b0</td>
                <td class="text-left" rowspan="1" colspan="1">mandatory 0 bit</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0xda+1</td>
                <td class="text-left" rowspan="1" colspan="1">6 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0b000001</td>
                <td class="text-left" rowspan="1" colspan="1">verbatim subframe</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0xda+7</td>
                <td class="text-left" rowspan="1" colspan="1">1 bit</td>
                <td class="text-left" rowspan="1" colspan="1">0b1</td>
                <td class="text-left" rowspan="1" colspan="1">wasted bits used</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0xdb+0</td>
                <td class="text-left" rowspan="1" colspan="1">1 bit</td>
                <td class="text-left" rowspan="1" colspan="1">0b1</td>
                <td class="text-left" rowspan="1" colspan="1">1 wasted bit used</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0xdb+1</td>
                <td class="text-left" rowspan="1" colspan="1">15 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0b110111001001000</td>
                <td class="text-left" rowspan="1" colspan="1">15-bit unencoded sample</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0xdd+0</td>
                <td class="text-left" rowspan="1" colspan="1">15 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0b110111010000001</td>
                <td class="text-left" rowspan="1" colspan="1">15-bit unencoded sample</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0xde+7</td>
                <td class="text-left" rowspan="1" colspan="1">15 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0b110110110011111</td>
                <td class="text-left" rowspan="1" colspan="1">15-bit unencoded sample</td>
              </tr>
            </tbody>
          </table>
<p id="appendix-D.2.8-8">As this subframe uses wasted bits, the 15-bit 
unencoded samples need to be shifted left by 1 bit. For example, sample 1
 is stored as -4536 and becomes -9072 after shifting left 1 bit.<a href="#appendix-D.2.8-8" class="pilcrow">¶</a></p>
<p id="appendix-D.2.8-9">As the last subframe does not end on byte alignment, 2 padding bits are added before the 2 byte frame CRC follows at 0xe1+0.<a href="#appendix-D.2.8-9" class="pilcrow">¶</a></p>
</section>
</div>
<div id="md5-checksum-verification">
<section id="appendix-D.2.9">
          <h4 id="name-md5-checksum-verification">
<a href="#appendix-D.2.9" class="section-number selfRef">D.2.9. </a><a href="#name-md5-checksum-verification" class="section-name selfRef">MD5 checksum verification</a>
          </h4>
<p id="appendix-D.2.9-1">All samples in the file have been decoded, we 
can now verify the MD5 checksum. All sample values must be interleaved 
and stored signed, coded little-endian. The result of this follows in 
groups of 12 samples (i.e., 6 interchannel samples) per line.<a href="#appendix-D.2.9-1" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="appendix-D.2.9-2">
<pre>0x8428 B617 7946 3129 5E3A 2722 D445 D128 0B3D B723 EB45 DF28
0x723f 1E25 9D46 4929 B841 7026 5747 B829 8F43 8127 AEC7 14DF
0x9FC4 41DD 54C7 E4DE A5C4 40DD 1EC6 33DE 82C3 90DC 0BC4 02DD
0x4AC1 3EDB

</pre><a href="#appendix-D.2.9-2" class="pilcrow">¶</a>
</div>
<p id="appendix-D.2.9-3">The MD5 checksum of this is indeed the same as the one found in the streaminfo metadata block.<a href="#appendix-D.2.9-3" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="decoding-example-3">
<section id="appendix-D.3">
        <h3 id="name-decoding-example-3">
<a href="#appendix-D.3" class="section-number selfRef">D.3. </a><a href="#name-decoding-example-3" class="section-name selfRef">Decoding example 3</a>
        </h3>
<p id="appendix-D.3-1">This example is once again a very short FLAC 
file. The focus of this example is on decoding a subframe with a linear 
predictor and a coded residual with more than one partition.<a href="#appendix-D.3-1" class="pilcrow">¶</a></p>
<div id="example-file-3-in-hexadecimal-representation">
<section id="appendix-D.3.1">
          <h4 id="name-example-file-3-in-hexadecim">
<a href="#appendix-D.3.1" class="section-number selfRef">D.3.1. </a><a href="#name-example-file-3-in-hexadecim" class="section-name selfRef">Example file 3 in hexadecimal representation</a>
          </h4>
<div class="alignLeft art-text artwork" id="appendix-D.3.1-1">
<pre>00000000: 664c 6143 8000 0022 1000 1000  fLaC..."....
0000000c: 0000 1f00 001f 07d0 0070 0000  .........p..
00000018: 0018 f8f9 e396 f5cb cfc6 dc80  ............
00000024: 7f99 7790 6b32 fff8 6802 0017  ..w.k2..h...
00000030: e944 004f 6f31 3d10 47d2 27cb  .D.Oo1=.G.'.
0000003c: 6d09 0831 452b dc28 2222 8057  m..1E+.("".W
00000048: a3                             .

</pre><a href="#appendix-D.3.1-1" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="example-file-3-in-binary-representation-only-audio-frame">
<section id="appendix-D.3.2">
          <h4 id="name-example-file-3-in-binary-re">
<a href="#appendix-D.3.2" class="section-number selfRef">D.3.2. </a><a href="#name-example-file-3-in-binary-re" class="section-name selfRef">Example file 3 in binary representation (only audio frame)</a>
          </h4>
<div class="alignLeft art-text artwork" id="appendix-D.3.2-1">
<pre>0000002a: 11111111 11111000 01101000 00000010  ..h.
0000002e: 00000000 00010111 11101001 01000100  ...D
00000032: 00000000 01001111 01101111 00110001  .Oo1
00000036: 00111101 00010000 01000111 11010010  =.G.
0000003a: 00100111 11001011 01101101 00001001  '.m.
0000003e: 00001000 00110001 01000101 00101011  .1E+
00000042: 11011100 00101000 00100010 00100010  .(""
00000046: 10000000 01010111 10100011           .W.

</pre><a href="#appendix-D.3.2-1" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="streaminfo-metadata-block-1">
<section id="appendix-D.3.3">
          <h4 id="name-streaminfo-metadata-block-2">
<a href="#appendix-D.3.3" class="section-number selfRef">D.3.3. </a><a href="#name-streaminfo-metadata-block-2" class="section-name selfRef">Streaminfo metadata block</a>
          </h4>
<p id="appendix-D.3.3-1">Most of the streaminfo metadata block, 
including its header, is the same as in example 1, so only parts that 
are different are listed in the following table.<a href="#appendix-D.3.3-1" class="pilcrow">¶</a></p>
<table class="center" id="table-45">
            <caption><a href="#table-45" class="selfRef">Table 45</a></caption>
<thead>
              <tr>
                <th class="text-left" rowspan="1" colspan="1">Start</th>
                <th class="text-left" rowspan="1" colspan="1">Length</th>
                <th class="text-left" rowspan="1" colspan="1">Contents</th>
                <th class="text-left" rowspan="1" colspan="1">Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x0c+0</td>
                <td class="text-left" rowspan="1" colspan="1">3 bytes</td>
                <td class="text-left" rowspan="1" colspan="1">0x00001f</td>
                <td class="text-left" rowspan="1" colspan="1">Min. frame size 31 byte</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x0f+0</td>
                <td class="text-left" rowspan="1" colspan="1">3 bytes</td>
                <td class="text-left" rowspan="1" colspan="1">0x00001f</td>
                <td class="text-left" rowspan="1" colspan="1">Max. frame size 31 byte</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x12+0</td>
                <td class="text-left" rowspan="1" colspan="1">20 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0x07d0, 0x0000</td>
                <td class="text-left" rowspan="1" colspan="1">Sample rate 32000 hertz</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x14+4</td>
                <td class="text-left" rowspan="1" colspan="1">3 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0b000</td>
                <td class="text-left" rowspan="1" colspan="1">1 channel</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x14+7</td>
                <td class="text-left" rowspan="1" colspan="1">5 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0b00111</td>
                <td class="text-left" rowspan="1" colspan="1">Sample bit depth 8 bit</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x15+4</td>
                <td class="text-left" rowspan="1" colspan="1">36 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0b0000, 0x00000018</td>
                <td class="text-left" rowspan="1" colspan="1">Total no. of samples 24</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x1a</td>
                <td class="text-left" rowspan="1" colspan="1">16 bytes</td>
                <td class="text-left" rowspan="1" colspan="1">(...)</td>
                <td class="text-left" rowspan="1" colspan="1">MD5 checksum</td>
              </tr>
            </tbody>
          </table>
</section>
</div>
<div id="audio-frame">
<section id="appendix-D.3.4">
          <h4 id="name-audio-frame">
<a href="#appendix-D.3.4" class="section-number selfRef">D.3.4. </a><a href="#name-audio-frame" class="section-name selfRef">Audio frame</a>
          </h4>
<p id="appendix-D.3.4-1">The frame header starts at position 0x2a and is broken down in the following table.<a href="#appendix-D.3.4-1" class="pilcrow">¶</a></p>
<table class="center" id="table-46">
            <caption><a href="#table-46" class="selfRef">Table 46</a></caption>
<thead>
              <tr>
                <th class="text-left" rowspan="1" colspan="1">Start</th>
                <th class="text-left" rowspan="1" colspan="1">Length</th>
                <th class="text-left" rowspan="1" colspan="1">Contents</th>
                <th class="text-left" rowspan="1" colspan="1">Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x2a+0</td>
                <td class="text-left" rowspan="1" colspan="1">15 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0xff, 0b1111100</td>
                <td class="text-left" rowspan="1" colspan="1">Frame sync</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x2b+7</td>
                <td class="text-left" rowspan="1" colspan="1">1 bit</td>
                <td class="text-left" rowspan="1" colspan="1">0b0</td>
                <td class="text-left" rowspan="1" colspan="1">blocking strategy</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x2c+0</td>
                <td class="text-left" rowspan="1" colspan="1">4 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0b0110</td>
                <td class="text-left" rowspan="1" colspan="1">8-bit block size further down</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x2c+4</td>
                <td class="text-left" rowspan="1" colspan="1">4 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0b1000</td>
                <td class="text-left" rowspan="1" colspan="1">Sample rate 32 kHz</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x2d+0</td>
                <td class="text-left" rowspan="1" colspan="1">4 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0b0000</td>
                <td class="text-left" rowspan="1" colspan="1">Mono audio (1 channel)</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x2d+4</td>
                <td class="text-left" rowspan="1" colspan="1">3 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0b001</td>
                <td class="text-left" rowspan="1" colspan="1">Bit depth 8 bit</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x2d+7</td>
                <td class="text-left" rowspan="1" colspan="1">1 bit</td>
                <td class="text-left" rowspan="1" colspan="1">0b0</td>
                <td class="text-left" rowspan="1" colspan="1">Mandatory 0 bit</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x2e+0</td>
                <td class="text-left" rowspan="1" colspan="1">1 byte</td>
                <td class="text-left" rowspan="1" colspan="1">0x00</td>
                <td class="text-left" rowspan="1" colspan="1">Frame number 0</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x2f+0</td>
                <td class="text-left" rowspan="1" colspan="1">1 byte</td>
                <td class="text-left" rowspan="1" colspan="1">0x17</td>
                <td class="text-left" rowspan="1" colspan="1">Block size 24</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x30+0</td>
                <td class="text-left" rowspan="1" colspan="1">1 byte</td>
                <td class="text-left" rowspan="1" colspan="1">0xe9</td>
                <td class="text-left" rowspan="1" colspan="1">Frame header CRC</td>
              </tr>
            </tbody>
          </table>
<p id="appendix-D.3.4-3">The first and only subframe starts at byte 0x31, it is broken down in the following table, without the coded residual.<a href="#appendix-D.3.4-3" class="pilcrow">¶</a></p>
<table class="center" id="table-47">
            <caption><a href="#table-47" class="selfRef">Table 47</a></caption>
<thead>
              <tr>
                <th class="text-left" rowspan="1" colspan="1">Start</th>
                <th class="text-left" rowspan="1" colspan="1">Length</th>
                <th class="text-left" rowspan="1" colspan="1">Contents</th>
                <th class="text-left" rowspan="1" colspan="1">Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x31+0</td>
                <td class="text-left" rowspan="1" colspan="1">1 bit</td>
                <td class="text-left" rowspan="1" colspan="1">0b0</td>
                <td class="text-left" rowspan="1" colspan="1">Mandatory 0 bit</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x31+1</td>
                <td class="text-left" rowspan="1" colspan="1">6 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0b100010</td>
                <td class="text-left" rowspan="1" colspan="1">Linear prediction subframe, 3rd order</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x31+7</td>
                <td class="text-left" rowspan="1" colspan="1">1 bit</td>
                <td class="text-left" rowspan="1" colspan="1">0b0</td>
                <td class="text-left" rowspan="1" colspan="1">No wasted bits used</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x32+0</td>
                <td class="text-left" rowspan="1" colspan="1">8 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0x00</td>
                <td class="text-left" rowspan="1" colspan="1">Unencoded warm-up sample 0</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x33+0</td>
                <td class="text-left" rowspan="1" colspan="1">8 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0x4f</td>
                <td class="text-left" rowspan="1" colspan="1">Unencoded warm-up sample 79</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x34+0</td>
                <td class="text-left" rowspan="1" colspan="1">8 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0x6f</td>
                <td class="text-left" rowspan="1" colspan="1">Unencoded warm-up sample 111</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x35+0</td>
                <td class="text-left" rowspan="1" colspan="1">4 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0b0011</td>
                <td class="text-left" rowspan="1" colspan="1">Coefficient precision 4 bit</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x35+4</td>
                <td class="text-left" rowspan="1" colspan="1">5 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0b00010</td>
                <td class="text-left" rowspan="1" colspan="1">Prediction right shift 2</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x36+1</td>
                <td class="text-left" rowspan="1" colspan="1">4 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0b0111</td>
                <td class="text-left" rowspan="1" colspan="1">Predictor coefficient 7</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x36+5</td>
                <td class="text-left" rowspan="1" colspan="1">4 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0b1010</td>
                <td class="text-left" rowspan="1" colspan="1">Predictor coefficient -6</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x37+1</td>
                <td class="text-left" rowspan="1" colspan="1">4 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0b0010</td>
                <td class="text-left" rowspan="1" colspan="1">Predictor coefficient 2</td>
              </tr>
            </tbody>
          </table>
<p id="appendix-D.3.4-5">The data stream continues with the coded 
residual, which is broken down in the following table. Residual 
partitions 3 and 4 are left as an exercise for the reader.<a href="#appendix-D.3.4-5" class="pilcrow">¶</a></p>
<table class="center" id="table-48">
            <caption><a href="#table-48" class="selfRef">Table 48</a></caption>
<thead>
              <tr>
                <th class="text-left" rowspan="1" colspan="1">Start</th>
                <th class="text-left" rowspan="1" colspan="1">Length</th>
                <th class="text-left" rowspan="1" colspan="1">Contents</th>
                <th class="text-left" rowspan="1" colspan="1">Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x37+5</td>
                <td class="text-left" rowspan="1" colspan="1">2 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0b00</td>
                <td class="text-left" rowspan="1" colspan="1">Rice-coded residual, 4-bit parameter</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x37+7</td>
                <td class="text-left" rowspan="1" colspan="1">4 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0b0010</td>
                <td class="text-left" rowspan="1" colspan="1">Partition order 2</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x38+3</td>
                <td class="text-left" rowspan="1" colspan="1">4 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0b0011</td>
                <td class="text-left" rowspan="1" colspan="1">Rice parameter 3</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x38+7</td>
                <td class="text-left" rowspan="1" colspan="1">1 bit</td>
                <td class="text-left" rowspan="1" colspan="1">0b1</td>
                <td class="text-left" rowspan="1" colspan="1">Quotient 0</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x39+0</td>
                <td class="text-left" rowspan="1" colspan="1">3 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0b110</td>
                <td class="text-left" rowspan="1" colspan="1">Remainder 6</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x39+3</td>
                <td class="text-left" rowspan="1" colspan="1">1 bit</td>
                <td class="text-left" rowspan="1" colspan="1">0b1</td>
                <td class="text-left" rowspan="1" colspan="1">Quotient 0</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x39+4</td>
                <td class="text-left" rowspan="1" colspan="1">3 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0b001</td>
                <td class="text-left" rowspan="1" colspan="1">Remainder 1</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x39+7</td>
                <td class="text-left" rowspan="1" colspan="1">4 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0b0001</td>
                <td class="text-left" rowspan="1" colspan="1">Quotient 3</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x3a+3</td>
                <td class="text-left" rowspan="1" colspan="1">3 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0b001</td>
                <td class="text-left" rowspan="1" colspan="1">Remainder 1</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x3a+6</td>
                <td class="text-left" rowspan="1" colspan="1">4 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0b1111</td>
                <td class="text-left" rowspan="1" colspan="1">No Rice parameter, escape code</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x3b+2</td>
                <td class="text-left" rowspan="1" colspan="1">5 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0b00101</td>
                <td class="text-left" rowspan="1" colspan="1">Partition encoded with 5 bits</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x3b+7</td>
                <td class="text-left" rowspan="1" colspan="1">5 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0b10110</td>
                <td class="text-left" rowspan="1" colspan="1">Residual -10</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x3c+4</td>
                <td class="text-left" rowspan="1" colspan="1">5 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0b11010</td>
                <td class="text-left" rowspan="1" colspan="1">Residual -6</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x3d+1</td>
                <td class="text-left" rowspan="1" colspan="1">5 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0b00010</td>
                <td class="text-left" rowspan="1" colspan="1">Residual 2</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x3d+6</td>
                <td class="text-left" rowspan="1" colspan="1">5 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0b01000</td>
                <td class="text-left" rowspan="1" colspan="1">Residual 8</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x3e+3</td>
                <td class="text-left" rowspan="1" colspan="1">5 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0b01000</td>
                <td class="text-left" rowspan="1" colspan="1">Residual 8</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x3f+0</td>
                <td class="text-left" rowspan="1" colspan="1">5 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0b00110</td>
                <td class="text-left" rowspan="1" colspan="1">Residual 6</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x3f+5</td>
                <td class="text-left" rowspan="1" colspan="1">4 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0b0010</td>
                <td class="text-left" rowspan="1" colspan="1">Rice parameter 2</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x40+1</td>
                <td class="text-left" rowspan="1" colspan="1">22 bits</td>
                <td class="text-left" rowspan="1" colspan="1">(...)</td>
                <td class="text-left" rowspan="1" colspan="1">Residual partition 3</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x42+7</td>
                <td class="text-left" rowspan="1" colspan="1">4 bits</td>
                <td class="text-left" rowspan="1" colspan="1">0b0001</td>
                <td class="text-left" rowspan="1" colspan="1">Rice parameter 1</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0x43+3</td>
                <td class="text-left" rowspan="1" colspan="1">23 bits</td>
                <td class="text-left" rowspan="1" colspan="1">(...)</td>
                <td class="text-left" rowspan="1" colspan="1">Residual partition 4</td>
              </tr>
            </tbody>
          </table>
<p id="appendix-D.3.4-7">The frame ends with 6 padding bits and a 2 byte frame CRC<a href="#appendix-D.3.4-7" class="pilcrow">¶</a></p>
<p id="appendix-D.3.4-8">To decode this subframe, 21 predictions have to
 be calculated and added to their corresponding residuals. This is a 
sequential process: as each prediction uses previous samples, it is not 
possible to start this decoding halfway a subframe or decode a subframe 
with parallel threads.<a href="#appendix-D.3.4-8" class="pilcrow">¶</a></p>
<p id="appendix-D.3.4-9">The following table breaks down the calculation
 for each sample. For example, the predictor without shift value of row 4
 is found by applying the predictor with the three warm-up samples: 
7*111 - 6*79 + 2*0 = 303. This value is then shifted right by 2 bits: 
303 &gt;&gt; 2 = 75. Then, the decoded residual sample is added: 75 + 3 =
 78.<a href="#appendix-D.3.4-9" class="pilcrow">¶</a></p>
<table class="center" id="table-49">
            <caption><a href="#table-49" class="selfRef">Table 49</a></caption>
<thead>
              <tr>
                <th class="text-left" rowspan="1" colspan="1">Residual</th>
                <th class="text-left" rowspan="1" colspan="1">Predictor w/o shift</th>
                <th class="text-left" rowspan="1" colspan="1">Predictor</th>
                <th class="text-left" rowspan="1" colspan="1">Sample value</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">(warm-up)</td>
                <td class="text-left" rowspan="1" colspan="1">N/A</td>
                <td class="text-left" rowspan="1" colspan="1">N/A</td>
                <td class="text-left" rowspan="1" colspan="1">0</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">(warm-up)</td>
                <td class="text-left" rowspan="1" colspan="1">N/A</td>
                <td class="text-left" rowspan="1" colspan="1">N/A</td>
                <td class="text-left" rowspan="1" colspan="1">79</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">(warm-up)</td>
                <td class="text-left" rowspan="1" colspan="1">N/A</td>
                <td class="text-left" rowspan="1" colspan="1">N/A</td>
                <td class="text-left" rowspan="1" colspan="1">111</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">3</td>
                <td class="text-left" rowspan="1" colspan="1">303</td>
                <td class="text-left" rowspan="1" colspan="1">75</td>
                <td class="text-left" rowspan="1" colspan="1">78</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">-1</td>
                <td class="text-left" rowspan="1" colspan="1">38</td>
                <td class="text-left" rowspan="1" colspan="1">9</td>
                <td class="text-left" rowspan="1" colspan="1">8</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">-13</td>
                <td class="text-left" rowspan="1" colspan="1">-190</td>
                <td class="text-left" rowspan="1" colspan="1">-48</td>
                <td class="text-left" rowspan="1" colspan="1">-61</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">-10</td>
                <td class="text-left" rowspan="1" colspan="1">-319</td>
                <td class="text-left" rowspan="1" colspan="1">-80</td>
                <td class="text-left" rowspan="1" colspan="1">-90</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">-6</td>
                <td class="text-left" rowspan="1" colspan="1">-248</td>
                <td class="text-left" rowspan="1" colspan="1">-62</td>
                <td class="text-left" rowspan="1" colspan="1">-68</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">2</td>
                <td class="text-left" rowspan="1" colspan="1">-58</td>
                <td class="text-left" rowspan="1" colspan="1">-15</td>
                <td class="text-left" rowspan="1" colspan="1">-13</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">8</td>
                <td class="text-left" rowspan="1" colspan="1">137</td>
                <td class="text-left" rowspan="1" colspan="1">34</td>
                <td class="text-left" rowspan="1" colspan="1">42</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">8</td>
                <td class="text-left" rowspan="1" colspan="1">236</td>
                <td class="text-left" rowspan="1" colspan="1">59</td>
                <td class="text-left" rowspan="1" colspan="1">67</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">6</td>
                <td class="text-left" rowspan="1" colspan="1">191</td>
                <td class="text-left" rowspan="1" colspan="1">47</td>
                <td class="text-left" rowspan="1" colspan="1">53</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0</td>
                <td class="text-left" rowspan="1" colspan="1">53</td>
                <td class="text-left" rowspan="1" colspan="1">13</td>
                <td class="text-left" rowspan="1" colspan="1">13</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">-3</td>
                <td class="text-left" rowspan="1" colspan="1">-93</td>
                <td class="text-left" rowspan="1" colspan="1">-24</td>
                <td class="text-left" rowspan="1" colspan="1">-27</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">-5</td>
                <td class="text-left" rowspan="1" colspan="1">-161</td>
                <td class="text-left" rowspan="1" colspan="1">-41</td>
                <td class="text-left" rowspan="1" colspan="1">-46</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">-4</td>
                <td class="text-left" rowspan="1" colspan="1">-134</td>
                <td class="text-left" rowspan="1" colspan="1">-34</td>
                <td class="text-left" rowspan="1" colspan="1">-38</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">-1</td>
                <td class="text-left" rowspan="1" colspan="1">-44</td>
                <td class="text-left" rowspan="1" colspan="1">-11</td>
                <td class="text-left" rowspan="1" colspan="1">-12</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">1</td>
                <td class="text-left" rowspan="1" colspan="1">52</td>
                <td class="text-left" rowspan="1" colspan="1">13</td>
                <td class="text-left" rowspan="1" colspan="1">14</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">1</td>
                <td class="text-left" rowspan="1" colspan="1">94</td>
                <td class="text-left" rowspan="1" colspan="1">23</td>
                <td class="text-left" rowspan="1" colspan="1">24</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">4</td>
                <td class="text-left" rowspan="1" colspan="1">60</td>
                <td class="text-left" rowspan="1" colspan="1">15</td>
                <td class="text-left" rowspan="1" colspan="1">19</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">2</td>
                <td class="text-left" rowspan="1" colspan="1">17</td>
                <td class="text-left" rowspan="1" colspan="1">4</td>
                <td class="text-left" rowspan="1" colspan="1">6</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">2</td>
                <td class="text-left" rowspan="1" colspan="1">-24</td>
                <td class="text-left" rowspan="1" colspan="1">-6</td>
                <td class="text-left" rowspan="1" colspan="1">-4</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">2</td>
                <td class="text-left" rowspan="1" colspan="1">-26</td>
                <td class="text-left" rowspan="1" colspan="1">-7</td>
                <td class="text-left" rowspan="1" colspan="1">-5</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">0</td>
                <td class="text-left" rowspan="1" colspan="1">1</td>
                <td class="text-left" rowspan="1" colspan="1">0</td>
                <td class="text-left" rowspan="1" colspan="1">0</td>
              </tr>
            </tbody>
          </table>
<p id="appendix-D.3.4-11">By lining all these samples up, we get the following input for the MD5 checksum calculation process.<a href="#appendix-D.3.4-11" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="appendix-D.3.4-12">
<pre>0x004F 6F4E 08C3 A6BC F32A 4335 0DE5 D2DA F40E 1813 06FC FB00

</pre><a href="#appendix-D.3.4-12" class="pilcrow">¶</a>
</div>
<p id="appendix-D.3.4-13">Which indeed results in the MD5 checksum found in the streaminfo metadata block.<a href="#appendix-D.3.4-13" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="authors-addresses">
<section id="appendix-E">
      <h2 id="name-authors-addresses">
<a href="#name-authors-addresses" class="section-name selfRef">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Martijn van Beurden</span></div>
<div dir="auto" class="left"><span class="country-name">Netherlands</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:mvanb1@gmail.com" class="email">mvanb1@gmail.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Andrew Weaver</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:theandrewjw@gmail.com" class="email">theandrewjw@gmail.com</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>


</body></html>